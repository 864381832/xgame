require=function n(o,s,c){function u(t,e){if(!s[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(m)return m(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var i=s[t]={exports:{}};o[t][0].call(i.exports,function(e){return u(o[t][1][e]||e)},i,i.exports,n,o,s,c)}return s[t].exports}for(var m="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({AboutGame:[function(e,t,r){"use strict";cc._RF.push(t,"be7654mikxIkr6yrVLNwbe4","AboutGame");var a=e("GameUiTools"),i=e("GameTools");cc.Class({extends:cc.Component,properties:{customerButton:cc.Node},start:function(){a.setButtonClickEvents(this,this.node,"loadingResource"),a.setButtonClickEvents(this,this.customerButton,"openCustomerServiceConversation")},openCustomerServiceConversation:function(){i.playSimpleAudioEngine(0),null!=window.wx?window.wx.openCustomerServiceConversation({}):i.toastMessage(1)},loadingResource:function(){i.playSimpleAudioEngine(0),cc.director.loadScene("MenuUI")}}),cc._RF.pop()},{GameTools:"GameTools",GameUiTools:"GameUiTools"}],AnimInAndOut:[function(e,t,r){"use strict";cc._RF.push(t,"a9500+oq7JEj52phDmM9aYr","AnimInAndOut"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onEnable:function(){this.node.opacity=0,this.node.setScale(0);var e=cc.fadeIn(.2),t=cc.scaleTo(.2,1);this.node.runAction(cc.spawn(e,t))},animateAndDestroy:function(){var e=this;if(!this.isDestroying){this.isDestroying=!0;var t=cc.fadeOut(.2),r=cc.scaleTo(.2,0),a=cc.callFunc(function(){e.node&&e.node.destroy()});this.node.runAction(cc.sequence(cc.spawn(t,r),a))}},animateAndDisable:function(){var e=this;if(!this.isDestroying){this.isDestroying=!0;var t=cc.fadeOut(.2),r=cc.scaleTo(.2,0),a=cc.callFunc(function(){e.node.active=!1});this.node.runAction(cc.sequence(cc.spawn(t,r),a))}}}),cc._RF.pop()},{}],AnimLayerTool:[function(e,t,r){"use strict";cc._RF.push(t,"c7d9bNOBXZGNIe053DCaJc2","AnimLayerTool");var d=e("CardSprite"),l=e("GameConfig"),M=e("GameTools"),c=l.DEVICE_WIDTH,u=l.DEVICE_HEIGHT,a={moveButtonAnimTime:.3,MoveButtonAnimType:{up:0,down:1,left:2,right:3,leftUp:4,leftDown:5,rightUp:6,rightDown:7},bottonAnim:function(e){var t=new Array;null==e.length?t[0]=e:t=e;for(var r=0;r<t.length;r++){var a=5*cc.random0To1()+1,i=t[r].height/20,n=cc.jumpBy(a,cc.p(i,0),i,1),o=cc.jumpBy(a,cc.p(-i,0),-i,1),s=cc.scaleBy(.3,1.1,.9),c=cc.delayTime(a),u=cc.sequence(n,o,s,s.reverse(),c);t[r].runAction(u.repeatForever())}},createShowMessageBox:function(e,t,r,a,i){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("messageBox0"),n.setPosition(e,t),n.rotation=a,n.opacity=0,i.addChild(n);var o=new cc.Node;if(o.setPosition(0,30),-1!=r.indexOf("messageBox"))o.addComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame(r);else{var s=new cc.Node,c=s.addComponent(cc.Label);c.string=r,c.fontSize=30,c.overflow=cc.Label.Overflow.CLAMP,c.enableWrapText=!0,c.horizontalAlign=cc.Label.HorizontalAlign.CENTER,c.verticalAlign=cc.Label.VerticalAlign.CENTER,s.width=220,s.height=300,o.addChild(s)}n.addChild(o);var u=cc.fadeIn(.2),m=cc.delayTime(1),h=cc.fadeOut(.2),d=cc.callFunc(this.callFuncAddScore,this,n),l=cc.sequence(u,m,h,d);n.runAction(l)},createShowMessageBoxAward:function(e,t){8<=t&&M.autoShowSpotAds(.1*t);var r=new cc.Node;if(-1==t)M.playSimpleAudioEngine(3),r.addComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("toast6");else{if(t<3)return;t<5?(M.playSimpleAudioEngine(6),r.addComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("toast1")):t<8?(M.playSimpleAudioEngine(7),r.addComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("toast2")):t<11?(M.playSimpleAudioEngine(8),r.addComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("toast3")):t<14?(M.playSimpleAudioEngine(9),r.addComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("toast4")):(M.playSimpleAudioEngine(10),r.addComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("toast5"))}r.setPosition(0,260),r.setOpacity(0),e.addChild(r);var a=cc.fadeIn(.5),i=cc.delayTime(1),n=cc.fadeOut(.5),o=cc.callFunc(this.callFuncAddScore,this,r),s=cc.sequence(a,i,n,o);r.runAction(s)},moveButtonAnim:function(e,t,r){var a=e.x,i=e.y,n=e.getContentSize();if(t){switch(r){case 0:e.setPosition(a,u+n.height);break;case 1:e.setPosition(a,-n.height);break;case 2:e.setPosition(-n.width,i);break;case 3:e.setPosition(c+n.width,i);break;case 4:e.setPosition(-n.width,u+n.height);break;case 5:e.setPosition(-n.width,-n.height);break;case 6:e.setPosition(c+n.width,u+n.height);break;case 7:e.setPosition(c+n.width,-n.height)}var o=cc.moveTo(this.moveButtonAnimTime,cc.p(a,i));e.runAction(o)}else{var s=void 0;switch(r){case 0:s=cc.moveTo(this.moveButtonAnimTime,cc.p(a,u+n.height));break;case 1:s=cc.moveTo(this.moveButtonAnimTime,cc.p(a,-n.height));break;case 2:s=cc.moveTo(this.moveButtonAnimTime,cc.p(-n.width,i));break;case 3:s=cc.moveTo(this.moveButtonAnimTime,cc.p(c+n.width,i));break;case 4:s=cc.moveTo(this.moveButtonAnimTime,cc.p(-n.width,u+n.height));break;case 5:s=cc.moveTo(this.moveButtonAnimTime,cc.p(-n.width,-n.height));break;case 6:s=cc.moveTo(this.moveButtonAnimTime,cc.p(c+n.width,u+n.height));break;case 7:s=cc.moveTo(this.moveButtonAnimTime,cc.p(c+n.width,-n.height))}e.runAction(s)}},createAddScore:function(e){var t=new cc.Node,r=t.addComponent(cc.Label);r.font=M.numberLabelAtlas,r.string=":"+e,t.setPosition(-46,505),t.setOpacity(100),l.GameScene.node.addChild(t);var a=cc.moveBy(.3,0,106),i=cc.fadeIn(.2),n=cc.spawn(a,i),o=cc.callFunc(this.callFuncAddScore,this,t);t.runAction(cc.sequence(n,o))},callFuncAddScore:function(e,t){e.destroy()},createScoreMoveAnim:function(e,t,r){if(0<t){var a=new cc.Node,i=a.addComponent(cc.Label);i.font=M.numberLabelAtlas,i.string=":"+t,a.setPosition(e.x,e.y),e.getParent().addChild(a,100,100);var n=cc.callFunc(this.callFuncScoreMoveAnim,this,a),o=null;(o=r?cc.moveTo(1,418,1048):cc.moveTo(1,199,1144)).easing(cc.easeExponentialIn()),a.runAction(cc.sequence(o,n))}},callFuncScoreMoveAnim:function(e,t){l.mainMenu==l.MainMenu.MainMenuNumPop?l.GameLogic.setScore():l.mainMenu==l.MainMenu.MainMenuNumPopStar&&l.GameLogic.setScore(),t.destroy()},createChangeCardNumAnim:function(e,t){var r=new d(e.getNumber(),e.getPositionX(),e.getPositionY());e.getParent().addChild(r,1,1),e.active=!1,e.setNumber(t),r.setNumber(t);var a=cc.scaleTo(.3,0);a.easing(cc.easeBackIn());var i=cc.scaleTo(.1,1),n=cc.callFunc(this.callFuncChangeCardNum1,this,r),o=cc.callFunc(this.callFuncChangeCardNum2,this,[r,e]),s=cc.sequence(a,n,i,o);r.runAction(s)},callFuncChangeCardNum1:function(e,t){t.CardShow()},callFuncChangeCardNum2:function(e,t){var r=t[0],a=t[1];a.CardShow(),a.active=!0,r.destroy()},createExchangeCardAnim:function(e,t,r){var a=e.getPositionX(),i=e.getPositionY(),n=l.CARD_WIDTH/(l.CAED_LINES+1),o=cc.scaleBy(.4,1.15),s=cc.sequence(o,o.reverse());if(0<t){var c=new d(-1,a-n-l.CARD_WIDTH,i);e.getParent().addChild(c,1,2001),c.runAction(s.clone().repeatForever())}if(t<l.CAED_LINES-1){var u=new d(-1,a+n+l.CARD_WIDTH,i);e.getParent().addChild(u,1,2002),u.runAction(s.clone().repeatForever())}if(0<r){var m=new d(-1,a,i-n-l.CARD_WIDTH);e.getParent().addChild(m,1,2003),m.runAction(s.clone().repeatForever())}if(r<l.CAED_LINES-1){var h=new d(-1,a,i+n+l.CARD_WIDTH);e.getParent().addChild(h,1,2004),h.runAction(s.clone().repeatForever())}},createRemoveExchangeCardAnim:function(e,t,r){0<t&&e.getParent().removeChildByTag(2001),t<l.CAED_LINES-1&&e.getParent().removeChildByTag(2002),0<r&&e.getParent().removeChildByTag(2003),r<l.CAED_LINES-1&&e.getParent().removeChildByTag(2004)},createScaleToCard:function(e){var t=new d(e.number,e.x,e.y);e.getParent().addChild(t,1,1),e.active=!1,t.setScale(0);var r=cc.scaleTo(.3,1);r.easing(cc.easeBackOut());var a=cc.callFunc(this.callFuncCard1,this,[t,e]);t.runAction(cc.sequence(r,a))},callFuncCard1:function(e,t){t[1].CardShow(),t[1].active=!0,t[0].destroy()},backAnim:function(e){e.getParent().runAction(cc.sequence(cc.scaleBy(.05,.95),cc.scaleTo(.125,1)))},createMoveAnim:function(e,t,r){var a=new d(e.number,e.x,e.y);t.getParent().addChild(a,1,1);var i=0;l.IS_GAME_ANI_EFFECTS&&(i=5*cc.random0To1());var n=cc.callFunc(this.callFuncCard2,this,[a,t,r]),o=cc.moveTo(.3,cc.p(t.x,t.y));i<1?o=cc.moveTo(.1,cc.p(t.x,t.y)):i<2?o.easing(cc.easeBackIn()):i<3?o.easing(cc.easeBackOut()):i<4?o.easing(cc.easeBackInOut()):i<5&&(o=cc.jumpTo(.3,cc.p(t.x,t.y),l.CARD_WIDTH,2)),a.runAction(cc.sequence(o,n))},callFuncCard2:function(e,t){if(t[1].CardShow(),t[2]){t[0].number=t[1].number,t[0].CardShow();var r=cc.scaleBy(.02,1.15),a=cc.callFunc(this.callFuncCard3,this,t[0]);t[0].runAction(cc.sequence(r,r.reverse(),a))}else t[0].destroy()},callFuncCard3:function(e,t){t.destroy()},createPopStarAnim:function(e,t){var r=cc.callFunc(this.callFuncPopStarAnim,this,e);e.runAction(cc.sequence(cc.delayTime(t),r,cc.fadeOut()))},callFuncPopStarAnim:function(e,t){M.playSimpleAudioEngine(0);var r=new cc.Node;r.setPosition(t.getPosition());var a=r.addComponent(cc.ParticleSystem);switch(a.texture="res/raw-assets/resources/stars.png",t.getNumber()){case 2:a.startColor=cc.color(254,9,109);break;case 4:a.startColor=cc.color(252,14,252);break;case 8:a.startColor=cc.color(226,17,251);break;case 16:a.startColor=cc.color(162,15,255);break;case 32:a.startColor=cc.color(71,222,255);break;case 64:a.startColor=cc.color(0,204,255);break;case 128:a.startColor=cc.color(184,255,48);break;case 256:a.startColor=cc.color(253,44,129);break;case 512:a.startColor=cc.color(254,170,47);break;case 1024:a.startColor=cc.color(253,44,129);break;case 2048:a.startColor=cc.color(31,214,254);break;case 4096:a.startColor=cc.color(255,28,121);break;case 8192:a.startColor=cc.color(17,64,139);break;case 16384:a.startColor=cc.color(131,32,254);break;case 32768:a.startColor=cc.color(41,122,255);break;case 65536:a.startColor=cc.color(190,50,129);break;case 131072:a.startColor=cc.color(30,170,45);break;default:a.startColor=cc.color(253,44,129)}a.startColorVar=cc.color(0,0,0,0),a.endColorVar=cc.color(0,0,0,0),a.endColor=a.startColor,a.autoRemoveOnFinish=!0,a.duration=.1,a.emissionRate=100,a.life=2,a.lifeVar=.5,a.angle=90,a.angleVar=360,a.custom=!0,a.playOnLoad=!0,t.getParent().addChild(r)},ShowGridButton:function(e,t){var r=cc.moveTo(.2,e[1].getPosition()),a=cc.callFunc(this.callFuncShowGridButton,this,[e,t]);e[0].runAction(r),e[2].runAction(cc.sequence(r.clone(),a))},callFuncShowGridButton:function(e,t){var r=t[0],a=t[1];r[0].active=!1,r[2].active=!1;var i=[];i[0]=cc.moveTo(.3,-200,145),i[1]=cc.moveTo(.3,0,225),i[2]=cc.moveTo(.3,200,145),i[3]=cc.moveTo(.3,-200,-145),i[4]=cc.moveTo(.3,0,-225),i[5]=cc.moveTo(.3,200,-145);for(var n=cc.fadeIn(),o=0;o<6;o++){a[o].active=!0,i[o].easing(cc.easeBackOut());var s=cc.delayTime(.05*o);a[o].runAction(cc.sequence(s,n.clone(),i[o]))}},ShowGridMainMenuButton:function(e,t){for(var r=cc.moveTo(.2,0,0),a=cc.callFunc(this.callFuncGridMainMenuButton,this,[e,t]),i=cc.fadeOut(),n=1;n<6;n++){var o=cc.delayTime(.05*(5-n));t[n].runAction(cc.sequence(o,r.clone(),i.clone()))}t[0].runAction(cc.sequence(cc.delayTime(.25),r,i,a))},callFuncGridMainMenuButton:function(e,t){for(var r=t[0],a=t[1],i=0;i<6;i++)a[i].active=!1;r[0].active=!0,r[2].active=!0;var n=cc.moveTo(.3,0,0),o=cc.moveTo(.3,0,-280);n.easing(cc.easeBackOut()),o.easing(cc.easeBackOut()),r[0].runAction(n),r[2].runAction(o)},ShowMoreGameButton:function(e,t){var r=cc.moveTo(.2,e[2].getPosition()),a=cc.callFunc(this.callFuncShowMoreGameButton,this,[e,t]);e[0].runAction(r.clone()),e[1].runAction(cc.sequence(r.clone(),a))},callFuncShowMoreGameButton:function(e,t){var r=t[0],a=t[1];r[0].active=!1,r[1].active=!1;var i=[5];i[0]=cc.moveTo(.3,-230,240),i[1]=cc.moveTo(.3,-90,360),i[2]=cc.moveTo(.3,90,360),i[3]=cc.moveTo(.3,230,240),i[4]=cc.moveTo(.3,0,160);for(var n=cc.fadeIn(),o=0;o<5;o++){a[o].active=!0,i[o].easing(cc.easeBackOut());var s=cc.delayTime(.05*o);a[o].runAction(cc.sequence(s,n.clone(),i[o]))}},ShowMoreGameMainMenuButton:function(e,t){for(var r=cc.moveTo(.2,0,0),a=cc.callFunc(this.callFuncMoreGameMainMenuButton,this,[e,t]),i=cc.fadeOut(),n=1;n<5;n++){var o=cc.delayTime(.05*(4-n));t[n].runAction(cc.sequence(o,r.clone(),i.clone()))}t[0].runAction(cc.sequence(cc.delayTime(.2),r,i,a))},callFuncMoreGameMainMenuButton:function(e,t){for(var r=t[0],a=t[1],i=0;i<5;i++)a[i].active=!1;r[0].active=!0,r[1].active=!0;var n=cc.moveTo(.3,0,0),o=cc.moveTo(.3,0,-140);n.easing(cc.easeBackOut()),o.easing(cc.easeBackOut()),r[0].runAction(n),r[1].runAction(o)},ShowGameMainMenuButton:function(e,t){for(var r=t.length,a=cc.moveTo(.1,0,0),i=0;i<r-1;i++)t[i].runAction(cc.sequence(cc.delayTime(.04*i),a.clone(),cc.fadeOut()));var n=cc.callFunc(this.callFuncGameMainMenuButton,this,[e,t]);t[r-1].runAction(cc.sequence(cc.delayTime(.04*(r-1)),a,n))},callFuncGameMainMenuButton:function(e,t){var r=t[0],a=t[1],i=a.length;l.gameMainMenu==l.GameMainMenu.GameMainMenuSet?(r.getComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("setMenu0"),l.IS_GAME_SHARE&&(l.IS_GAME_SHARE=!1,M.sharePicture())):l.gameMainMenu==l.GameMainMenu.GameMainMenuAutoMove?l.autoMoveType!=l.AutoMoveType.AutoMoveStop?r.getComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("autoMenu5"):r.getComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("autoMenu0"):l.gameMainMenu==l.GameMainMenu.GameMainMenuProps&&(r.getComponent(cc.Sprite).spriteFrame=M.love2048FrameCache.getSpriteFrame("propsMenu0"),l.GameScene.gameIntegral.node.active=!0);for(var n=0;n<i;n++)a[n].active=!1;l.gameMainMenu=l.GameMainMenu.GameMainMenuSpace},ShowGameSecondButton:function(e,t){for(var r=t.length,a=0;a<r;a++){t[a].active=!0;var i=-60-60*a-12*(a+1),n=cc.moveTo(.1*(a+1),0,i);n.easing(cc.easeBackOut()),t[a].runAction(cc.sequence(cc.fadeIn(),n))}}};t.exports=a,cc._RF.pop()},{CardSprite:"CardSprite",GameConfig:"GameConfig",GameTools:"GameTools"}],CardSprite:[function(e,t,r){"use strict";cc._RF.push(t,"28336VhLi9NP5ajnOs9H8AM","CardSprite");var v=e("GameConfig"),f=e("GameTools"),a=cc.Class({extends:cc.Node,properties:{cardSprite:null,cardNumTextLabel:cc.Label,number:0,isSelect:!1,isFirstSelect:!1},ctor:function(e,t,r){if(this.cardSprite=this.addComponent(cc.Sprite),!v.IsUseDefaultStyle){var a=new cc.Node;a.setContentSize(8*v.CARD_WIDTH/10,8*v.CARD_WIDTH/10),this.cardNumTextLabel=a.addComponent(cc.Label),this.cardNumTextLabel.string="",this.cardNumTextLabel.fontSize=6*v.CARD_WIDTH/10,this.cardNumTextLabel.lineHeight=6*v.CARD_WIDTH/10,this.cardNumTextLabel.horizontalAlign=cc.Label.HorizontalAlign.CENTER,this.cardNumTextLabel.verticalAlign=cc.Label.VerticalAlign.CENTER,this.cardNumTextLabel.overflow=cc.Label.Overflow.SHRINK,this.cardNumTextLabel.enableWrapText=!1,this.addChild(a,100,100)}this.initCard(e,t,r)},initCard:function(e,t,r){this.number=e,this.CardShow(),this.setPosition(t,r),this.width=v.CARD_WIDTH,this.height=v.CARD_WIDTH,this.cardSprite.sizeMode=cc.Sprite.SizeMode.CUSTOM},CardShow:function(){1==this.number?this.cardSprite.spriteFrame=f.love2048FrameCache.getSpriteFrame("barrier"):-1==this.number?this.cardSprite.spriteFrame=f.love2048FrameCache.getSpriteFrame("emptyl2"):0==this.number?v.IsUseEmptyCardBack?this.cardSprite.spriteFrame=null:"false"==v.diyCardBackImageUrl?this.cardSprite.spriteFrame=f.love2048FrameCache.getSpriteFrame("emptyl"):this.cardSprite.spriteFrame=new cc.SpriteFrame(v.diyCardBackImageUrl):2<=this.number&&this.number<=131072?v.IsUseDefaultStyle?this.cardSprite.spriteFrame=f.love2048FrameCache.getSpriteFrame("n"+this.number):"false"==v.numSpriteUrl[this.number]?""==v.numSpriteText[this.number]?this.cardSprite.spriteFrame=f.love2048FrameCache.getSpriteFrame("n"+this.number):this.cardSprite.spriteFrame=f.love2048FrameCache.getSpriteFrame("nl"+this.number):this.cardSprite.spriteFrame=new cc.SpriteFrame(v.numSpriteUrl[this.number]):this.cardSprite.spriteFrame=f.love2048FrameCache.getSpriteFrame("nnn"),v.IsUseDefaultStyle||(2<=this.number&&this.number<=131072?this.cardNumTextLabel.string=v.numSpriteText[this.number]:this.cardNumTextLabel.string="")},setNumber:function(e){this.number=e},getNumber:function(){return this.number},CardClickShow:function(e){if(0==e){if(v.IsUseDefaultStyle)this.removeAllChildren();else{var t=new Array,r=!0,a=!1,i=void 0;try{for(var n,o=this.getChildren()[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var s=n.value;100!=s.tag&&t.push(s)}}catch(e){a=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw i}}var c=!0,u=!1,m=void 0;try{for(var h,d=t[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var l=h.value;this.removeChild(l)}}catch(e){u=!0,m=e}finally{try{!c&&d.return&&d.return()}finally{if(u)throw m}}}this.isSelect=!1,this.isFirstSelect=!1}else{var M=cc.moveBy(.05,cc.v2(0,2));this.runAction(cc.sequence(M,M.reverse())),this.isSelect=!0;var p=new cc.Node;p.addComponent(cc.Sprite).spriteFrame=f.love2048FrameCache.getSpriteFrame("emptyl2");var A=p.getContentSize().height,S=this.getContentSize().height/A;if(p.setScale(S),this.addChild(p),1==e){this.isFirstSelect=!0;var g=cc.scaleBy(.4,1.15),C=cc.sequence(g,g.reverse());p.runAction(C.repeatForever())}else 2==e&&p.setScale(S+.05)}},getIsSelect:function(){return this.isSelect},getIsFirstSelect:function(){return this.isFirstSelect},isVisible:function(){return 255==this.opacity},setVisible:function(e){this.opacity=e?255:0}});t.exports=a,cc._RF.pop()},{GameConfig:"GameConfig",GameTools:"GameTools"}],ChallengeView:[function(e,t,r){"use strict";cc._RF.push(t,"3118fl3XVxCRpsK3dr6fQx+","ChallengeView");e("CardSprite"),e("GameConfig");var o=e("GameData"),s=(e("AnimLayerTool"),e("GameTools")),a=e("GameUiTools");cc.Class({extends:cc.Component,name:"ChallengeView",properties:{pageView:cc.PageView,backButton:cc.Node},start:function(){a.setButtonClickEvents(this,this.node,"backButtonFunc");for(var e=0;e<o.getChallengeLevelNum();e++){var t=this.getChallengeView(e);a.setButtonClickEvents(this,t,"challengeViewFunc",e),this.pageView.insertPage(t,e)}},getChallengeView:function(e){for(var t=new cc.Node,r=o.getChallengeLevelData(e),a=0;a<5;a++)for(var i=0;i<5;i++){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=s.love2048FrameCache.getSpriteFrame(r[5*a+i]-"0"==0?"emptyl":"barrier"),n.setPosition(120*a-300+60,120*i-300+60),t.addChild(n,1,1)}return t.setContentSize(700,600),t},challengeViewFunc:function(e,t){this.node.getParent().getChildren()[0].getComponent(cc.Component).challengeGame(t)},backButtonFunc:function(e){s.playSimpleAudioEngine(0),this.node.destroy()}}),cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",CardSprite:"CardSprite",GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools"}],GameConfig:[function(e,t,r){"use strict";cc._RF.push(t,"46c748wv4VLyr/hxp22x0JY","GameConfig");var a={LoadingSceneFirst:0,LoadingSceneEnterGame:1,LoadingSceneBackGame:2},i={MainMenuNumClassic:0,MainMenuNumGridChoose:1,MainMenuChallenge:2,MainMenuAggregation:3,MainMenuCountdown:4,MainMenuNumPop:5,MainMenuNumPopStar:6,MainMenuSpace:7},n={GameMainMenuProps:0,GameMainMenuAutoMove:1,GameMainMenuSet:2,GameMainMenuSpace:3},o={PropsMenuBackout:0,PropsMenuDestroyCard:1,PropsMenuExchangeCard:2,PropsMenuShrinkNum:3,PropsMenuRemoveAcross:4,PropsMenuRemoveVertical:5,PropsMenuSpace:6},s={AutoMoveAngle:0,AutoMoveSway:1,AutoMoveSpin:2,AutoMoveRandom:3,AutoMoveStop:4},c={GameClubButton:null,GameScene:null,GameLogic:null,LoadingSceneType:a,MainMenu:i,GameMainMenu:n,PropsMenu:o,AutoMoveType:s,DEVICE_WIDTH:720,DEVICE_HEIGHT:1280,CARD_WIDTH:0,CAED_LINES:4,GameChallengeType:0,MAIN_MENU_NUM:-1e3,loadingSceneType:a.LoadingSceneFirst,mainMenu:i.MainMenuSpace,gameMainMenu:n.GameMainMenuSpace,propsMenu:o.PropsMenuSpace,autoMoveType:s.AutoMoveStop,IS_GAME_MUSIC:!0,IS_GAME_BACK_MUSIC:!1,IS_GAME_EFFECTS:!0,IS_GAME_ANI_EFFECTS:!1,IsUseDefaultStyle:!0,isUseSystemFont:!0,IsUseEmptyCardBack:!1,diyCardBackImageUrl:"false",diyBackImageUrl:"false",numSpriteUrl:new Array,numSpriteText:new Array,IS_GAME_SHARE:!1,IS_GAME_OVER:!1,IS_GAME_WIN:!1};t.exports=c,cc._RF.pop()},{}],GameData:[function(e,t,r){"use strict";cc._RF.push(t,"bdaa7YKN05F7q+zRQWJ7FKL","GameData");var n=e("GameConfig"),a=e("GameTools"),i={scoreCard0:[],scoreCard1:[],scoreCard2:[],scoreCard3:[],score0:0,score1:0,score2:0,score3:0,heightScore:0,bestNum:2,initData:function(){this.scoreCard0=new Array,this.scoreCard1=new Array,this.scoreCard2=new Array,this.scoreCard3=new Array;for(var e=0;e<n.CAED_LINES;e++)this.scoreCard0[e]=Array(),this.scoreCard1[e]=Array(),this.scoreCard2[e]=Array(),this.scoreCard3[e]=Array();this.score0=0,this.score1=0,this.score2=0,this.score3=0,this.heightScore=0,this.bestNum=2},getChallengeLevelNum:function(){return 7},getChallengeLevelData:function(e){return 0==e?"1000100000001000000010001":1==e?"1101110001000001000111011":2==e?"1100100001001001000010011":3==e?"0111000100000000010001110":4==e?"0001100001100011000011000":5==e?"0000000100011100010000000":6==e?"1000101010000000101010001":void 0},getGameData:function(e,t,r){return a.getItemByLocalStorage("gameData_"+n.MAIN_MENU_NUM+"_"+e+"_"+t+"_"+r,0)},setGameData:function(e,t,r,a){cc.sys.localStorage.setItem("gameData_"+n.MAIN_MENU_NUM+"_"+t+"_"+r+"_"+a,e)},getGameScoreData:function(e){return a.getItemByLocalStorage("score_"+n.MAIN_MENU_NUM+"_"+e,0)},setGameScoreData:function(e,t){cc.sys.localStorage.setItem("score_"+n.MAIN_MENU_NUM+"_"+t,e)},isHaveGameData:function(){return a.getItemByLocalStorage("isHaveGameData_"+n.MAIN_MENU_NUM,!1)},setHaveGameData:function(e){cc.sys.localStorage.setItem("isHaveGameData_"+n.MAIN_MENU_NUM,e)},getScoreNum:function(){return a.getItemByLocalStorage("ScoreNum_"+n.MAIN_MENU_NUM,0)},setScoreNum:function(e){cc.sys.localStorage.setItem("ScoreNum_"+n.MAIN_MENU_NUM,e)},getHeightScore:function(){return a.getItemByLocalStorage("BestScoreNum_"+n.MAIN_MENU_NUM,0)},setHeightScore:function(e){cc.sys.localStorage.setItem("BestScoreNum_"+n.MAIN_MENU_NUM,e)},getIsRecordHeightNum:function(e){return a.getItemByLocalStorage("isRecordHeightNum_"+n.MAIN_MENU_NUM+"_"+e,!1)},setIsRecordHeightNum:function(e,t){cc.sys.localStorage.setItem("isRecordHeightNum_"+n.MAIN_MENU_NUM+"_"+e,t)},setGameRewards:function(e){128==e&&a.autoShowSpotAds(.2),1024<=e&&!this.getIsRecordHeightNum(e)&&(a.playSimpleAudioEngine(3),this.setIsRecordHeightNum(e,!0));var t=0;switch(e){case 128:n.mainMenu!=n.MainMenu.MainMenuNumPop&&n.mainMenu!=n.MainMenu.MainMenuNumPopStar&&(t=4-n.CAED_LINES);break;case 256:t=n.mainMenu!=n.MainMenu.MainMenuNumPop&&n.mainMenu!=n.MainMenu.MainMenuNumPopStar?5-n.CAED_LINES:1;break;case 512:t=n.mainMenu!=n.MainMenu.MainMenuNumPop&&n.mainMenu!=n.MainMenu.MainMenuNumPopStar?6-n.CAED_LINES:2;break;case 1024:t=n.mainMenu!=n.MainMenu.MainMenuNumPop&&n.mainMenu!=n.MainMenu.MainMenuNumPopStar?7-n.CAED_LINES:3;break;case 2048:t=n.mainMenu!=n.MainMenu.MainMenuNumPop&&n.mainMenu!=n.MainMenu.MainMenuNumPopStar?8-n.CAED_LINES:4;break;case 4096:t=n.mainMenu!=n.MainMenu.MainMenuNumPop&&n.mainMenu!=n.MainMenu.MainMenuNumPopStar?9-n.CAED_LINES:5;break;case 8192:t=n.mainMenu!=n.MainMenu.MainMenuNumPop&&n.mainMenu!=n.MainMenu.MainMenuNumPopStar?10-n.CAED_LINES:6;break;case 16384:t=n.mainMenu!=n.MainMenu.MainMenuNumPop&&n.mainMenu!=n.MainMenu.MainMenuNumPopStar?11-n.CAED_LINES:7;break;case 65536:t=n.mainMenu!=n.MainMenu.MainMenuNumPop&&n.mainMenu!=n.MainMenu.MainMenuNumPopStar?12-n.CAED_LINES:8;break;case 131072:t=n.mainMenu!=n.MainMenu.MainMenuNumPop&&n.mainMenu!=n.MainMenu.MainMenuNumPopStar?13-n.CAED_LINES:9}return 0<t&&this.setGameIntegral(t),t},getGameIntegral:function(){return a.getGameIntegral()},setGameIntegral:function(e){a.setGameIntegral(this.getGameIntegral()+e)},isGameHelp:function(){return a.getItemByLocalStorage("isGameHelp"+n.mainMenu,!1)},setGameHelp:function(e){cc.sys.localStorage.setItem("isGameHelp"+n.mainMenu,e)},getGamePassNum:function(){return a.getItemByLocalStorage("passNum"+n.mainMenu,1)},setGamePassNum:function(e){cc.sys.localStorage.setItem("passNum"+n.mainMenu,e)},getGamePassScore:function(){var e=i.getGamePassNum();return 1e3+1500*(e-1)+(e-1)*(e-1)*500},loadGameData:function(e){if(e){for(var t=0;t<n.CAED_LINES;t++)for(var r=0;r<n.CAED_LINES;r++){if(this.scoreCard0[t][r]=this.getGameData(0,t,r),this.bestNum=this.bestNum>this.scoreCard0[t][r]?this.bestNum:this.scoreCard0[t][r],this.checkGameData(this.scoreCard0[t][r]))return!0;this.scoreCard1[t][r]=this.getGameData(1,t,r),this.scoreCard2[t][r]=this.getGameData(2,t,r),this.scoreCard3[t][r]=this.getGameData(3,t,r)}this.scoreNum=this.getScoreNum(),this.score0=this.getGameScoreData(0),this.score1=this.getGameScoreData(1),this.score2=this.getGameScoreData(2),this.score3=this.getGameScoreData(3),n.IS_GAME_WIN=2048<=this.bestNum}else{this.setHeightScore(this.heightScore);for(var a=0;a<n.CAED_LINES;a++)for(var i=0;i<n.CAED_LINES;i++)this.setGameData(this.scoreCard0[a][i],0,a,i),this.setGameData(this.scoreCard1[a][i],1,a,i),this.setGameData(this.scoreCard2[a][i],2,a,i),this.setGameData(this.scoreCard3[a][i],3,a,i);this.setScoreNum(this.scoreNum),this.setGameScoreData(this.score0,0),this.setGameScoreData(this.score1,1),this.setGameScoreData(this.score2,2),this.setGameScoreData(this.score3,3),this.setHaveGameData(!0)}return!1},checkGameData:function(e){if(0==e)return!1;for(var t=1,r=1;r<25;r++){if(e==t)return!1;t*=2}return-1!=e}};t.exports=i,cc._RF.pop()},{GameConfig:"GameConfig",GameTools:"GameTools"}],GameHelpLayer:[function(e,t,r){"use strict";cc._RF.push(t,"b336bqeJhdNDIT1WPoxbJit","GameHelpLayer");var o=e("CardSprite"),s=e("GameConfig"),n=e("GameData"),c=e("AnimLayerTool"),u=e("GameTools"),d=e("GameUiTools"),a=cc.Class({extends:cc.Node,properties:{firstX:null,firstY:null,cardArr:null,clickNum:0,gameHelpTitle:cc.Label,cardNum:0},ctor:function(){this.x=-s.DEVICE_WIDTH/2,this.y=-s.DEVICE_HEIGHT/2,this.init()},init:function(){var e=d.newSprite("back.jpg");e.setAnchorPoint(0,0),this.addChild(e);var t=new cc.Node;return this.gameHelpTitle=t.addComponent(cc.Label),t.setPosition(cc.v2(360,1100)),this.addChild(t),this.createCardSprite(),this.setCardNum(),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this.onTouchBegan,onTouchEnded:this.onTouchEnded},this),!0},onTouchBegan:function(e,t){var r=e.getLocation();return t.getCurrentTarget().firstX=r.x,!0},onTouchEnded:function(e,t){var r=t.getCurrentTarget(),a=e.getLocation(),i=r.firstX-a.x;0==r.clickNum&&i<-10?(u.playSimpleAudioEngine(1),4==r.cardNum?r.setHelpSprite1(1):s.mainMenu==s.MainMenu.MainMenuChallenge&&r.setHelpSprite2(1)):1==r.clickNum&&10<i?(u.playSimpleAudioEngine(1),4==r.cardNum?r.setHelpSprite1(2):s.mainMenu==s.MainMenu.MainMenuChallenge&&r.setHelpSprite2(2)):2!=r.clickNum&&10!=r.cardNum||(u.playSimpleAudioEngine(0),n.setGameHelp(!0),r.destroy()),s.mainMenu==s.MainMenu.MainMenuAggregation&&(u.playSimpleAudioEngine(0),0==r.clickNum&&r.cardArr[2][2].getBoundingBoxToWorld().contains(a)?r.setHelpSprite3(1):1==r.clickNum&&r.setHelpSprite3(2))},createCardSprite:function(){s.mainMenu==s.MainMenu.MainMenuNumClassic||s.mainMenu==s.MainMenu.MainMenuNumGridChoose||s.mainMenu==s.MainMenu.MainMenuCountdown?this.cardNum=4:s.mainMenu==s.MainMenu.MainMenuChallenge||s.mainMenu==s.MainMenu.MainMenuAggregation?this.cardNum=5:s.mainMenu!=s.MainMenu.MainMenuNumPop&&s.mainMenu!=s.MainMenu.MainMenuNumPopStar||(this.cardNum=10),this.cardArr=new Array;for(var e=0;e<this.cardNum;e++)this.cardArr[e]=new Array;for(var t=(s.DEVICE_WIDTH-s.DEVICE_WIDTH/10)/(this.cardNum+1),r=t/(this.cardNum+1),a=0;a<this.cardNum;a++)for(var i=0;i<this.cardNum;i++){var n=new o(0,t*a+r*(a+1)+s.DEVICE_WIDTH/20+t/2,t*i+r*(i+1)+s.DEVICE_HEIGHT/7);this.cardArr[a][i]=n,4==this.cardNum&&(this.cardArr[a][i].width=t,this.cardArr[a][i].height=t),this.addChild(n,a,i)}},setCardNum:function(){var e=void 0;4==this.cardNum?(this.gameHelpTitle.string="滑动您的手指来\n移动所有的爱心",this.setHelpSprite1(0),e="P022024220000000"):s.mainMenu==s.MainMenu.MainMenuChallenge?(this.gameHelpTitle.string="滑动使爱心移动，障\n碍物会挡住爱心移动",this.setHelpSprite2(0),e="1820100040001000000010001"):s.mainMenu==s.MainMenu.MainMenuAggregation?(this.gameHelpTitle.string="点击空白处，爱心会\n向点击的位置靠拢",this.setHelpSprite3(0),e="40@0000000020020000020800"):10==this.cardNum&&(s.mainMenu==s.MainMenu.MainMenuNumPop?this.gameHelpTitle.string="选中连接在一起的相\n同数字，点击的数字\n会聚合为更大的数字\n，其它数字则会消失":s.mainMenu==s.MainMenu.MainMenuNumPopStar&&(this.gameHelpTitle.string="点击连接在一起的\n相同数字，选中的\n数字将会被消除"),e="@28228242@22@282224244428P424@444224P22882@P8@4P82@4222P2P42248@422PP284P2824822244@2442424P48P2@P48");for(var t=0;t<this.cardNum;t++)for(var r=0;r<this.cardNum;r++)this.cardArr[t][r].setNumber(e[t*this.cardNum+r].charCodeAt()-48),0!=this.cardArr[t][r].getNumber()&&c.createScaleToCard(this.cardArr[t][r]);if(10==this.cardNum){this.cardArr[0][6].CardClickShow(1),this.cardArr[1][5].CardClickShow(1),this.cardArr[1][6].CardClickShow(1),this.cardArr[1][7].CardClickShow(1),this.cardArr[2][7].CardClickShow(1),this.cardArr[3][7].CardClickShow(1),this.cardArr[3][8].CardClickShow(1);var a=d.newSprite("help1.png");a.setPosition(cc.v2(320,576));var i=cc.blink(1,1);a.runAction(cc.repeatForever(i)),this.addChild(a,1e3,1e3),this.addClickHint()}},setHelpSprite1:function(e){if(0==e){this.addHelpSlideGesture(0);var t=d.newSprite("help2.png"),r=(s.DEVICE_WIDTH-s.DEVICE_WIDTH/10)/(this.cardNum+1),a=r/(this.cardNum+1);t.setPosition(cc.v2(r+36+3*a/2,3*r+4*a+1280/7));var i=cc.blink(1,1);t.runAction(cc.repeatForever(i)),this.addChild(t,3011,3011);var n=d.newSprite("help3.png");n.setPosition(cc.v2(2*r+3*a+36+r/2,3*r+4*a+1280/7)),n.runAction(cc.repeatForever(i.clone())),this.addChild(n,3012,3012);var o=d.newSprite("n4.png",!0);o.setPosition(cc.v2(3*r+4*a+36+r/2,3*r+4*a+1280/7)),o.runAction(cc.repeatForever(i.clone())),this.addChild(o,3013,3013)}else 1==e?(this.removeChildByTag(3010),this.removeChildByTag(3011),this.removeChildByTag(3012),this.removeChildByTag(3013),this.clickNum++,this.doRight(),this.gameHelpTitle.string="当两个数字相同的\n爱心相遇时，就会\n合并为两数之和!",this.addHelpSlideGesture(1)):2==e&&(this.removeChildByTag(3010),this.clickNum++,this.doLeft(),this.gameHelpTitle.string="你能收集的最大\n数字是多少呢？",this.addHelpSlideGesture(2),this.addClickHint())},setHelpSprite2:function(e){0==e?this.addHelpSlideGesture(0):1==e?(this.removeChildByTag(3010),this.clickNum++,this.doRight(),this.gameHelpTitle.string="爱心遇到障碍物会停止",this.addHelpSlideGesture(1)):2==e&&(this.removeChildByTag(3010),this.clickNum++,this.doLeft(),this.gameHelpTitle.string="你能收集的最大\n数字是多少呢？",this.addHelpSlideGesture(2),this.addClickHint())},setHelpSprite3:function(e){if(0==e)this.addHelpSlideGesture(2);else if(1==e)this.removeChildByTag(3010),this.clickNum++,this.addHelpSlideGesture(2),this.gameHelpTitle.string="当两个数字相同的\n爱心相遇时，就会\n合并为两数之和!",c.createMoveAnim(this.cardArr[0][2],this.cardArr[1][2],!1),this.cardArr[0][2].setNumber(0),this.cardArr[0][2].CardShow(),this.cardArr[1][2].setNumber(16),c.createMoveAnim(this.cardArr[2][1],this.cardArr[2][2],!1),this.cardArr[2][1].setNumber(0),this.cardArr[2][1].CardShow(),c.createMoveAnim(this.cardArr[2][4],this.cardArr[2][2],!1),this.cardArr[2][4].setNumber(0),this.cardArr[2][4].CardShow(),c.createMoveAnim(this.cardArr[4][2],this.cardArr[3][2],!1),this.cardArr[4][2].setNumber(0),this.cardArr[4][2].CardShow(),this.cardArr[3][2].setNumber(8),this.cardArr[2][2].setNumber(4);else if(2==e){this.removeChildByTag(3010),this.clickNum++,this.addHelpSlideGesture(2),this.gameHelpTitle.string="当爱心填满数字时\n，游戏就结束了。";this.cardArr[1][3].setNumber(2048),this.cardArr[2][1].setNumber(512),this.cardArr[3][0].setNumber(256),this.cardArr[3][3].setNumber(256),this.cardArr[3][4].setNumber(1024),this.cardArr[4][3].setNumber(512);for(var t=0;t<this.cardNum;t++)for(var r=0;r<this.cardNum;r++)this.cardArr[t][r].getNumber()<256&&this.cardArr[t][r].setNumber("482p22P@0P804p40p8002@P00"[t*this.cardNum+r]-"0"),c.createScaleToCard(this.cardArr[t][r]);this.addClickHint()}},doLeft:function(){for(var e=0;e<this.cardNum;e++)for(var t=0;t<this.cardNum;t++)for(var r=t+1;r<this.cardNum&&(1!=this.cardArr[r][e].getNumber()&&1!=this.cardArr[t][e].getNumber());r++)if(0<this.cardArr[r][e].getNumber()){this.cardArr[t][e].getNumber()<=0?(c.createMoveAnim(this.cardArr[r][e],this.cardArr[t][e],!1),this.cardArr[t][e].setNumber(this.cardArr[r][e].getNumber()),this.cardArr[r][e].setNumber(0),this.cardArr[r][e].CardShow(),t--):this.cardArr[t][e].getNumber()==this.cardArr[r][e].getNumber()&&(c.createMoveAnim(this.cardArr[r][e],this.cardArr[t][e],!0),this.cardArr[t][e].setNumber(2*this.cardArr[t][e].getNumber()),this.cardArr[r][e].setNumber(0),this.cardArr[r][e].CardShow());break}},doRight:function(){for(var e=0;e<this.cardNum;e++)for(var t=this.cardNum-1;0<=t;t--)for(var r=t-1;0<=r&&(1!=this.cardArr[r][e].getNumber()&&1!=this.cardArr[t][e].getNumber());r--)if(0<this.cardArr[r][e].getNumber()){this.cardArr[t][e].getNumber()<=0?(c.createMoveAnim(this.cardArr[r][e],this.cardArr[t][e],!1),this.cardArr[t][e].setNumber(this.cardArr[r][e].getNumber()),this.cardArr[r][e].setNumber(0),this.cardArr[r][e].CardShow(),t++):this.cardArr[t][e].getNumber()==this.cardArr[r][e].getNumber()&&(c.createMoveAnim(this.cardArr[r][e],this.cardArr[t][e],!0),this.cardArr[t][e].setNumber(2*this.cardArr[t][e].getNumber()),this.cardArr[r][e].setNumber(0),this.cardArr[r][e].CardShow());break}},addHelpSlideGesture:function(e){var t=d.newSprite("help1.png"),r=cc.fadeIn(.5),a=cc.fadeOut(.5),i=void 0;if(0==e){t.setPosition(cc.v2(180,420));var n=cc.moveBy(1,360,0),o=cc.moveBy(0,-360,0),s=cc.sequence(r,n,a,o);i=cc.repeatForever(s)}else if(1==e){t.setPosition(cc.v2(540,420));var c=cc.moveBy(1,cc.v2(-360,0)),u=cc.moveBy(0,cc.v2(360,0)),m=cc.sequence(r,c,a,u);i=cc.repeatForever(m)}else if(2==e){t.setPosition(cc.v2(440,420));var h=cc.blink(1,1);i=cc.repeatForever(h)}t.runAction(i),this.addChild(t,3010,3010)},addClickHint:function(){var e=new cc.Node;e.addComponent(cc.Label).string="点击屏幕开始游戏",e.setPosition(cc.v2(360,80)),this.addChild(e)}});t.exports=a,cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",CardSprite:"CardSprite",GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools"}],GameLogic:[function(e,t,r){"use strict";cc._RF.push(t,"a2472MggGVDwaJfIAQzzY6g","GameLogic");var i=e("CardSprite"),M=e("GameConfig"),S=e("GameData"),g=e("AnimLayerTool"),C=e("GameTools"),n=e("GameUiTools"),a=cc.Class({extends:cc.Node,properties:{firstX:null,firstY:null,score:0,cardArr:null,firstClickNum:new Array,autoMoveCardDirection:0,autoMoveNum:0,moveCenterIsTouch:!1},ctor:function(){this.x=-M.DEVICE_WIDTH/2,this.y=-M.DEVICE_HEIGHT/2,this.init()},init:function(){this.cardArr=new Array;for(var e=0;e<M.CAED_LINES;e++)this.cardArr[e]=new Array;this.firstClickNum[0]=-1,this.firstClickNum[1]=-1,this.initUI()},initUI:function(){if(cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:this.onTouchBegan,onTouchMoved:this.onTouchMoved,onTouchEnded:this.onTouchEnded},this),this.createCardSprite(),S.isHaveGameData()){this.score=S.score0;for(var e=0;e<M.CAED_LINES;e++)for(var t=0;t<M.CAED_LINES;t++)this.cardArr[e][t].number=S.scoreCard0[e][t],this.cardArr[e][t].CardShow()}else{M.mainMenu==M.MainMenu.MainMenuChallenge&&this.createBlock(),this.autoCreateCardNumber(),this.autoCreateCardNumber(),S.score0=0,S.score1=0,S.score2=0,S.score3=0,S.scoreNum=0;for(var r=this.score=0;r<M.CAED_LINES;r++)for(var a=0;a<M.CAED_LINES;a++)S.scoreCard3[r][a]=this.cardArr[r][a].number,S.scoreCard2[r][a]=S.scoreCard3[r][a],S.scoreCard1[r][a]=S.scoreCard2[r][a],S.scoreCard0[r][a]=S.scoreCard1[r][a]}},setScheduleAutoMoveCardUpdateQuads:function(e){switch(e){case 0:M.autoMoveType=M.AutoMoveType.AutoMoveAngle;break;case 1:M.autoMoveType=M.AutoMoveType.AutoMoveSway;break;case 2:M.autoMoveType=M.AutoMoveType.AutoMoveSpin;break;case 3:M.autoMoveType=M.AutoMoveType.AutoMoveRandom;break;default:M.autoMoveType=M.AutoMoveType.AutoMoveStop}M.autoMoveType==M.AutoMoveType.AutoMoveStop?M.GameScene.unschedule(M.GameScene.autoMoveCardUpdateQuads):M.GameScene.schedule(M.GameScene.autoMoveCardUpdateQuads,.1,cc.macro.REPEAT_FOREVER,0)},autoMoveCardUpdateQuads:function(e){if(M.autoMoveType==M.AutoMoveType.AutoMoveRandom){var t=Math.floor(4*cc.random0To1());this.autoMoveCardDirection=t}else M.autoMoveType==M.AutoMoveType.AutoMoveSpin&&(this.autoMoveCardDirection++,3<this.autoMoveCardDirection&&(this.autoMoveCardDirection=0));switch(this.autoMoveCardDirection){case 0:if(this.doUp())C.playSimpleAudioEngine(1),this.autoCreateCardNumber(),this.doCheck(),M.autoMoveType==M.AutoMoveType.AutoMoveAngle||M.autoMoveType==M.AutoMoveType.AutoMoveSway&&(this.autoMoveCardDirection=2),this.autoMoveNum=0;else{if(M.autoMoveType==M.AutoMoveType.AutoMoveAngle){var r=2*cc.random0To1();this.autoMoveCardDirection=0==r?1:3}if(5<this.autoMoveNum)this.autoMoveCardDirection=2;else if(M.autoMoveType==M.AutoMoveType.AutoMoveSway){var a=2*cc.random0To1();this.autoMoveCardDirection=0==a?1:3}this.autoMoveNum++,this.autoMoveCardUpdateQuads(0)}break;case 1:if(M.autoMoveType==M.AutoMoveType.AutoMoveAngle&&(this.autoMoveCardDirection=0),this.doRight())C.playSimpleAudioEngine(1),this.autoCreateCardNumber(),this.doCheck(),M.autoMoveType==M.AutoMoveType.AutoMoveSway&&(this.autoMoveCardDirection=3),this.autoMoveNum=0;else{if(this.autoMoveNum++,M.autoMoveType==M.AutoMoveType.AutoMoveSway){var i=2*cc.random0To1();this.autoMoveCardDirection=0==i?1:3}this.autoMoveCardUpdateQuads(0)}break;case 2:if(M.autoMoveType==M.AutoMoveType.AutoMoveAngle&&(this.autoMoveCardDirection=0),this.doDown())C.playSimpleAudioEngine(1),this.autoCreateCardNumber(),this.doCheck(),M.autoMoveType==M.AutoMoveType.AutoMoveSway&&(this.autoMoveCardDirection=0),this.autoMoveNum=0;else{if(M.autoMoveType==M.AutoMoveType.AutoMoveSway){var n=2*cc.random0To1();this.autoMoveCardDirection=0==n?1:3}this.autoMoveCardUpdateQuads(0)}break;case 3:if(M.autoMoveType==M.AutoMoveType.AutoMoveAngle&&(this.autoMoveCardDirection=0),this.doLeft())C.playSimpleAudioEngine(1),this.autoCreateCardNumber(),this.doCheck(),M.autoMoveType==M.AutoMoveType.AutoMoveSway&&(this.autoMoveCardDirection=1),this.autoMoveNum=0;else{if(M.autoMoveType==M.AutoMoveType.AutoMoveSway){var o=2*cc.random0To1();this.autoMoveCardDirection=0==o?0:2}this.autoMoveNum++,this.autoMoveCardUpdateQuads(0)}}},createBlock:function(){for(var e=S.getChallengeLevelData(M.GameChallengeType),t=0;t<M.CAED_LINES;t++)for(var r=0;r<M.CAED_LINES;r++)e[5*t+r]-"0"==1&&(this.cardArr[t][r].number=1,this.cardArr[t][r].CardShow())},createCardSprite:function(){for(var e=M.CARD_WIDTH/(M.CAED_LINES+1),t=0;t<M.CAED_LINES;t++)for(var r=0;r<M.CAED_LINES;r++){var a=new i(0,M.CARD_WIDTH*t+e*(t+1)+M.DEVICE_WIDTH/20+M.CARD_WIDTH/2,M.CARD_WIDTH*r+e*(r+1)+M.DEVICE_HEIGHT/7);this.cardArr[t][r]=a,this.addChild(a,t,r)}},autoCreateCardNumber:function(){for(var e=!0,t=0;t<M.CAED_LINES;t++)for(var r=0;r<M.CAED_LINES;r++)0==this.cardArr[t][r].number&&(e=!1);if(!e){var a=Math.floor(cc.random0To1()*M.CAED_LINES),i=Math.floor(cc.random0To1()*M.CAED_LINES);0<this.cardArr[a][i].number?this.autoCreateCardNumber():(this.cardArr[a][i].number=1<10*cc.random0To1()?2:4,g.createScaleToCard(this.cardArr[a][i]))}},moveCenter:function(e,t){for(var r=[0,0,0,0],a=0,i=0,n=this.getCenterFirstCard(e,t),o=0;o<4;o++)r[o]=n[o][2];for(var s=0;s<4;s++)for(var c=s+1;c<4;c++)if(r[c]<r[s]){var u=r[s];r[s]=r[c],r[c]=u}for(var m=3;0<m;m--)for(var h=0;h<4;h++)m!=h&&0!=r[m]&&r[m]==r[h]&&(a=r[m],i++);if(0==a){for(var d=0;d<4;d++)this.moveCenterCard(r[d],n,!1,e,t);this.autoCreateCardNumber(),this.moveCenterIsTouch=!1}else{this.cardArr[e][t].setNumber(C.getSelectAddNum(a*i));var l=S.setGameRewards(this.cardArr[e][t].getNumber());g.createScoreMoveAnim(this.cardArr[e][t],l,!0),this.score+=this.cardArr[e][t].getNumber();for(var M=0;M<4;M++)n[M][2]==a&&(g.createMoveAnim(this.cardArr[n[M][0]][n[M][1]],this.cardArr[e][t],!0),this.cardArr[n[M][0]][n[M][1]].setNumber(0),this.cardArr[n[M][0]][n[M][1]].CardShow());var p=cc.delayTime(.2),A=cc.callFunc(this.moveCenterCardCallFun,this,[e,t]);this.runAction(cc.sequence(p,A))}},moveCenterCard:function(e,t,r,a,i){for(var n=0;n<4;n++)if(0!=e&&e==t[n][2])switch(n){case 0:for(var o=a;0<=o;o--)for(var s=o-1;0<=s;s--)if(0<this.cardArr[s][i].getNumber()){this.cardArr[o][i].getNumber()<=0&&(g.createMoveAnim(this.cardArr[s][i],this.cardArr[o][i],!1),this.cardArr[o][i].setNumber(this.cardArr[s][i].getNumber()),this.cardArr[s][i].setNumber(0),this.cardArr[s][i].CardShow(),o++);break}break;case 1:for(var c=a;c<M.CAED_LINES;c++)for(var u=c+1;u<M.CAED_LINES;u++)if(0<this.cardArr[u][i].getNumber()){this.cardArr[c][i].getNumber()<=0&&(g.createMoveAnim(this.cardArr[u][i],this.cardArr[c][i],!1),this.cardArr[c][i].setNumber(this.cardArr[u][i].getNumber()),this.cardArr[u][i].setNumber(0),this.cardArr[u][i].CardShow(),c--);break}break;case 2:for(var m=i;0<=m;m--)for(var h=m-1;0<=h;h--)if(0<this.cardArr[a][h].getNumber()){this.cardArr[a][m].getNumber()<=0&&(g.createMoveAnim(this.cardArr[a][h],this.cardArr[a][m],!1),this.cardArr[a][m].setNumber(this.cardArr[a][h].getNumber()),this.cardArr[a][h].setNumber(0),this.cardArr[a][h].CardShow(),m++);break}break;case 3:for(var d=i;d<M.CAED_LINES;d++)for(var l=d+1;l<M.CAED_LINES;l++)if(0<this.cardArr[a][l].getNumber()){this.cardArr[a][d].getNumber()<=0&&(g.createMoveAnim(this.cardArr[a][l],this.cardArr[a][d],!1),this.cardArr[a][d].setNumber(this.cardArr[a][l].getNumber()),this.cardArr[a][l].setNumber(0),this.cardArr[a][l].CardShow(),d--);break}}},moveCenterCardCallFun:function(e,t){for(var r=t[0],a=t[1],i=this.getCenterFirstCard(r,a),n=1,o=0;o<4;o++)i[o][2]==this.cardArr[r][a].getNumber()&&n++;if(1!=n){C.playSimpleAudioEngine(0);for(var s=0;s<4;s++)i[s][2]==this.cardArr[r][a].getNumber()&&(g.createMoveAnim(this.cardArr[i[s][0]][i[s][1]],this.cardArr[r][a],!0),this.cardArr[i[s][0]][i[s][1]].setNumber(0),this.cardArr[i[s][0]][i[s][1]].CardShow());this.cardArr[r][a].setNumber(C.getSelectAddNum(this.cardArr[r][a].getNumber()*n));var c=S.setGameRewards(this.cardArr[r][a].getNumber());g.createScoreMoveAnim(this.cardArr[r][a],c,!0),this.score+=this.cardArr[r][a].getNumber();var u=cc.delayTime(.2),m=cc.callFunc(this.moveCenterCardCallFun,this,[r,a]);this.runAction(cc.sequence(u,m))}else{for(var h=0;h<4;h++)this.moveCenterCard(i[h][2],i,!1,r,a);this.autoCreateCardNumber(),this.moveCenterIsTouch=!1}},getCenterFirstCard:function(e,t){for(var r=[4],a=0;a<4;a++)r[a]=new Array,r[a][0]=0,r[a][1]=0,r[a][2]=0;for(var i=e-1;0<=i;i--)if(0!=this.cardArr[i][t].getNumber()){r[0][0]=i,r[0][1]=t,r[0][2]=this.cardArr[i][t].getNumber();break}for(var n=e+1;n<M.CAED_LINES;n++)if(0!=this.cardArr[n][t].getNumber()){r[1][2]=this.cardArr[n][t].getNumber(),r[1][0]=n,r[1][1]=t;break}for(var o=t-1;0<=o;o--)if(0!=this.cardArr[e][o].getNumber()){r[2][2]=this.cardArr[e][o].getNumber(),r[2][0]=e,r[2][1]=o;break}for(var s=t+1;s<M.CAED_LINES;s++)if(0!=this.cardArr[e][s].getNumber()){r[3][2]=this.cardArr[e][s].getNumber(),r[3][0]=e,r[3][1]=s;break}return r},onTouchBegan:function(e,t){var r=e.getLocation();if(t.getCurrentTarget().firstX=r.x,t.getCurrentTarget().firstY=r.y,M.gameMainMenu!=M.GameMainMenu.GameMainMenuSpace&&M.GameScene.showGameMainMenuButton(),M.propsMenu!=M.PropsMenu.PropsMenuSpace)return t.getCurrentTarget().gameProperty(r),!1;if(M.mainMenu==M.MainMenu.MainMenuAggregation){if(t.getCurrentTarget().moveCenterIsTouch)return!1;for(var a=0;a<M.CAED_LINES;a++)for(var i=0;i<M.CAED_LINES;i++)t.getCurrentTarget().cardArr[a][i].getBoundingBoxToWorld().contains(r)&&0==t.getCurrentTarget().cardArr[a][i].number&&(C.playSimpleAudioEngine(1),t.getCurrentTarget().moveCenterIsTouch=!0,t.getCurrentTarget().moveCenter(a,i));return t.getCurrentTarget().doCheck(),!1}return M.GameScene.move_emitter.resetSystem(),!0},onTouchMoved:function(e,t){var r=e.getLocation();M.GameScene.move_emitter.node.x=r.x,M.GameScene.move_emitter.node.y=r.y},onTouchEnded:function(e,t){M.GameScene.move_emitter.stopSystem();var r=e.getLocation(),a=t.getCurrentTarget().firstX-r.x,i=t.getCurrentTarget().firstY-r.y;Math.abs(a)<10&&Math.abs(i)<10||(Math.abs(a)>Math.abs(i)?0<a?t.getCurrentTarget().doLeft()?(C.playSimpleAudioEngine(1),t.getCurrentTarget().autoCreateCardNumber(),t.getCurrentTarget().doCheck()):g.backAnim(t.getCurrentTarget().getParent()):t.getCurrentTarget().doRight()?(C.playSimpleAudioEngine(1),t.getCurrentTarget().autoCreateCardNumber(),t.getCurrentTarget().doCheck()):g.backAnim(t.getCurrentTarget().getParent()):0<i?t.getCurrentTarget().doDown()?(C.playSimpleAudioEngine(1),t.getCurrentTarget().autoCreateCardNumber(),t.getCurrentTarget().doCheck()):g.backAnim(t.getCurrentTarget().getParent()):t.getCurrentTarget().doUp()?(C.playSimpleAudioEngine(1),t.getCurrentTarget().autoCreateCardNumber(),t.getCurrentTarget().doCheck()):g.backAnim(t.getCurrentTarget().getParent()))},gameProperty:function(e){for(var t=0;t<M.CAED_LINES;t++)for(var r=0;r<M.CAED_LINES;r++)if(this.cardArr[t][r].getBoundingBoxToWorld().contains(e)){if(C.playSimpleAudioEngine(0),M.propsMenu==M.PropsMenu.PropsMenuDestroyCard)return void(0!=this.cardArr[t][r].getNumber()&&(g.createChangeCardNumAnim(this.cardArr[t][r],0),S.setGameIntegral(-100),this.saveMemoryInformation(),M.propsMenu=M.PropsMenu.PropsMenuSpace));if(M.propsMenu==M.PropsMenu.PropsMenuExchangeCard){if(-1==this.firstClickNum[0])return this.firstClickNum[0]=t,this.firstClickNum[1]=r,void g.createExchangeCardAnim(this.cardArr[t][r],t,r);if(1==Math.abs(t-this.firstClickNum[0])&&r-this.firstClickNum[1]==0||t-this.firstClickNum[0]==0&&1==Math.abs(r-this.firstClickNum[1])){g.createRemoveExchangeCardAnim(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]],this.firstClickNum[0],this.firstClickNum[1]),g.createMoveAnim(this.cardArr[t][r],this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]],!0),g.createMoveAnim(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]],this.cardArr[t][r],!0);var a=this.cardArr[t][r].getNumber();this.cardArr[t][r].setNumber(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]].getNumber()),this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]].setNumber(a),this.firstClickNum[0]=-1,this.firstClickNum[1]=-1,S.setGameIntegral(-200),this.saveMemoryInformation()}else g.createRemoveExchangeCardAnim(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]],this.firstClickNum[0],this.firstClickNum[1]),this.firstClickNum[0]=-1,this.firstClickNum[1]=-1;return void(M.propsMenu=M.PropsMenu.PropsMenuSpace)}if(M.propsMenu==M.PropsMenu.PropsMenuShrinkNum)return void(2<this.cardArr[t][r].getNumber()&&(g.createChangeCardNumAnim(this.cardArr[t][r],this.cardArr[t][r].getNumber()/2),S.setGameIntegral(-200),this.saveMemoryInformation(),M.propsMenu=M.PropsMenu.PropsMenuSpace));if(M.propsMenu==M.PropsMenu.PropsMenuRemoveAcross||M.propsMenu==M.PropsMenu.PropsMenuRemoveVertical){for(var i=0;i<M.CAED_LINES;i++)M.propsMenu==M.PropsMenu.PropsMenuRemoveAcross?2<=this.cardArr[i][r].number&&g.createChangeCardNumAnim(this.cardArr[i][r],0):M.propsMenu==M.PropsMenu.PropsMenuRemoveVertical&&2<=this.cardArr[t][i].number&&g.createChangeCardNumAnim(this.cardArr[t][i],0);S.setGameIntegral(-300),this.saveMemoryInformation(),M.propsMenu=M.PropsMenu.PropsMenuSpace}}-1!=this.firstClickNum[0]&&(g.createRemoveExchangeCardAnim(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]],this.firstClickNum[0],this.firstClickNum[1]),this.firstClickNum[0]=-1,this.firstClickNum[1]=-1),M.propsMenu=M.PropsMenu.PropsMenuSpace},doUp:function(){for(var e=!1,t=0;t<M.CAED_LINES;t++)for(var r=M.CAED_LINES-1;0<=r;r--)for(var a=r-1;0<=a&&(1!=this.cardArr[t][a].number&&1!=this.cardArr[t][r].number);a--)if(0<this.cardArr[t][a].number){if(this.cardArr[t][r].number<=0)g.createMoveAnim(this.cardArr[t][a],this.cardArr[t][r],!1),this.cardArr[t][r].number=this.cardArr[t][a].number,this.cardArr[t][a].number=0,this.cardArr[t][a].CardShow(),r++,e=!0;else if(this.cardArr[t][r].number==this.cardArr[t][a].number){g.createMoveAnim(this.cardArr[t][a],this.cardArr[t][r],!0),this.cardArr[t][r].number=2*this.cardArr[t][r].number,this.cardArr[t][a].number=0,this.cardArr[t][a].CardShow();var i=S.setGameRewards(this.cardArr[t][r].number);g.createScoreMoveAnim(this.cardArr[t][r],i,!0),this.score+=this.cardArr[t][r].number,e=!0}break}return e},doDown:function(){for(var e=!1,t=0;t<M.CAED_LINES;t++)for(var r=0;r<M.CAED_LINES;r++)for(var a=r+1;a<M.CAED_LINES&&(1!=this.cardArr[t][a].number&&1!=this.cardArr[t][r].number);a++)if(0<this.cardArr[t][a].number){if(this.cardArr[t][r].number<=0)g.createMoveAnim(this.cardArr[t][a],this.cardArr[t][r],!1),this.cardArr[t][r].number=this.cardArr[t][a].number,this.cardArr[t][a].number=0,this.cardArr[t][a].CardShow(),r--,e=!0;else if(this.cardArr[t][r].number==this.cardArr[t][a].number){g.createMoveAnim(this.cardArr[t][a],this.cardArr[t][r],!0),this.cardArr[t][r].number=2*this.cardArr[t][r].number,this.cardArr[t][a].number=0,this.cardArr[t][a].CardShow();var i=S.setGameRewards(this.cardArr[t][r].number);g.createScoreMoveAnim(this.cardArr[t][r],i,!0),this.score+=this.cardArr[t][r].number,e=!0}break}return e},doLeft:function(){for(var e=!1,t=0;t<M.CAED_LINES;t++)for(var r=0;r<M.CAED_LINES;r++)for(var a=r+1;a<M.CAED_LINES&&(1!=this.cardArr[a][t].number&&1!=this.cardArr[r][t].number);a++)if(0<this.cardArr[a][t].number){if(this.cardArr[r][t].number<=0)g.createMoveAnim(this.cardArr[a][t],this.cardArr[r][t],!1),this.cardArr[r][t].number=this.cardArr[a][t].number,this.cardArr[a][t].number=0,this.cardArr[a][t].CardShow(),r--,e=!0;else if(this.cardArr[r][t].number==this.cardArr[a][t].number){g.createMoveAnim(this.cardArr[a][t],this.cardArr[r][t],!0),this.cardArr[r][t].number=2*this.cardArr[r][t].number,this.cardArr[a][t].number=0,this.cardArr[a][t].CardShow();var i=S.setGameRewards(this.cardArr[r][t].number);g.createScoreMoveAnim(this.cardArr[r][t],i,!0),this.score+=this.cardArr[r][t].number,e=!0}break}return e},doRight:function(){for(var e=!1,t=0;t<M.CAED_LINES;t++)for(var r=M.CAED_LINES-1;0<=r;r--)for(var a=r-1;0<=a&&(1!=this.cardArr[a][t].number&&1!=this.cardArr[r][t].number);a--)if(0<this.cardArr[a][t].number){if(this.cardArr[r][t].number<=0)g.createMoveAnim(this.cardArr[a][t],this.cardArr[r][t],!1),this.cardArr[r][t].number=this.cardArr[a][t].number,this.cardArr[a][t].number=0,this.cardArr[a][t].CardShow(),r++,e=!0;else if(this.cardArr[r][t].number==this.cardArr[a][t].number){g.createMoveAnim(this.cardArr[a][t],this.cardArr[r][t],!0),this.cardArr[r][t].number=2*this.cardArr[r][t].number,this.cardArr[a][t].number=0,this.cardArr[a][t].CardShow();var i=S.setGameRewards(this.cardArr[r][t].number);g.createScoreMoveAnim(this.cardArr[r][t],i,!0),this.score+=this.cardArr[r][t].number,e=!0}break}return e},setScore:function(e){M.GameScene.setScore(e)},doCheck:function(){var e=this.score-S.score0;0<e&&g.createAddScore(e),this.saveMemoryInformation(),this.setScore(this.score),2048<=S.bestNum&&!M.IS_GAME_WIN&&(M.IS_GAME_WIN=!0,M.autoMoveType!=M.AutoMoveType.AutoMoveStop&&M.GameScene.autoMoveMenuFunc(),n.loadingLayer("panel/GameOver"));for(var t=!0,r=0;r<M.CAED_LINES;r++)for(var a=0;a<M.CAED_LINES;a++)0==this.cardArr[a][r].number?t=!1:1!=this.cardArr[a][r].number&&M.mainMenu!=M.MainMenu.MainMenuAggregation&&(a<M.CAED_LINES-1&&this.cardArr[a][r].number==this.cardArr[a+1][r].number||0<a&&this.cardArr[a][r].number==this.cardArr[a-1][r].number||r<M.CAED_LINES-1&&this.cardArr[a][r].number==this.cardArr[a][r+1].number||0<r&&this.cardArr[a][r].number==this.cardArr[a][r-1].number)&&(t=!1);if(t)return M.mainMenu==M.MainMenu.MainMenuCountdown&&M.GameScene.unschedule(M.GameScene.countDownUpdateQuads),M.autoMoveType!=M.AutoMoveType.AutoMoveStop&&M.GameScene.autoMoveMenuFunc(),M.IS_GAME_OVER=!0,n.loadingLayer("panel/GameOver"),void S.setHaveGameData(!1)},backGame:function(){if(0<S.scoreNum){for(var e=0;e<M.CAED_LINES;e++)for(var t=0;t<M.CAED_LINES;t++)this.cardArr[e][t].setNumber(S.scoreCard1[e][t]),this.cardArr[e][t].CardShow();this.score=S.score1,this.setScore(this.score),S.scoreNum--,S.score0=S.score1,S.score1=S.score2,S.score2=S.score3;for(var r=0;r<M.CAED_LINES;r++)for(var a=0;a<M.CAED_LINES;a++)S.scoreCard0[r][a]=S.scoreCard1[r][a],S.scoreCard1[r][a]=S.scoreCard2[r][a],S.scoreCard2[r][a]=S.scoreCard3[r][a];S.setGameIntegral(-100)}else C.toastMessage(3)},saveMemoryInformation:function(){S.scoreNum<3&&S.scoreNum++,S.score3=S.score2,S.score2=S.score1,S.score1=S.score0,S.score0=this.score;for(var e=0;e<M.CAED_LINES;e++)for(var t=0;t<M.CAED_LINES;t++)S.scoreCard3[e][t]=S.scoreCard2[e][t],S.scoreCard2[e][t]=S.scoreCard1[e][t],S.scoreCard1[e][t]=S.scoreCard0[e][t],S.scoreCard0[e][t]=this.cardArr[e][t].number,S.bestNum=S.bestNum>this.cardArr[e][t].number?S.bestNum:this.cardArr[e][t].number}});t.exports=a,cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",CardSprite:"CardSprite",GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools"}],GameOver:[function(e,t,r){"use strict";cc._RF.push(t,"96faeiDHB1Gw5VBD33h1ps0","GameOver");e("CardSprite");var a=e("GameConfig"),i=e("GameData"),n=e("AnimLayerTool"),o=e("GameTools"),s=e("GameUiTools");cc.Class({extends:cc.Component,name:"GameOver",properties:{gameOverTitle:cc.Node,gameType:cc.Node,bestNumCard:cc.Node,scoreLabel:cc.Label,bestScoreLabel:cc.Label,rankButton:cc.Node,loginButton:cc.Node,shareButton:cc.Node,reviveButton:cc.Node,restartButton:cc.Node,rankingScrollView:cc.Sprite},onLoad:function(){if(a.IS_GAME_BACK_MUSIC&&o.stopBackgroundMusic(),this.scoreLabel.string=i.score0,this.bestScoreLabel.string=i.heightScore,o.submitScore(i.heightScore),cc.log("获取排行榜数据。"+a.MAIN_MENU_NUM),this.bestScoreLabel.node.getParent().active=!0,i.heightScore>i.getHeightScore()||!a.IS_GAME_OVER?(o.playSimpleAudioEngine(3),i.setHeightScore(i.heightScore)):o.playSimpleAudioEngine(2),a.IS_GAME_OVER||(n.createShowMessageBoxAward(this.node,14),this.gameOverTitle.getComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("gameWin"),this.reviveButton.active=!1),a.mainMenu==a.MainMenu.MainMenuNumClassic)this.gameType.getComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("main_menu1");else if(a.mainMenu==a.MainMenu.MainMenuChallenge)this.gameType.getComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("main_menu4");else if(a.mainMenu==a.MainMenu.MainMenuNumPop)this.gameType.getComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("main_menu7");else if(a.mainMenu==a.MainMenu.MainMenuNumPopStar)this.gameType.getComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("main_menu8");else if(a.mainMenu==a.MainMenu.MainMenuCountdown)this.gameType.getComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("main_menu6");else if(a.mainMenu==a.MainMenu.MainMenuAggregation)this.gameType.getComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("main_menu5");else{this.gameType.getComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("main_menu2"),this.gameType.x=-100;var e=new cc.Node;e.addComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("n"+a.MAIN_MENU_NUM),e.setPosition(180,374),this.node.addChild(e,1,1),n.bottonAnim(e)}a.IS_GAME_EFFECTS&&this.showAnimation(!0),this.bestNumCard.getComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("n"+i.bestNum),a.IS_GAME_OVER||(this.restartButton.getComponent(cc.Sprite).spriteFrame=o.love2048FrameCache.getSpriteFrame("continue")),s.setButtonClickEvents(this,this.rankButton,"buttonFunc"),s.setButtonClickEvents(this,this.loginButton,"buttonFunc"),s.setButtonClickEvents(this,this.shareButton,"buttonFunc"),s.setButtonClickEvents(this,this.reviveButton,"buttonFunc"),s.setButtonClickEvents(this,this.restartButton,"buttonFunc")},buttonFunc:function(e){var t=e.target;if(this.rankButton==t)o.playSimpleAudioEngine(0),o.getRankData();else if(this.loginButton==t)o.playSimpleAudioEngine(0),o.commentGame();else if(this.shareButton==t)o.playSimpleAudioEngine(4),setTimeout(function(){o.sharePicture(i.heightScore)},100);else if(this.restartButton==t)if(o.playSimpleAudioEngine(0),a.IS_GAME_OVER){for(var r=1024;r<=131072;r*=2)i.setIsRecordHeightNum(r,!1);i.bestNum=2,i.score0=0,i.setHaveGameData(!1),i.setGamePassNum(1),a.autoMoveType=a.AutoMoveType.AutoMoveStop,a.gameMainMenu=a.GameMainMenu.GameMainMenuSpace,a.IS_GAME_WIN&&a.GameChallengeType<i.getChallengeLevelNum()-1&&a.GameChallengeType++,a.IS_GAME_OVER=!1,a.IS_GAME_WIN=!1,this.restartResource()}else this.reviveLoading();else this.reviveButton==t&&(o.playSimpleAudioEngine(0),300<=i.getGameIntegral()?(a.IS_GAME_OVER=!1,a.mainMenu==a.MainMenu.MainMenuNumPop?(a.GameLogic.backGame(),i.setGameIntegral(-200)):a.mainMenu==a.MainMenu.MainMenuNumPopStar?(a.GameLogic.backGame(),i.setGameIntegral(-200)):(a.GameLogic.backGame(),a.GameLogic.backGame(),a.GameLogic.backGame()),a.autoMoveType=a.AutoMoveType.AutoMoveStop,a.gameMainMenu=a.GameMainMenu.GameMainMenuSpace,this.reviveLoading()):o.toastMessage(6));return!0},reviveLoading:function(){o.removeRankData(),this.node.destroy(),a.IS_GAME_BACK_MUSIC&&o.playBackgroundMusic()},restartResource:function(){o.removeRankData(),cc.director.loadScene("Scene/GameScene")},_updateSubDomainCanvas:function(){null!=window.sharedCanvas&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.rankingScrollView.spriteFrame=new cc.SpriteFrame(this.tex))},update:function(){this._updateSubDomainCanvas()},showAnimation:function(e){e&&(n.bottonAnim(this.gameOverTitle),n.bottonAnim(this.gameType),n.bottonAnim(this.bestNumCard),n.bottonAnim(this.scoreLabel.node.getParent()),n.bottonAnim(this.bestScoreLabel.node.getParent()),n.bottonAnim(this.rankButton),n.bottonAnim(this.loginButton),n.bottonAnim(this.shareButton),n.bottonAnim(this.reviveButton),n.bottonAnim(this.restartButton))}}),cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",CardSprite:"CardSprite",GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools"}],GamePopStar:[function(e,t,r){"use strict";cc._RF.push(t,"4f28dhcY3NKI4ZdGSMGl1Ss","GamePopStar");var a=e("CardSprite"),s=e("GameConfig"),c=e("GameData"),u=e("AnimLayerTool"),m=e("GameTools"),h=e("GameUiTools"),i=cc.Class({extends:cc.Node,properties:{firstX:null,firstY:null,endX:null,endY:null,selectNumber:0,selectAmount:0,score:0,cardArr:null,firstClickNum:new Array},ctor:function(){this.x=-s.DEVICE_WIDTH/2,this.y=-s.DEVICE_HEIGHT/2,this.init()},init:function(){this.cardArr=new Array;for(var e=0;e<s.CAED_LINES;e++)this.cardArr[e]=Array();this.firstClickNum[0]=-1,this.firstClickNum[1]=-1,this.initUI()},initUI:function(){if(cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:this.onTouchBegan},this),this.createCardSprite(),c.isHaveGameData()){this.score=c.score0;for(var e=0;e<s.CAED_LINES;e++)for(var t=0;t<s.CAED_LINES;t++)this.cardArr[e][t].number=c.scoreCard0[e][t],this.cardArr[e][t].CardShow(),1==c.scoreCard2[e][t]&&this.cardArr[e][t].setVisible(!1)}else{for(var r=0;r<s.CAED_LINES;r++)for(var a=0;a<s.CAED_LINES;a++)u.moveButtonAnim(this.cardArr[r][a],!0,u.MoveButtonAnimType.up);c.score0=0,c.score1=0,c.scoreNum=0;for(var i=this.score=0;i<s.CAED_LINES;i++)for(var n=0;n<s.CAED_LINES;n++)c.scoreCard3[i][n]=0,c.scoreCard2[i][n]=0,c.scoreCard1[i][n]=this.cardArr[i][n].number,c.scoreCard0[i][n]=this.cardArr[i][n].number}},onTouchBegan:function(e,t){var r=e.getLocation(),a=t.getCurrentTarget();if(s.gameMainMenu!=s.GameMainMenu.GameMainMenuSpace&&s.GameScene.showGameMainMenuButton(),s.propsMenu!=s.PropsMenu.PropsMenuSpace)return a.GamePopStarProperty(r),!1;if(0==a.selectAmount){for(var i=0;i<s.CAED_LINES;i++)for(var n=0;n<s.CAED_LINES;n++)a.cardArr[i][n].isVisible()&&a.cardArr[i][n].getBoundingBoxToWorld().contains(r)&&(m.playSimpleAudioEngine(1),a.cardArr[i][n].CardClickShow(1),a.inspectionSelect(i,n));a.cardVanish()}return!0},GamePopStarProperty:function(e){for(var t=0;t<s.CAED_LINES;t++)for(var r=0;r<s.CAED_LINES;r++)if(this.cardArr[t][r].isVisible()&&this.cardArr[t][r].getBoundingBoxToWorld().contains(e)){if(m.playSimpleAudioEngine(0),s.propsMenu==s.PropsMenu.PropsMenuDestroyCard)return this.cardArr[t][r].setVisible(!1),this.cardVanishAni(0),c.setGameIntegral(-100),void(s.propsMenu=s.PropsMenu.PropsMenuSpace);if(s.propsMenu==s.PropsMenu.PropsMenuExchangeCard){if(-1==this.firstClickNum[0])this.firstClickNum[0]=t,this.firstClickNum[1]=r,0<t&&this.cardArr[t-1][r].isVisible()&&this.cardArr[t-1][r].CardClickShow(1),t<s.CAED_LINES-1&&this.cardArr[t+1][r].isVisible()&&this.cardArr[t+1][r].CardClickShow(1),0<r&&this.cardArr[t][r-1].isVisible()&&this.cardArr[t][r-1].CardClickShow(1),r<s.CAED_LINES-1&&this.cardArr[t][r+1].isVisible()&&this.cardArr[t][r+1].CardClickShow(1);else{if(1==Math.abs(t-this.firstClickNum[0])&&r-this.firstClickNum[1]==0||t-this.firstClickNum[0]==0&&1==Math.abs(r-this.firstClickNum[1])){this.cancelSelect(),u.createMoveAnim(this.cardArr[t][r],this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]],!0),u.createMoveAnim(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]],this.cardArr[t][r],!0);var a=this.cardArr[t][r].getNumber();this.cardArr[t][r].setNumber(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]].getNumber()),this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]].setNumber(a),this.firstClickNum[0]=-1,this.firstClickNum[1]=-1,c.setGameIntegral(-200),this.cardVanishAni(0)}else this.firstClickNum[0]=-1,this.firstClickNum[1]=-1,this.cancelSelect();s.propsMenu=s.PropsMenu.PropsMenuSpace}return}if(s.propsMenu==s.PropsMenu.PropsMenuShrinkNum)return void(2<this.cardArr[t][r].getNumber()&&(u.createChangeCardNumAnim(this.cardArr[t][r],this.cardArr[t][r].getNumber()/2),c.setGameIntegral(-200),this.saveMemoryInformation(),s.propsMenu=s.PropsMenu.PropsMenuSpace));if(s.propsMenu==s.PropsMenu.PropsMenuRemoveAcross||s.propsMenu==s.PropsMenu.PropsMenuRemoveVertical){for(var i=0;i<s.CAED_LINES;i++)s.propsMenu==s.PropsMenu.PropsMenuRemoveAcross?(u.callFuncPopStarAnim(null,this.cardArr[i][r]),this.cardArr[i][r].setVisible(!1)):s.propsMenu==s.PropsMenu.PropsMenuRemoveVertical&&(u.callFuncPopStarAnim(null,this.cardArr[t][i]),this.cardArr[t][i].setVisible(!1));return c.setGameIntegral(-300),this.cardVanishAni(0),void(s.propsMenu=s.PropsMenu.PropsMenuSpace)}}-1!=this.firstClickNum[0]&&(this.cancelSelect(),this.firstClickNum[0]=-1,this.firstClickNum[1]=-1),s.propsMenu=s.PropsMenu.PropsMenuSpace},cardVanishAni:function(e){this.doDown(),this.doLeft(),this.doCheck(0),this.selectAmount=0},cancelSelect:function(){for(var e=0;e<s.CAED_LINES;e++)for(var t=0;t<s.CAED_LINES;t++)this.cardArr[e][t].getIsSelect()&&this.cardArr[e][t].CardClickShow(0);this.selectAmount=0},cardVanish:function(){if(2<=this.selectAmount){for(var e=void 0,t=void 0,r=0,a=0;a<s.CAED_LINES;a++)for(var i=0;i<s.CAED_LINES;i++)this.cardArr[a][i].getIsFirstSelect()&&(e=a,t=i),this.cardArr[a][i].getIsSelect()&&(this.cardArr[a][i].CardClickShow(0),u.createPopStarAnim(this.cardArr[a][i],.1*r++));this.score=this.score+this.selectAmount*this.selectAmount*5,u.createScoreMoveAnim(this.cardArr[e][t],this.selectAmount*this.selectAmount*5,!1),u.createShowMessageBoxAward(this.getParent(),this.selectAmount);var n=c.setGameRewards(this.selectNumber);u.createScoreMoveAnim(this.cardArr[e][t],n,!0),h.scheduleOnce(this,this.cardVanishAni,.1*r)}else this.cancelSelect();return!1},inspectionSelect:function(e,t){this.cardArr[e][t].CardClickShow(2),this.selectAmount++,this.selectNumber=this.cardArr[e][t].getNumber(),1<=e&&this.cardArr[e-1][t].isVisible()&&!this.cardArr[e-1][t].getIsSelect()&&this.selectNumber==this.cardArr[e-1][t].getNumber()&&this.inspectionSelect(e-1,t),t<s.CAED_LINES-1&&this.cardArr[e][t+1].isVisible()&&!this.cardArr[e][t+1].getIsSelect()&&this.selectNumber==this.cardArr[e][t+1].getNumber()&&this.inspectionSelect(e,t+1),e<s.CAED_LINES-1&&this.cardArr[e+1][t].isVisible()&&!this.cardArr[e+1][t].getIsSelect()&&this.selectNumber==this.cardArr[e+1][t].getNumber()&&this.inspectionSelect(e+1,t),1<=t&&this.cardArr[e][t-1].isVisible()&&!this.cardArr[e][t-1].getIsSelect()&&this.selectNumber==this.cardArr[e][t-1].getNumber()&&this.inspectionSelect(e,t-1)},doDown:function(){for(var e=!1,t=0;t<s.CAED_LINES;t++)for(var r=0;r<s.CAED_LINES;r++)for(var a=r+1;a<s.CAED_LINES;a++)if(this.cardArr[t][a].isVisible()){this.cardArr[t][r].isVisible()||(u.createMoveAnim(this.cardArr[t][a],this.cardArr[t][r],!1),this.cardArr[t][r].setNumber(this.cardArr[t][a].getNumber()),this.cardArr[t][r].setVisible(!0),this.cardArr[t][a].setVisible(!1),this.cardArr[t][a].CardShow(),r--,e=!0);break}return e},doLeft:function(){for(var e=!1,t=0;t<s.CAED_LINES;t++)for(var r=t+1;r<s.CAED_LINES;r++)if(this.cardArr[r][0].isVisible()){if(!this.cardArr[t][0].isVisible()){for(var a=0;a<s.CAED_LINES;a++)this.cardArr[r][a].isVisible()&&u.createMoveAnim(this.cardArr[r][a],this.cardArr[t][a],!1),this.cardArr[t][a].setNumber(this.cardArr[r][a].getNumber()),this.cardArr[t][a].setVisible(this.cardArr[r][a].isVisible()),this.cardArr[r][a].setVisible(!1),this.cardArr[r][a].CardShow();t--,e=!0}break}return e},createCardSprite:function(){for(var e=0;e<s.CAED_LINES;e++)for(var t=0;t<s.CAED_LINES;t++){var r=new a(this.randomCreateCardNumber(),s.CARD_WIDTH*e+s.DEVICE_WIDTH/20+s.CARD_WIDTH/2,s.CARD_WIDTH*t+s.DEVICE_HEIGHT/8);this.cardArr[e][t]=r,this.addChild(r,e,t)}},randomCreateCardNumber:function(){var e=11*cc.random0To1(),t=2;if(e<2){if(c.getGamePassNum()<12)for(var r=1;r<c.getGamePassNum();r++)t*=2}else if(e<4){if(t=4,c.getGamePassNum()<12)for(var a=1;a<c.getGamePassNum();a++)t*=2}else if(e<6){if(t=8,c.getGamePassNum()<12)for(var i=1;i<c.getGamePassNum();i++)t*=2}else if(e<8){if(t=16,c.getGamePassNum()<12)for(var n=1;n<c.getGamePassNum();n++)t*=2}else if(t=32,c.getGamePassNum()<12)for(var o=1;o<c.getGamePassNum();o++)t*=2;return t},autoCreateCardNumber:function(e){for(var t=0;t<s.CAED_LINES;t++)for(var r=0;r<s.CAED_LINES;r++)this.cardArr[t][r].setVisible(!0),this.cardArr[t][r].setNumber(this.randomCreateCardNumber()),this.cardArr[t][r].CardShow(),u.moveButtonAnim(this.cardArr[t][r],!0,u.MoveButtonAnimType.up);c.setGamePassNum(c.getGamePassNum()+1),s.GameScene.setPassNum(),h.scheduleOnce(this,this.doCheck,.15)},setScore:function(){s.GameScene.setScore(this.score)},doCheck:function(e){this.saveMemoryInformation();for(var t=!0,r=0;r<s.CAED_LINES;r++)for(var a=0;a<s.CAED_LINES;a++)if(this.cardArr[a][r].isVisible()){if(a<s.CAED_LINES-1&&this.cardArr[a+1][r].isVisible()&&this.cardArr[a+1][r].getNumber()==this.cardArr[a][r].getNumber()){t=!1;break}if(r<s.CAED_LINES-1&&this.cardArr[a][r+1].isVisible()&&this.cardArr[a][r+1].getNumber()==this.cardArr[a][r].getNumber()){t=!1;break}}else!1;if(t){for(var i=0,n=0;n<s.CAED_LINES;n++)for(var o=0;o<s.CAED_LINES;o++)this.cardArr[n][o].isVisible()&&(i<5?u.createPopStarAnim(this.cardArr[n][o],.5*++i):u.createPopStarAnim(this.cardArr[n][o],.5*i));m.autoShowSpotAds(1+.5*i),i<5&&(this.score=this.score+(5-i)*(5-i)*5,u.createScoreMoveAnim(this.cardArr[2][2],(5-i)*(5-i)*5,!1)),this.score<c.getGamePassScore()?h.scheduleOnce(this,this.gameOver,1+.5*i):(u.createShowMessageBoxAward(this.getParent(),-1),h.scheduleOnce(this,this.autoCreateCardNumber,1+.5*i))}},gameOver:function(e){s.IS_GAME_OVER=!0,cc.loader.loadRes("panel/GameOver",function(e,t){var r=cc.instantiate(t);s.GameScene.node.addChild(r)})},backGame:function(){if(1==c.scoreNum){for(var e=0;e<s.CAED_LINES;e++)for(var t=0;t<s.CAED_LINES;t++)this.cardArr[e][t].setNumber(c.scoreCard1[e][t]),this.cardArr[e][t].CardShow(),1==c.scoreCard3[e][t]?this.cardArr[e][t].setVisible(!1):this.cardArr[e][t].setVisible(!0);this.score=c.score1,c.scoreNum=0,c.score0=c.score1;for(var r=0;r<s.CAED_LINES;r++)for(var a=0;a<s.CAED_LINES;a++)c.scoreCard2[r][a]=c.scoreCard3[r][a],c.scoreCard0[r][a]=c.scoreCard1[r][a];this.setScore(),c.setGameIntegral(-100)}else m.toastMessage(4)},saveMemoryInformation:function(){0==c.scoreNum&&(c.scoreNum=1),c.score1=c.score0,c.score0=this.score;for(var e=0;e<s.CAED_LINES;e++)for(var t=0;t<s.CAED_LINES;t++)c.scoreCard3[e][t]=c.scoreCard2[e][t],c.scoreCard2[e][t]=this.cardArr[e][t].isVisible()?0:1,c.scoreCard1[e][t]=c.scoreCard0[e][t],c.scoreCard0[e][t]=this.cardArr[e][t].getNumber(),c.bestNum=c.bestNum>this.cardArr[e][t].getNumber()?c.bestNum:this.cardArr[e][t].getNumber()}});t.exports=i,cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",CardSprite:"CardSprite",GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools"}],GamePop:[function(e,t,r){"use strict";cc._RF.push(t,"1e91d6oKxxHa5JgQ8Sd0aUy","GamePop");var a=e("CardSprite"),h=e("GameConfig"),d=e("GameData"),l=e("AnimLayerTool"),M=e("GameTools"),i=e("GameUiTools"),n=cc.Class({extends:cc.Node,properties:{firstX:null,firstY:null,endX:null,endY:null,selectNumber:0,selectAmount:0,score:0,cardArr:null,firstClickNum:new Array},ctor:function(){this.x=-h.DEVICE_WIDTH/2,this.y=-h.DEVICE_HEIGHT/2,this.init()},init:function(){this.cardArr=new Array;for(var e=0;e<h.CAED_LINES;e++)this.cardArr[e]=Array();this.initUI()},initUI:function(){if(cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:this.onTouchBegan},this),this.createCardSprite(),d.isHaveGameData()){this.score=d.score0;for(var e=0;e<h.CAED_LINES;e++)for(var t=0;t<h.CAED_LINES;t++)this.cardArr[e][t].number=d.scoreCard0[e][t],this.cardArr[e][t].CardShow(),1==d.scoreCard2[e][t]&&this.cardArr[e][t].setVisible(!1)}else{for(var r=0;r<h.CAED_LINES;r++)for(var a=0;a<h.CAED_LINES;a++)l.moveButtonAnim(this.cardArr[r][a],!0,l.MoveButtonAnimType.up);d.score0=0,d.score1=0,d.scoreNum=0;for(var i=this.score=0;i<h.CAED_LINES;i++)for(var n=0;n<h.CAED_LINES;n++)d.scoreCard3[i][n]=0,d.scoreCard2[i][n]=0,d.scoreCard1[i][n]=this.cardArr[i][n].number,d.scoreCard0[i][n]=this.cardArr[i][n].number}},onTouchBegan:function(e,t){var r=e.getLocation(),a=t.getCurrentTarget();if(h.gameMainMenu!=h.GameMainMenu.GameMainMenuSpace&&h.GameScene.showGameMainMenuButton(),h.propsMenu!=h.PropsMenu.PropsMenuSpace)return a.GamePopStarProperty(r),!1;if(a.cardVanish(r)){a.cancelSelect();for(var i=0;i<h.CAED_LINES;i++)for(var n=0;n<h.CAED_LINES;n++)a.cardArr[i][n].isVisible()&&a.cardArr[i][n].getBoundingBoxToWorld().contains(r)&&(M.playSimpleAudioEngine(0),a.cardArr[i][n].CardClickShow(1),a.inspectionSelect(i,n));a.selectAmount<=1&&a.cancelSelect()}return!0},GamePopStarProperty:function(e){for(var t=0;t<h.CAED_LINES;t++)for(var r=0;r<h.CAED_LINES;r++)if(this.cardArr[t][r].isVisible()&&this.cardArr[t][r].getBoundingBoxToWorld().contains(e)){if(M.playSimpleAudioEngine(0),h.propsMenu==h.PropsMenu.PropsMenuDestroyCard)return this.cardArr[t][r].setVisible(!1),this.cardVanishAni(0),d.setGameIntegral(-100),void(h.propsMenu=h.PropsMenu.PropsMenuSpace);if(h.propsMenu==h.PropsMenu.PropsMenuExchangeCard){if(-1==this.firstClickNum[0])this.firstClickNum[0]=t,this.firstClickNum[1]=r,0<t&&this.cardArr[t-1][r].isVisible()&&this.cardArr[t-1][r].CardClickShow(1),t<h.CAED_LINES-1&&this.cardArr[t+1][r].isVisible()&&this.cardArr[t+1][r].CardClickShow(1),0<r&&this.cardArr[t][r-1].isVisible()&&this.cardArr[t][r-1].CardClickShow(1),r<h.CAED_LINES-1&&this.cardArr[t][r+1].isVisible()&&this.cardArr[t][r+1].CardClickShow(1);else{if(1==Math.abs(t-this.firstClickNum[0])&&r-this.firstClickNum[1]==0||t-this.firstClickNum[0]==0&&1==Math.abs(r-this.firstClickNum[1])){this.cancelSelect(),l.createMoveAnim(this.cardArr[t][r],this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]],!0),l.createMoveAnim(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]],this.cardArr[t][r],!0);var a=this.cardArr[t][r].getNumber();this.cardArr[t][r].setNumber(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]].getNumber()),this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]].setNumber(a),this.firstClickNum[0]=-1,this.firstClickNum[1]=-1,d.setGameIntegral(-200),this.cardVanishAni(0)}else this.firstClickNum[0]=-1,this.firstClickNum[1]=-1,this.cancelSelect();h.propsMenu=h.PropsMenu.PropsMenuSpace}return}if(h.propsMenu==h.PropsMenu.PropsMenuShrinkNum)return void(2<this.cardArr[t][r].getNumber()&&(l.createChangeCardNumAnim(this.cardArr[t][r],this.cardArr[t][r].getNumber()/2),d.setGameIntegral(-200),this.saveMemoryInformation(),h.propsMenu=h.PropsMenu.PropsMenuSpace));if(h.propsMenu==h.PropsMenu.PropsMenuRemoveAcross||h.propsMenu==h.PropsMenu.PropsMenuRemoveVertical){for(var i=0;i<h.CAED_LINES;i++)h.propsMenu==h.PropsMenu.PropsMenuRemoveAcross?(l.callFuncPopStarAnim(null,this.cardArr[i][r]),this.cardArr[i][r].setVisible(!1)):h.propsMenu==h.PropsMenu.PropsMenuRemoveVertical&&(l.callFuncPopStarAnim(null,this.cardArr[t][i]),this.cardArr[t][i].setVisible(!1));return d.setGameIntegral(-300),this.cardVanishAni(0),void(h.propsMenu=h.PropsMenu.PropsMenuSpace)}}-1!=this.firstClickNum[0]&&(this.cancelSelect(),this.firstClickNum[0]=-1,this.firstClickNum[1]=-1),h.propsMenu=h.PropsMenu.PropsMenuSpace},cardVanishAni:function(e){this.doDown(),this.doLeft(),this.doCheck(0)},cancelSelect:function(){for(var e=0;e<h.CAED_LINES;e++)for(var t=0;t<h.CAED_LINES;t++)this.cardArr[e][t].getIsSelect()&&this.cardArr[e][t].CardClickShow(0);this.selectAmount=0},cardVanish:function(e){var t=!1;if(2<=this.selectAmount)for(var r=0;r<h.CAED_LINES;r++)for(var a=0;a<h.CAED_LINES;a++)if(this.cardArr[r][a].getIsSelect()&&this.cardArr[r][a].getBoundingBoxToWorld().contains(e)){M.playSimpleAudioEngine(5),t=!0;break}if(t){for(var i=void 0,n=void 0,o=0;o<h.CAED_LINES;o++)for(var s=0;s<h.CAED_LINES;s++)this.cardArr[o][s].getIsFirstSelect()&&(i=o,n=s,this.cardArr[o][s].setNumber(this.getSelectAddNum(this.selectAmount*this.selectNumber)),this.cardArr[o][s].CardShow(),this.cardArr[o][s].CardClickShow(0),l.createScoreMoveAnim(this.cardArr[o][s],this.selectAmount*this.selectAmount*this.selectNumber/2,!1));for(var c=0;c<h.CAED_LINES;c++)for(var u=0;u<h.CAED_LINES;u++)this.cardArr[c][u].getIsSelect()&&(this.cardArr[c][u].setVisible(!1),l.createMoveAnim(this.cardArr[c][u],this.cardArr[i][n],!1),this.cardArr[c][u].CardClickShow(0));this.score=this.score+this.selectAmount*this.selectAmount*this.selectNumber/2,l.createShowMessageBoxAward(this.getParent(),this.selectAmount);var m=d.setGameRewards(this.selectNumber);return l.createScoreMoveAnim(this.cardArr[i][n],m,!0),this.selectAmount=0,this.cardVanishAni(0),!1}return!0},inspectionSelect:function(e,t){this.cardArr[e][t].CardClickShow(2),this.selectAmount++,this.selectNumber=this.cardArr[e][t].getNumber(),1<=e&&this.cardArr[e-1][t].isVisible()&&!this.cardArr[e-1][t].getIsSelect()&&this.selectNumber==this.cardArr[e-1][t].getNumber()&&this.inspectionSelect(e-1,t),t<h.CAED_LINES-1&&this.cardArr[e][t+1].isVisible()&&!this.cardArr[e][t+1].getIsSelect()&&this.selectNumber==this.cardArr[e][t+1].getNumber()&&this.inspectionSelect(e,t+1),e<h.CAED_LINES-1&&this.cardArr[e+1][t].isVisible()&&!this.cardArr[e+1][t].getIsSelect()&&this.selectNumber==this.cardArr[e+1][t].getNumber()&&this.inspectionSelect(e+1,t),1<=t&&this.cardArr[e][t-1].isVisible()&&!this.cardArr[e][t-1].getIsSelect()&&this.selectNumber==this.cardArr[e][t-1].getNumber()&&this.inspectionSelect(e,t-1)},getSelectAddNum:function(e){return e=e<4?2:e<8?4:e<16?8:e<32?16:e<64?32:e<128?64:e<256?128:e<512?256:e<1024?512:e<2048?1024:e<4096?2048:e<8192?4096:e<16384?8192:e<32768?16384:e<65536?32768:e<131072?65536:131072},doDown:function(){for(var e=!1,t=0;t<h.CAED_LINES;t++)for(var r=0;r<h.CAED_LINES;r++)for(var a=r+1;a<h.CAED_LINES;a++)if(this.cardArr[t][a].isVisible()){this.cardArr[t][r].isVisible()||(l.createMoveAnim(this.cardArr[t][a],this.cardArr[t][r],!1),this.cardArr[t][r].setNumber(this.cardArr[t][a].getNumber()),this.cardArr[t][r].setVisible(!0),this.cardArr[t][a].setVisible(!1),this.cardArr[t][a].CardShow(),r--,e=!0);break}return e},doLeft:function(){for(var e=!1,t=0;t<h.CAED_LINES;t++)for(var r=t+1;r<h.CAED_LINES;r++)if(this.cardArr[r][0].isVisible()){if(!this.cardArr[t][0].isVisible()){for(var a=0;a<h.CAED_LINES;a++)this.cardArr[r][a].isVisible()&&l.createMoveAnim(this.cardArr[r][a],this.cardArr[t][a],!1),this.cardArr[t][a].setNumber(this.cardArr[r][a].getNumber()),this.cardArr[t][a].setVisible(this.cardArr[r][a].isVisible()),this.cardArr[r][a].setVisible(!1),this.cardArr[r][a].CardShow();t--,e=!0}break}return e},createCardSprite:function(){for(var e=0;e<h.CAED_LINES;e++)for(var t=0;t<h.CAED_LINES;t++){var r=new a(this.randomCreateCardNumber(),h.CARD_WIDTH*e+h.DEVICE_WIDTH/20+h.CARD_WIDTH/2,h.CARD_WIDTH*t+h.DEVICE_HEIGHT/8);this.cardArr[e][t]=r,this.addChild(r,e,t)}},randomCreateCardNumber:function(){var e=11*cc.random0To1();return e<4?2:e<7?4:e<9?8:e<10?16:e<11?32:0},autoCreateCardNumber:function(e){for(var t=0;t<h.CAED_LINES;t++)for(var r=0;r<h.CAED_LINES;r++)this.cardArr[t][r].isVisible()||(this.cardArr[t][r].setVisible(!0),this.cardArr[t][r].setNumber(this.randomCreateCardNumber()),this.cardArr[t][r].CardShow(),l.moveButtonAnim(this.cardArr[t][r],!0,l.MoveButtonAnimType.up));d.setGamePassNum(d.getGamePassNum()+1),h.GameScene.setPassNum()},setScore:function(){h.GameScene.setScore(this.score)},doCheck:function(e){this.saveMemoryInformation();for(var t=!0,r=0;r<h.CAED_LINES;r++)for(var a=0;a<h.CAED_LINES;a++)if(this.cardArr[a][r].isVisible()){if(a<h.CAED_LINES-1&&this.cardArr[a+1][r].isVisible()&&this.cardArr[a+1][r].getNumber()==this.cardArr[a][r].getNumber()){t=!1;break}if(r<h.CAED_LINES-1&&this.cardArr[a][r+1].isVisible()&&this.cardArr[a][r+1].getNumber()==this.cardArr[a][r].getNumber()){t=!1;break}}else!1;t&&(this.score<d.getGamePassScore()?this.gameOver():(l.createShowMessageBoxAward(this.getParent(),-1),i.scheduleOnce(this,this.autoCreateCardNumber,2.1)))},gameOver:function(e){h.IS_GAME_OVER=!0,cc.loader.loadRes("panel/GameOver",function(e,t){var r=cc.instantiate(t);h.GameScene.node.addChild(r)})},backGame:function(){if(1==d.scoreNum){for(var e=0;e<h.CAED_LINES;e++)for(var t=0;t<h.CAED_LINES;t++)this.cardArr[e][t].setNumber(d.scoreCard1[e][t]),this.cardArr[e][t].CardShow(),1==d.scoreCard3[e][t]?this.cardArr[e][t].setVisible(!1):this.cardArr[e][t].setVisible(!0);this.score=d.score1,d.scoreNum=0,d.score0=d.score1;for(var r=0;r<h.CAED_LINES;r++)for(var a=0;a<h.CAED_LINES;a++)d.scoreCard2[r][a]=d.scoreCard3[r][a],d.scoreCard0[r][a]=d.scoreCard1[r][a];this.setScore(),d.setGameIntegral(-100)}else M.toastMessage(4)},saveMemoryInformation:function(){0==d.scoreNum&&(d.scoreNum=1),d.score1=d.score0,d.score0=this.score;for(var e=0;e<h.CAED_LINES;e++)for(var t=0;t<h.CAED_LINES;t++)d.scoreCard3[e][t]=d.scoreCard2[e][t],d.scoreCard2[e][t]=this.cardArr[e][t].isVisible()?0:1,d.scoreCard1[e][t]=d.scoreCard0[e][t],d.scoreCard0[e][t]=this.cardArr[e][t].getNumber(),d.bestNum=d.bestNum>this.cardArr[e][t].getNumber()?d.bestNum:this.cardArr[e][t].getNumber()}});t.exports=n,cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",CardSprite:"CardSprite",GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools"}],GameScene:[function(e,t,r){"use strict";cc._RF.push(t,"4a347n6DqVJw7kz+5JoDZCN","GameScene");var a=e("GameHelpLayer"),i=e("GameLogic"),n=e("GamePop"),o=e("GamePopStar"),s=e("GameData"),c=e("GameTools"),u=e("GameUiTools"),m=e("GameConfig"),h=e("AnimLayerTool");cc.Class({extends:cc.Component,properties:{layerBack:cc.Sprite,backEmitter:cc.ParticleSystem,cardNumberTTF:cc.Label,bestScoreTTF:cc.Label,gameIntegral:cc.Label,move_emitter:cc.ParticleSystem,SetMenu:cc.Node,FunctionMenu:cc.Node,AutoMoveMenu:cc.Node,secondSetMenu:[cc.Node],secondFunctionMenu:[cc.Node],secondAutoMoveMenu:[cc.Node],currentScore:0,isAddScore:!1,gameLogicLayer:cc.Node},ctor:function(){m.GameScene=this,m.IS_GAME_BACK_MUSIC&&c.playBackgroundMusic()},onLoad:function(){if("false"!=m.diyBackImageUrl)try{this.layerBack.spriteFrame=new cc.SpriteFrame(m.diyBackImageUrl)}catch(e){h.createShowMessageBox(0,10,"未找到自定义图片，已恢复至默认图片",0,this.layerBack.node),m.diyBackImageUrl="false",c.setItemByLocalStorage("diyBackImageUrl","false")}if(s.isGameHelp()||this.node.addChild(new a),m.mainMenu==m.MainMenu.MainMenuNumPop?m.GameLogic=new n:m.mainMenu==m.MainMenu.MainMenuNumPopStar?m.GameLogic=new o:m.GameLogic=new i,this.gameLogicLayer.addChild(m.GameLogic),this.currentScore=s.score0,this.cardNumberTTF.string=s.score0,this.bestScoreTTF.string=s.heightScore,this.gameIntegral.string=s.getGameIntegral(),m.mainMenu==m.MainMenu.MainMenuNumPop||m.mainMenu==m.MainMenu.MainMenuNumPopStar){this.bestScoreTTF.string=s.getGamePassScore(),this.AutoMoveMenu.getComponent(cc.Sprite).spriteFrame=c.love2048FrameCache.getSpriteFrame("passNum");var e=new cc.Node,t=e.addComponent(cc.Label);t.font=c.numberLabelAtlas,t.string=s.getGamePassNum(),e.setScale(.9),e.setPosition(50,8),this.AutoMoveMenu.addChild(e)}m.IS_GAME_EFFECTS&&this.showAnimation(!0),m.mainMenu==m.MainMenu.MainMenuAggregation?u.addCloseSprite(this.AutoMoveMenu):m.mainMenu==m.MainMenu.MainMenuCountdown&&this.schedule(this.countDownUpdateQuads,1),u.setButtonClickEvents(this,this.secondSetMenu,"setMenuTouchFunc"),u.setButtonClickEvents(this,this.secondFunctionMenu,"functionMenuTouchFunc"),u.setButtonClickEvents(this,this.secondAutoMoveMenu,"autoMoveMenuTouchFunc")},start:function(){this.schedule(this.updateShowMessageBox,10)},showGameMainMenuButton:function(){c.playSimpleAudioEngine(0),m.gameMainMenu==m.GameMainMenu.GameMainMenuSet?h.ShowGameMainMenuButton(this.SetMenu,this.secondSetMenu):m.gameMainMenu==m.GameMainMenu.GameMainMenuProps?h.ShowGameMainMenuButton(this.FunctionMenu,this.secondFunctionMenu):m.gameMainMenu==m.GameMainMenu.GameMainMenuAutoMove&&h.ShowGameMainMenuButton(this.AutoMoveMenu,this.secondAutoMoveMenu)},setMenuFunc:function(e){c.playSimpleAudioEngine(0),m.gameMainMenu==m.GameMainMenu.GameMainMenuSpace?(m.gameMainMenu=m.GameMainMenu.GameMainMenuSet,this.SetMenu.getComponent(cc.Sprite).spriteFrame=c.love2048FrameCache.getSpriteFrame("menu"),u.setSecondSetMenuSpriteFram(this.secondSetMenu[0],m.IS_GAME_BACK_MUSIC),u.setSecondSetMenuSpriteFram(this.secondSetMenu[1],m.IS_GAME_MUSIC),u.setSecondSetMenuSpriteFram(this.secondSetMenu[2],m.IS_GAME_EFFECTS),u.setSecondSetMenuSpriteFram(this.secondSetMenu[3],m.IS_GAME_ANI_EFFECTS),h.ShowGameSecondButton(this.SetMenu,this.secondSetMenu)):this.showGameMainMenuButton()},functionMenuFunc:function(e){if(c.playSimpleAudioEngine(0),m.gameMainMenu==m.GameMainMenu.GameMainMenuSpace){if(m.mainMenu==m.MainMenu.MainMenuNumClassic)for(var t=1;t<6;t++)this.secondFunctionMenu[t].removeAllChildren(),u.addCloseSprite(this.secondFunctionMenu[t]);m.gameMainMenu=m.GameMainMenu.GameMainMenuProps,this.FunctionMenu.getComponent(cc.Sprite).spriteFrame=c.love2048FrameCache.getSpriteFrame("propsMenu5"),this.gameIntegral.node.active=!1,h.ShowGameSecondButton(this.FunctionMenu,this.secondFunctionMenu)}else this.showGameMainMenuButton()},autoMoveMenuFunc:function(e){if(m.mainMenu==m.MainMenu.MainMenuNumPop||m.mainMenu==m.MainMenu.MainMenuNumPopStar)return this.showGameMainMenuButton(),!1;if(c.playSimpleAudioEngine(0),m.gameMainMenu==m.GameMainMenu.GameMainMenuSpace){if(m.mainMenu==m.MainMenu.MainMenuAggregation)return void c.toastMessage(13);m.autoMoveType!=m.AutoMoveType.AutoMoveStop?(this.AutoMoveMenu.getComponent(cc.Sprite).spriteFrame=c.love2048FrameCache.getSpriteFrame("autoMenu0"),m.GameLogic.setScheduleAutoMoveCardUpdateQuads(-1)):(m.gameMainMenu=m.GameMainMenu.GameMainMenuAutoMove,this.AutoMoveMenu.getComponent(cc.Sprite).spriteFrame=c.love2048FrameCache.getSpriteFrame("menu"),h.ShowGameSecondButton(this.AutoMoveMenu,this.secondAutoMoveMenu))}else m.gameMainMenu==m.GameMainMenu.GameMainMenuSet?h.ShowGameMainMenuButton(this.SetMenu,this.secondSetMenu):m.gameMainMenu==m.GameMainMenu.GameMainMenuProps?h.ShowGameMainMenuButton(this.FunctionMenu,this.secondFunctionMenu):m.gameMainMenu==m.GameMainMenu.GameMainMenuAutoMove&&(m.autoMoveType!=m.AutoMoveType.AutoMoveStop?(this.AutoMoveMenu.getComponent(cc.Sprite).spriteFrame=c.love2048FrameCache.getSpriteFrame("autoMenu0"),m.gameMainMenu=m.GameMainMenu.GameMainMenuSpace,m.GameLogic.setScheduleAutoMoveCardUpdateQuads(-1)):h.ShowGameMainMenuButton(this.AutoMoveMenu,this.secondAutoMoveMenu))},setMenuTouchFunc:function(e){var t=e.target;if(c.playSimpleAudioEngine(0),this.secondSetMenu[0]==t)m.IS_GAME_BACK_MUSIC=!m.IS_GAME_BACK_MUSIC,cc.sys.localStorage.setItem("IS_GAME_BACK_MUSIC",m.IS_GAME_BACK_MUSIC),m.IS_GAME_BACK_MUSIC?c.playBackgroundMusic():c.stopBackgroundMusic();else if(this.secondSetMenu[1]==t)m.IS_GAME_MUSIC=!m.IS_GAME_MUSIC,cc.sys.localStorage.setItem("IS_GAME_MUSIC",m.IS_GAME_MUSIC);else if(this.secondSetMenu[2]==t)m.IS_GAME_EFFECTS=!m.IS_GAME_EFFECTS,cc.sys.localStorage.setItem("IS_GAME_EFFECTS",m.IS_GAME_EFFECTS),m.IS_GAME_EFFECTS?this.showAnimation(!0):this.showAnimation(!1);else if(this.secondSetMenu[3]==t)m.IS_GAME_ANI_EFFECTS=!m.IS_GAME_ANI_EFFECTS,cc.sys.localStorage.setItem("IS_GAME_ANI_EFFECTS",m.IS_GAME_ANI_EFFECTS);else{if(this.secondSetMenu[4]==t){s.setHaveGameData(!1);for(var r=1024;r<=131072;r*=2)s.setIsRecordHeightNum(r,!1);return s.bestNum=2,s.score0=0,s.setGamePassNum(1),m.gameMainMenu=m.GameMainMenu.GameMainMenuSpace,void cc.director.loadScene("Scene/GameScene")}if(this.secondSetMenu[5]==t)this.node.addChild(new a);else if(this.secondSetMenu[6]==t)m.IS_GAME_SHARE=!0,c.playSimpleAudioEngine(4);else if(this.secondSetMenu[7]==t)c.commentGame();else if(this.secondSetMenu[8]==t)c.getRankData();else if(this.secondSetMenu[9]==t)return m.gameMainMenu=m.GameMainMenu.GameMainMenuSpace,void this.loadingResource()}h.ShowGameMainMenuButton(this.SetMenu,this.secondSetMenu)},functionMenuTouchFunc:function(e){c.playSimpleAudioEngine(0);var t=e.target;if(m.mainMenu==m.MainMenu.MainMenuNumClassic)for(var r=1;r<6;r++)if(this.secondFunctionMenu[r]==t)return m.propsMenu=m.PropsMenu.PropsMenuSpace,c.toastMessage(15),void h.ShowGameMainMenuButton(this.FunctionMenu,this.secondFunctionMenu);this.secondFunctionMenu[0]==t?(100<=s.getGameIntegral()?m.GameLogic.backGame():c.toastMessage(2),m.propsMenu=m.PropsMenu.PropsMenuSpace):this.secondFunctionMenu[1]==t?100<=s.getGameIntegral()?(c.toastMessage(22),m.propsMenu=m.PropsMenu.PropsMenuDestroyCard):(c.toastMessage(2),m.propsMenu=m.PropsMenu.PropsMenuSpace):this.secondFunctionMenu[2]==t?200<=s.getGameIntegral()?(c.toastMessage(23),m.propsMenu=m.PropsMenu.PropsMenuExchangeCard):(c.toastMessage(2),m.propsMenu=m.PropsMenu.PropsMenuSpace):this.secondFunctionMenu[3]==t?200<=s.getGameIntegral()?(c.toastMessage(24),m.propsMenu=m.PropsMenu.PropsMenuShrinkNum):(c.toastMessage(2),m.propsMenu=m.PropsMenu.PropsMenuSpace):this.secondFunctionMenu[4]==t?300<=s.getGameIntegral()?(c.toastMessage(25),m.propsMenu=m.PropsMenu.PropsMenuRemoveAcross):(c.toastMessage(2),m.propsMenu=m.PropsMenu.PropsMenuSpace):this.secondFunctionMenu[5]==t?300<=s.getGameIntegral()?(c.toastMessage(26),m.propsMenu=m.PropsMenu.PropsMenuRemoveVertical):(c.toastMessage(2),m.propsMenu=m.PropsMenu.PropsMenuSpace):this.secondFunctionMenu[6]==t?c.showPayView():this.secondFunctionMenu[7]==t?u.loadingLayer("panel/LotteryLayer"):this.secondFunctionMenu[8]==t?c.toastMessage(1):m.propsMenu=m.PropsMenu.PropsMenuSpace,h.ShowGameMainMenuButton(this.FunctionMenu,this.secondFunctionMenu)},autoMoveMenuTouchFunc:function(e){c.playSimpleAudioEngine(0);for(var t=e.target,r=0;r<this.secondAutoMoveMenu.length;r++)if(this.secondAutoMoveMenu[r]==t)return m.GameLogic.setScheduleAutoMoveCardUpdateQuads(r),void h.ShowGameMainMenuButton(this.AutoMoveMenu,this.secondAutoMoveMenu)},autoMoveCardUpdateQuads:function(e){m.GameLogic.autoMoveCardUpdateQuads()},countDownUpdateQuads:function(e){m.GameLogic.autoCreateCardNumber(),m.GameLogic.doCheck()},setScore:function(e){m.mainMenu==m.MainMenu.MainMenuNumPop||m.mainMenu==m.MainMenu.MainMenuNumPopStar?this.currentScore>e?(this.currentScore=e,this.cardNumberTTF.string=this.currentScore):this.isAddScore=!0:this.cardNumberTTF.string=e,e>s.heightScore&&(s.heightScore=e,m.mainMenu!=m.MainMenu.MainMenuNumPop&&m.mainMenu!=m.MainMenu.MainMenuNumPopStar&&(this.bestScoreTTF.string=s.heightScore))},update:function(e){this.isAddScore&&this.currentScore<=s.score0?(this.cardNumberTTF.string=this.currentScore++,this.currentScore++):this.isAddScore=!1},setPassNum:function(){this.AutoMoveMenu.getChildren()[4].getComponent(cc.Label).string=s.getGamePassNum(),this.bestScoreTTF.string=s.getGamePassScore()},showAnimation:function(e){var t=m.GameLogic.cardArr;if(e){this.backEmitter.resetSystem(),h.bottonAnim(this.cardNumberTTF.node.getParent()),h.bottonAnim(this.bestScoreTTF.node.getParent()),h.bottonAnim(this.SetMenu),h.bottonAnim(this.FunctionMenu),h.bottonAnim(this.AutoMoveMenu);for(var r=0;r<m.CAED_LINES;r++)h.bottonAnim(t[r])}else{this.backEmitter.stopSystem(),this.cardNumberTTF.node.getParent().stopAllActions(),this.bestScoreTTF.node.getParent().stopAllActions(),this.SetMenu.stopAllActions(),this.FunctionMenu.stopAllActions(),this.AutoMoveMenu.stopAllActions();for(var a=0;a<m.CAED_LINES;a++)for(var i=0;i<m.CAED_LINES;i++)t[a][i].stopAllActions()}},loadingResource:function(){m.IS_GAME_BACK_MUSIC&&c.stopBackgroundMusic(),m.autoMoveType!=m.AutoMoveType.AutoMoveStop&&m.GameLogic.setScheduleAutoMoveCardUpdateQuads(-1),m.loadingSceneType=m.LoadingSceneType.LoadingSceneBackGame,m.mainMenu=m.MainMenu.MainMenuSpace,cc.director.loadScene("LoadingScene")},updateShowMessageBox:function(e){var t=cc.random0To1();t<.03?h.createShowMessageBox(-30,120,"嫌音效太吵？点击音效即可关闭！",-10,this.SetMenu):t<.06?h.createShowMessageBox(-30,120,"点击排名可查看好友排名情况，来看看我排第几吧！",-10,this.SetMenu):t<.09?h.createShowMessageBox(-30,120,"吐槽按钮可向客服反馈意见！",-10,this.SetMenu):t<.12?h.createShowMessageBox(-30,120,"这么好玩的游戏，分享给好友玩呗！",-10,this.SetMenu):t<.15?h.createShowMessageBox(-30,120,"特效按钮可开关场景的特效！",-10,this.SetMenu):t<.18?h.createShowMessageBox(-30,120,"试试动画按钮，可开启小爱心跳动特效！",-10,this.SetMenu):t<.21?h.createShowMessageBox(0,120,"点击积分兑现可进入幸运大抽奖！来试试你的手气吧！",0,this.FunctionMenu):t<.24?h.createShowMessageBox(0,120,"游戏每小时送积分，可点击获取积分免费获取！",0,this.FunctionMenu):t<.27?h.createShowMessageBox(0,120,"玩不过去了？试试这些道具吧！",0,this.FunctionMenu):t<.3?h.createShowMessageBox(0,120,"小手一抖？试试退步功能，可防止错滑。",0,this.FunctionMenu):t<.33?h.createShowMessageBox(0,120,"智能自动移动，让你跟轻松的玩到2048！",0,this.AutoMoveMenu):t<.36&&h.createShowMessageBox(30,120,"点击可进行智能自动移动辅助。",10,this.AutoMoveMenu)}});cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",GameConfig:"GameConfig",GameData:"GameData",GameHelpLayer:"GameHelpLayer",GameLogic:"GameLogic",GamePop:"GamePop",GamePopStar:"GamePopStar",GameTools:"GameTools",GameUiTools:"GameUiTools"}],GameSetCardItem:[function(e,t,r){"use strict";cc._RF.push(t,"57717pJq01CyK3cyN3CKPdu","GameSetCardItem");var a=e("GameConfig"),i=(e("GameData"),e("AnimLayerTool")),n=e("GameTools"),o=e("GameUiTools");cc.Class({extends:cc.Component,name:"GameSetCardItem",properties:{numLabel:cc.Label,numSprite:cc.Sprite,cardNumLabel:cc.Label,textBox:cc.EditBox,number:null},start:function(){o.setButtonClickEvents(this,this.numSprite.node,"diyCardBackImageButtonFunc")},init:function(e){this.number=e,this.numLabel.string=e,this.textBox.string=a.numSpriteText[this.number],"false"==a.numSpriteUrl[this.number]?""==this.textBox.string?this.numSprite.spriteFrame=n.love2048FrameCache.getSpriteFrame("n"+this.number):this.numSprite.spriteFrame=n.love2048FrameCache.getSpriteFrame("nl"+this.number):this.numSprite.spriteFrame=new cc.SpriteFrame(a.numSpriteUrl[this.number]),this.cardNumLabel.string=this.textBox.string},diyCardBackImageButtonFunc:function(e){n.playSimpleAudioEngine(0),"false"!=a.numSpriteUrl[this.number]?(""==this.textBox.string?this.numSprite.spriteFrame=n.love2048FrameCache.getSpriteFrame("n"+this.number):this.numSprite.spriteFrame=n.love2048FrameCache.getSpriteFrame("nl"+this.number),i.createShowMessageBox(0,10,"已恢复至默认图片",0,this.numSprite.node),a.numSpriteUrl[this.number]="false",n.setItemByLocalStorage("numSpriteUrl"+this.number,"false")):n.toastMessage(1)},onTextChanged:function(e,t){"false"==a.numSpriteUrl[this.number]&&(""==this.textBox.string?this.numSprite.spriteFrame=n.love2048FrameCache.getSpriteFrame("n"+this.number):this.numSprite.spriteFrame=n.love2048FrameCache.getSpriteFrame("nl"+this.number)),this.cardNumLabel.string=this.textBox.string,a.numSpriteText[this.number]=this.textBox.string,n.setItemByLocalStorage("numSpriteText"+this.number,a.numSpriteText[this.number])}}),cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools"}],GameSet:[function(e,t,r){"use strict";cc._RF.push(t,"8ccfe6Z3DNNGoZBIA0L6hKu","GameSet");e("CardSprite");var a=e("GameConfig"),i=(e("GameData"),e("AnimLayerTool")),n=e("GameTools"),o=e("GameUiTools");cc.Class({extends:cc.Component,name:"GameSet",properties:{backButton:cc.Node,cardBackIsEmptyButton:cc.Node,diyCardBackImageButton:cc.Node,diyCardBackImageSprite:cc.Sprite,IsUseDefaultStyleButton:cc.Node,diyBackImageButton:cc.Node,diyBackImageSprite:cc.Sprite,scrollViewContent:cc.Node,prefabGameSetCardItem:cc.Prefab},onLoad:function(){if(a.IsUseEmptyCardBack&&(this.cardBackIsEmptyButton.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("menuRight")),"false"!=a.diyCardBackImageUrl)try{this.diyCardBackImageSprite.spriteFrame=new cc.SpriteFrame(a.diyCardBackImageUrl)}catch(e){i.createShowMessageBox(0,10,"未找到自定义图片，已恢复至默认图片",0,this.diyBackImageSprite.node),a.diyCardBackImageUrl="false",n.setItemByLocalStorage("diyCardBackImageUrl","false")}if("false"!=a.diyBackImageUrl)try{this.diyBackImageSprite.spriteFrame=new cc.SpriteFrame(a.diyBackImageUrl)}catch(e){i.createShowMessageBox(0,10,"未找到自定义图片，已恢复至默认图片",0,this.diyBackImageSprite.node),a.diyBackImageUrl="false",n.setItemByLocalStorage("diyBackImageUrl","false")}a.IsUseDefaultStyle||(this.IsUseDefaultStyleButton.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("menuClose"))},start:function(){o.setButtonClickEvents(this,this.backButton,"backButtonFunc"),o.setButtonClickEvents(this,this.cardBackIsEmptyButton,"cardBackIsEmptyButtonFunc"),o.setButtonClickEvents(this,this.diyCardBackImageButton,"diyCardBackImageButtonFunc"),o.setButtonClickEvents(this,this.diyBackImageButton,"diyBackImageButtonFunc"),o.setButtonClickEvents(this,this.IsUseDefaultStyleButton,"IsUseDefaultStyleButtonFunc");for(var e=1;e<131072;){e*=2,a.numSpriteUrl[e]=n.getItemByLocalStorage("numSpriteUrl"+e,"false"),a.numSpriteText[e]=n.getItemByLocalStorage("numSpriteText"+e,"");var t=cc.instantiate(this.prefabGameSetCardItem);t.getComponent("GameSetCardItem").init(e),this.scrollViewContent.addChild(t)}},backButtonFunc:function(e){n.playSimpleAudioEngine(0),cc.director.loadScene("MenuUI")},cardBackIsEmptyButtonFunc:function(e){n.playSimpleAudioEngine(0),a.IsUseEmptyCardBack=!a.IsUseEmptyCardBack,n.setItemByLocalStorage("IsUseEmptyCardBack",a.IsUseEmptyCardBack),a.IsUseEmptyCardBack?this.cardBackIsEmptyButton.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("menuRight"):this.cardBackIsEmptyButton.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("menuClose")},IsUseDefaultStyleButtonFunc:function(e){n.playSimpleAudioEngine(0),a.IsUseDefaultStyle=!a.IsUseDefaultStyle,n.setItemByLocalStorage("IsUseDefaultStyle",a.IsUseDefaultStyle),a.IsUseDefaultStyle?this.IsUseDefaultStyleButton.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("menuRight"):this.IsUseDefaultStyleButton.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("menuClose")},diyCardBackImageButtonFunc:function(e){n.playSimpleAudioEngine(0),"false"!=a.diyCardBackImageUrl?(this.diyCardBackImageSprite.spriteFrame=n.love2048FrameCache.getSpriteFrame("emptyl"),i.createShowMessageBox(0,10,"已恢复至默认图片",0,this.diyBackImageSprite.node),a.diyCardBackImageUrl="false",n.setItemByLocalStorage("diyCardBackImageUrl","false")):n.toastMessage(1)},diyBackImageButtonFunc:function(e){n.playSimpleAudioEngine(0),"false"!=a.diyBackImageUrl?(this.diyBackImageSprite.spriteFrame=new cc.SpriteFrame("res/raw-assets/resources/back.jpg"),i.createShowMessageBox(0,10,"已恢复至默认图片",0,this.diyBackImageSprite.node),a.diyBackImageUrl="false",n.setItemByLocalStorage("diyBackImageUrl","false")):n.toastMessage(1)}}),cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",CardSprite:"CardSprite",GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools"}],GameTools:[function(e,t,r){"use strict";cc._RF.push(t,"79fa5hqMFxHW7qOpkrIAABp","GameTools");var a=e("GameConfig"),i={love2048FrameCache:null,numberLabelAtlas:null,backMusicIsPlay:null,playSimpleAudioEngine:function(e){if(a.IS_GAME_MUSIC)switch(e){case 0:cc.audioEngine.play(cc.url.raw("resources/audios/click.mp3"),!1,.5);break;case 1:cc.audioEngine.play(cc.url.raw("resources/audios/slideMusic.wav"),!1,.5);break;case 2:cc.audioEngine.play(cc.url.raw("resources/audios/gameover.mp3"),!1,.5);break;case 3:cc.audioEngine.play(cc.url.raw("resources/audios/win.mp3"),!1,.5);break;case 4:cc.audioEngine.play(cc.url.raw("resources/audios/photo.wav"),!1,.5);break;case 5:cc.audioEngine.play(cc.url.raw("resources/audios/shuiboli.mp3"),!1,.5);break;case 6:cc.audioEngine.play(cc.url.raw("resources/audios/sound_good.mp3"),!1,.5);break;case 7:cc.audioEngine.play(cc.url.raw("resources/audios/sound_great.mp3"),!1,.5);break;case 8:cc.audioEngine.play(cc.url.raw("resources/audios/sound_amazing.mp3"),!1,.5);break;case 9:cc.audioEngine.play(cc.url.raw("resources/audios/sound_excellent.mp3"),!1,.5);break;case 10:cc.audioEngine.play(cc.url.raw("resources/audios/sound_unbelievable.mp3"),!1,.5)}},playBackgroundMusic:function(){},stopBackgroundMusic:function(){},getItemByLocalStorage:function(e,t){var r=cc.sys.localStorage.getItem(e);return null==r||""===r?(cc.sys.localStorage.setItem(e,t),t):"boolean"==typeof t?"boolean"==typeof r?r:"true"==r:"number"==typeof t?Number(r):r},setItemByLocalStorage:function(e,t){cc.sys.localStorage.setItem(e,t)},toastMessage:function(a){cc.loader.loadRes("panel/ShowMessage",function(e,t){if(!e){var r=cc.instantiate(t);r.getComponent(cc.Component).toastType=a,cc.director.getScene().getChildByName("Canvas").addChild(r)}})},setBack:function(){},showSpotAds:function(e){},autoShowSpotAds:function(e){},showAddInteardlView:function(){},showGameHelp:function(){},sharePicture:function(e){var t="来跟我一起挑战浪漫2048吧。";1==a.MAIN_MENU_NUM?t="来跟我一起挑战经典的浪漫2048吧。":3<=a.MAIN_MENU_NUM&&a.MAIN_MENU_NUM<=8?t="来跟我一起挑战浪漫2048的趣味模式吧。":2==a.MAIN_MENU_NUM?t="来跟我一起挑战浪漫2048的聚合模式吧。":9==a.MAIN_MENU_NUM?t="来跟我一起挑战浪漫2048的计时模式吧。":10==a.MAIN_MENU_NUM?t="来跟我一起挑战浪漫2048的消除叠加模式吧。":11==a.MAIN_MENU_NUM?t="来跟我一起挑战浪漫2048的消灭星星模式吧。":-100<=a.MAIN_MENU_NUM&&a.MAIN_MENU_NUM<=0&&(t="来跟我一起挑战浪漫2048的挑战模式吧。"),"shareTicket"==e?t="看看你在群里排第几？来和我挑战浪漫2048吧。":null!=e&&null!=e&&(t="我得了"+e+"分,"+t),this.toastMessage(1),cc.log("执行了截图"+t)},showPayView:function(){var e=Math.floor(((new Date).getTime()-new Date(2018,3,18,0,0,0,0).getTime())/6e4),t=e-this.getItemByLocalStorage("GameAwardDate",0);60<t?(cc.sys.localStorage.setItem("GameAwardDate",e),this.setGameIntegral(this.getGameIntegral()+10),this.toastMessage(11)):this.toastMessage("离下次获取积分还有"+(60-t)+"分钟，您还可以通过分享来获取积分哟，赶紧去分享给小伙伴吧！！！")},getGameIntegral:function(){return this.getItemByLocalStorage("GameIntegral",0)},setGameIntegral:function(e){cc.sys.localStorage.setItem("GameIntegral",e),null==a.GameScene&&null==a.GameScene||(a.GameScene.gameIntegral.string=e)},commentGame:function(){this.toastMessage(1),cc.log("执行了评论")},checkFirstLoginGame:function(){var e=Math.floor(((new Date).getTime()-new Date(2018,3,18,0,0,0,0).getTime())/864e5);e>this.getItemByLocalStorage("FirstEnterGameDate",0)&&(cc.sys.localStorage.setItem("FirstEnterGameDate",e),this.setGameIntegral(this.getGameIntegral()+100),this.toastMessage(9))},setCardBackPath:function(e){},userLogin:function(){},getRankData:function(a){cc.loader.loadRes("panel/RankingListView",function(e,t){if(!e){var r=cc.instantiate(t);null!=a&&(r.getComponent(cc.Component).shareTicket=a),cc.director.getScene().children[0].addChild(r)}})},removeRankData:function(){cc.log("移除排行榜数据。")},submitScore:function(e){cc.log("提交得分:"+a.MAIN_MENU_NUM+" : "+e)},getSelectAddNum:function(e){return e=e<4?2:e<8?4:e<16?8:e<32?16:e<64?32:e<128?64:e<256?128:e<512?256:e<1024?512:e<2048?1024:e<4096?2048:e<8192?4096:e<16384?8192:e<32768?16384:e<65536?32768:e<131072?65536:131072}};t.exports=i,cc._RF.pop()},{GameConfig:"GameConfig"}],GameUiTools:[function(e,t,r){"use strict";cc._RF.push(t,"d916clV2VZFIq39x/3UbXxU","GameUiTools");e("GameConfig");var a=e("GameTools"),i={newSprite:function(e,t){var r=new cc.Node;return t?(e=e.split(".")[0],r.addComponent(cc.Sprite).spriteFrame=a.love2048FrameCache.getSpriteFrame(e)):r.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame("res/raw-assets/resources/"+e),r},setNodeSpriteFrame:function(e,t){e.getComponent(cc.Sprite).spriteFrame=a.love2048FrameCache.getSpriteFrame(t)},setButtonClickEvents:function(e,t,r,a){var i=new Array;null==t.length?i[0]=t:i=t;for(var n=0;n<i.length;n++){var o=new cc.Component.EventHandler;o.target=e.node,o.component=e.node.name,o.handler=r,null==t.length?o.customEventData=a:o.customEventData=n,i[n].addComponent(cc.Button).clickEvents.push(o)}},setSecondSetMenuSpriteFram:function(e,t){e.getChildren()[0].getComponent(cc.Sprite).spriteFrame=a.love2048FrameCache.getSpriteFrame(t?"menuRight":"menuClose")},addCloseSprite:function(e){var t=new cc.Node;t.addComponent(cc.Sprite).spriteFrame=a.love2048FrameCache.getSpriteFrame("menuClose"),e.addChild(t)},scheduleOnce:function(e,t,r){e.runAction(cc.sequence(cc.delayTime(r),cc.callFunc(t,e)))},loadingScene:function(a,e){e?cc.loader.loadRes("panel/LoadingLayer",function(e,t){var r=cc.instantiate(t);cc.director.getScene().children[0].addChild(r),cc.director.preloadScene(a,function(){cc.director.loadScene(a)})}):cc.director.preloadScene(a,function(){cc.director.loadScene(a)})},loadingLayer:function(e){cc.loader.loadRes(e,function(e,t){if(!e){var r=cc.instantiate(t);cc.director.getScene().children[0].addChild(r)}})}};t.exports=i,cc._RF.pop()},{GameConfig:"GameConfig",GameTools:"GameTools"}],LoadingScene:[function(e,t,r){"use strict";cc._RF.push(t,"ff5d8CnmsNHIJxniV7IQxux","LoadingScene");e("GameLogic");var a=e("GameData"),i=e("GameTools"),n=(e("GameUiTools"),e("GameConfig"));e("AnimLayerTool");cc.Class({extends:cc.Component,properties:{},start:function(){var e=this;setTimeout(function(){e.loadingResource()},10)},loadingResource:function(){if(n.loadingSceneType==n.LoadingSceneType.LoadingSceneFirst){if(n.IS_GAME_BACK_MUSIC=i.getItemByLocalStorage("IS_GAME_BACK_MUSIC",!1),n.IS_GAME_MUSIC=i.getItemByLocalStorage("IS_GAME_MUSIC",!0),n.IS_GAME_EFFECTS=i.getItemByLocalStorage("IS_GAME_EFFECTS",!0),n.IS_GAME_ANI_EFFECTS=i.getItemByLocalStorage("IS_GAME_ANI_EFFECTS",!1),n.IsUseDefaultStyle=i.getItemByLocalStorage("IsUseDefaultStyle",!0),n.isUseSystemFont=i.getItemByLocalStorage("isUseSystemFont",!1),n.IsUseEmptyCardBack=i.getItemByLocalStorage("IsUseEmptyCardBack",!1),n.diyCardBackImageUrl=i.getItemByLocalStorage("diyCardBackImageUrl","false"),n.diyBackImageUrl=i.getItemByLocalStorage("diyBackImageUrl","false"),!n.IsUseDefaultStyle)for(var e=1;e<131072;)e*=2,n.numSpriteUrl[e]=i.getItemByLocalStorage("numSpriteUrl"+e,"false"),n.numSpriteText[e]=i.getItemByLocalStorage("numSpriteText"+e,"");if(n.IS_GAME_MUSIC&&cc.audioEngine.play(cc.url.raw("resources/audios/welcome.wav"),!1,.5),this.initFrameCache(),this.initWxSetting(),i.checkFirstLoginGame(),-1e3==n.MAIN_MENU_NUM&&(n.MAIN_MENU_NUM=i.getItemByLocalStorage("MAIN_MENU_NUM",-1e3)),-1e3!=n.MAIN_MENU_NUM)return this.loadingGame(),void this.loadingResource()}else n.loadingSceneType==n.LoadingSceneType.LoadingSceneEnterGame?(a.initData(),a.heightScore=a.getHeightScore(),a.isHaveGameData()&&(a.loadGameData(!0)||a.heightScore<0||1073741824<a.heightScore)&&(a.setHaveGameData(!1),a.heightScore=0,a.setHeightScore(0))):n.loadingSceneType==n.LoadingSceneType.LoadingSceneBackGame&&a.loadGameData(!1);n.loadingSceneType==n.LoadingSceneType.LoadingSceneFirst?cc.director.preloadScene("MenuUI",function(){cc.director.loadScene("MenuUI")}):n.loadingSceneType==n.LoadingSceneType.LoadingSceneEnterGame?cc.director.preloadScene("GameScene",function(){cc.director.loadScene("GameScene")}):n.loadingSceneType==n.LoadingSceneType.LoadingSceneBackGame&&cc.director.preloadScene("MenuUI",function(){cc.director.loadScene("MenuUI")}),i.showSpotAds(1)},initFrameCache:function(){cc.loader.loadRes("love2048",cc.SpriteAtlas,function(e,t){i.love2048FrameCache=t}),cc.loader.loadRes("number",cc.LabelAtlas,function(e,t){i.numberLabelAtlas=t})},initWxSetting:function(){},loadingGame:function(){cc.sys.localStorage.setItem("MAIN_MENU_NUM",-1e3),1==n.MAIN_MENU_NUM?(n.CAED_LINES=4,n.mainMenu=n.MainMenu.MainMenuNumClassic):3<=n.MAIN_MENU_NUM&&n.MAIN_MENU_NUM<=8?(n.CAED_LINES=n.MAIN_MENU_NUM,n.mainMenu=n.MainMenu.MainMenuNumGridChoose):2==n.MAIN_MENU_NUM?(n.CAED_LINES=5,n.mainMenu=n.MainMenu.MainMenuAggregation):9==n.MAIN_MENU_NUM?(n.CAED_LINES=4,n.mainMenu=n.MainMenu.MainMenuCountdown):10==n.MAIN_MENU_NUM?(n.CAED_LINES=10,n.mainMenu=n.MainMenu.MainMenuNumPop):11==n.MAIN_MENU_NUM?(n.CAED_LINES=10,n.mainMenu=n.MainMenu.MainMenuNumPopStar):(n.CAED_LINES=5,n.GameChallengeType=-n.MAIN_MENU_NUM,n.mainMenu=n.MainMenu.MainMenuChallenge),n.CARD_WIDTH=(n.DEVICE_WIDTH-n.DEVICE_WIDTH/10)/(n.CAED_LINES+1),n.loadingSceneType=n.LoadingSceneType.LoadingSceneEnterGame}}),cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",GameConfig:"GameConfig",GameData:"GameData",GameLogic:"GameLogic",GameTools:"GameTools",GameUiTools:"GameUiTools"}],LotteryLayer:[function(e,t,r){"use strict";cc._RF.push(t,"77a5bcUrudMY5XHqVdpIKFv","LotteryLayer");var n=e("GameData"),o=(e("GameConfig"),e("GameTools")),a=e("GameUiTools");cc.Class({extends:cc.Component,properties:{lotteryDial:cc.Node,lotteryButton:cc.Node,backButton:cc.Node,isRotate:!1},start:function(){a.setButtonClickEvents(this,this.backButton,"backButtonFunc"),a.setButtonClickEvents(this,this.lotteryButton,"lotteryButtonFunc")},lotteryButtonFunc:function(e){if(!this.isRotate)if(n.getGameIntegral()<300)o.toastMessage(2);else{o.playSimpleAudioEngine(0),n.setGameIntegral(-300),this.lotteryDial.rotation=0;var t=cc.random0To1(),r=4;t<.2?r=1:t<.4?r=4:t<.6?r=3:t<1&&(r=4);var a=cc.rotateBy(5,3600+60*r);a.easing(cc.easeExponentialOut());var i=cc.callFunc(this.lotteryButtonFuncCall,this,r);this.lotteryDial.runAction(cc.sequence(a,i)),this.isRotate=!0}},lotteryButtonFuncCall:function(e,t){this.isRotate=!1,1==t?(n.setGameIntegral(100),o.toastMessage("恭喜获得奖励100积分")):3==t?(n.setGameIntegral(300),o.toastMessage("恭喜获得奖励300积分")):4==t&&o.toastMessage("很遗憾，您未中奖。"),cc.log(t)},backButtonFunc:function(e){o.playSimpleAudioEngine(0),this.node.destroy()}}),cc._RF.pop()},{GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools"}],MenuUI:[function(e,t,r){"use strict";cc._RF.push(t,"7a1b4zIcR5JB7RiSrGO+M+O","MenuUI");var a=e("GameTools"),i=e("GameUiTools"),n=e("GameConfig"),o=e("AnimLayerTool");cc.Class({extends:cc.Component,properties:{layerBack:cc.Node,MainMenuButton:[cc.Node],GridButton:[cc.Node],MoreGameButton:[cc.Node],diyButton:cc.Node,loginButton:cc.Node,anbotButton:cc.Node},onLoad:function(){i.setButtonClickEvents(this,this.layerBack,"showGridMainMenuButton"),i.setButtonClickEvents(this,this.GridButton,"gridChooseGame"),i.setButtonClickEvents(this,this.MoreGameButton,"moreGame"),i.setButtonClickEvents(this,this.diyButton,"diyButtonFunc"),i.setButtonClickEvents(this,this.anbotButton,"anbotButtonFunc"),i.setButtonClickEvents(this,this.loginButton,"loginButtonFunc")},start:function(){o.bottonAnim(this.MainMenuButton),o.bottonAnim(this.diyButton),o.bottonAnim(this.loginButton),o.bottonAnim(this.anbotButton),this.schedule(this.updateShowMessageBox,3)},showGridMainMenuButton:function(){a.playSimpleAudioEngine(0),this.MainMenuButton[1].active?o.ShowGridMainMenuButton(this.MainMenuButton,this.GridButton):this.MainMenuButton[2].active&&o.ShowMoreGameMainMenuButton(this.MainMenuButton,this.MoreGameButton)},playGame:function(){a.playSimpleAudioEngine(0),n.CAED_LINES=4,n.MAIN_MENU_NUM=1,n.mainMenu=n.MainMenu.MainMenuNumClassic,this.loadingResource()},gridButton:function(e,t){a.playSimpleAudioEngine(0),this.MainMenuButton[0].active?o.ShowGridButton(this.MainMenuButton,this.GridButton):o.ShowGridMainMenuButton(this.MainMenuButton,this.GridButton)},moreGameButton:function(e,t){a.playSimpleAudioEngine(0),this.MainMenuButton[0].active?o.ShowMoreGameButton(this.MainMenuButton,this.MoreGameButton):o.ShowMoreGameMainMenuButton(this.MainMenuButton,this.MoreGameButton)},gridChooseGame:function(e,t){n.CAED_LINES=t+3,n.MAIN_MENU_NUM=n.CAED_LINES,n.mainMenu=n.MainMenu.MainMenuNumGridChoose,this.loadingResource()},moreGame:function(e,t){a.playSimpleAudioEngine(0),0==t?i.loadingLayer("panel/ChallengeView"):1==t?(n.CAED_LINES=5,n.MAIN_MENU_NUM=2,n.mainMenu=n.MainMenu.MainMenuAggregation,this.loadingResource()):2==t?(n.CAED_LINES=4,n.MAIN_MENU_NUM=9,n.mainMenu=n.MainMenu.MainMenuCountdown,this.loadingResource()):3==t?(n.CAED_LINES=10,n.MAIN_MENU_NUM=10,n.mainMenu=n.MainMenu.MainMenuNumPop,this.loadingResource()):4==t&&(n.CAED_LINES=10,n.MAIN_MENU_NUM=11,n.mainMenu=n.MainMenu.MainMenuNumPopStar,this.loadingResource()),o.ShowMoreGameMainMenuButton(this.MainMenuButton,this.MoreGameButton)},anbotButtonFunc:function(e){a.playSimpleAudioEngine(0),cc.director.loadScene("AboutGame")},loginButtonFunc:function(e){a.playSimpleAudioEngine(0),a.getRankData()},diyButtonFunc:function(){a.playSimpleAudioEngine(0),i.loadingScene("GameSet",!0)},challengeGame:function(e){n.CAED_LINES=5,n.GameChallengeType=e,n.MAIN_MENU_NUM=-e,n.mainMenu=n.MainMenu.MainMenuChallenge,this.loadingResource()},loadingResource:function(){n.mainMenu==n.MainMenu.MainMenuNumPop||n.mainMenu==n.MainMenu.MainMenuNumPopStar?n.CARD_WIDTH=(n.DEVICE_WIDTH-n.DEVICE_WIDTH/10)/n.CAED_LINES:n.CARD_WIDTH=(n.DEVICE_WIDTH-n.DEVICE_WIDTH/10)/(n.CAED_LINES+1),n.loadingSceneType=n.LoadingSceneType.LoadingSceneEnterGame,cc.director.loadScene("LoadingScene")},updateShowMessageBox:function(e){var t=cc.random0To1();t<.2?o.createShowMessageBox(30,160,"messageBox4",10,this.diyButton):t<.4?o.createShowMessageBox(-20,160,"messageBox3",-10,this.anbotButton):t<.6&&o.createShowMessageBox(0,-400,"来查看一下好友排行榜！！",0,this.node)},onDestroy:function(){0}}),cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",GameConfig:"GameConfig",GameTools:"GameTools",GameUiTools:"GameUiTools"}],RankingListView:[function(e,t,r){"use strict";cc._RF.push(t,"5e3a8dywRdAhaGwj6tJY+hL","RankingListView");var a=e("GameConfig"),i=(e("GameData"),e("AnimLayerTool")),n=e("GameTools"),o=e("GameUiTools");cc.Class({extends:cc.Component,name:"RankingListView",properties:{gameType:cc.Node,backButton:cc.Node,shareButton:cc.Node,rankingScrollView:cc.Sprite,shareTicket:null},onLoad:function(){if(a.mainMenu==a.MainMenu.MainMenuNumClassic)this.gameType.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("main_menu1");else if(a.mainMenu==a.MainMenu.MainMenuChallenge)this.gameType.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("main_menu4");else if(a.mainMenu==a.MainMenu.MainMenuNumPop)this.gameType.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("main_menu7");else if(a.mainMenu==a.MainMenu.MainMenuNumPopStar)this.gameType.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("main_menu8");else if(a.mainMenu==a.MainMenu.MainMenuCountdown)this.gameType.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("main_menu6");else if(a.mainMenu==a.MainMenu.MainMenuAggregation)this.gameType.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("main_menu5");else if(a.mainMenu==a.MainMenu.MainMenuNumGridChoose){this.gameType.getComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("main_menu2"),this.gameType.x=-100;var e=new cc.Node;e.addComponent(cc.Sprite).spriteFrame=n.love2048FrameCache.getSpriteFrame("n"+a.MAIN_MENU_NUM),e.setPosition(180,503),this.node.addChild(e),i.bottonAnim(e)}this.showAnimation(!0)},start:function(){if(o.setButtonClickEvents(this,this.backButton,"backButtonFunc"),o.setButtonClickEvents(this,this.shareButton,"shareButtonFunc"),i.createShowMessageBox(120,-350,"分享到群里可查看群排行榜！",0,this.node),null!=this.shareTicket){var e=new cc.Node;e.addComponent(cc.Label).string="群排行",e.setPosition(-260,503),this.node.addChild(e)}var t=new cc.Node;t.addComponent(cc.Label).string="暂无排行榜数据",this.node.addChild(t),cc.log("获取排行榜数据。"+(a.mainMenu==a.MainMenu.MainMenuSpace?1:a.MAIN_MENU_NUM))},shareButtonFunc:function(e){n.playSimpleAudioEngine(4),setTimeout(function(){n.sharePicture("shareTicket")},100)},backButtonFunc:function(e){n.playSimpleAudioEngine(0),n.removeRankData(),a.IS_GAME_WIN||a.IS_GAME_OVER,this.node.destroy()},_updateSubDomainCanvas:function(){null!=window.sharedCanvas&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.rankingScrollView.spriteFrame=new cc.SpriteFrame(this.tex))},update:function(){this._updateSubDomainCanvas()},showAnimation:function(e){e&&(i.bottonAnim(this.gameType),i.bottonAnim(this.backButton),i.bottonAnim(this.shareButton))}}),cc._RF.pop()},{AnimLayerTool:"AnimLayerTool",GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools"}],ShowMessage:[function(e,t,r){"use strict";cc._RF.push(t,"dd00bIGlKFEcofm6XjrFEGw","ShowMessage");e("GameConfig");var a=e("GameTools");e("GameUiTools");cc.Class({extends:cc.Component,properties:{messageLabel:cc.Label,backButton:cc.Node,toastType:0},start:function(){var e=null;e=0==this.toastType?"欢迎进入浪漫2048":1==this.toastType?"该功能苦逼的程序员还在努力开发中，欢迎留言反馈！":2==this.toastType?"积分不足！！！您可以玩游戏来获取积分，还可以每天登录赚取积分！":3==this.toastType?"最多只能后退3步！！！":4==this.toastType?"只能后退1步！！！":5==this.toastType?"该模式暂无帮助，谢谢！！！":6==this.toastType?"积分不足！！！您需要300积分来复活。":7==this.toastType?"恭喜充值成功，感谢您对浪漫2048的支持！！！":8==this.toastType?"充值失败，谢谢支持！！！":9==this.toastType?"今天首次进入奖励100积分，每天首次进入游戏都会获取积分哟！！！":10==this.toastType?"没有找到应用市场":11==this.toastType?"恭喜获得奖励10积分，感谢您对浪漫2048的支持":12==this.toastType?"您今天已经领过奖励了，谢谢":13==this.toastType?"聚合模式暂无自动功能，谢谢":14==this.toastType?"恭喜获得奖励100积分，感谢您对浪漫2048的支持":15==this.toastType?"经典模式不能使用道具功能，您可以去试试其它玩法哟！":16==this.toastType?"上传得分失败，请检查网络":17==this.toastType?"排行榜数据失败，请检查网络":18==this.toastType?"上传得分成功，赶紧去看看排行榜吧":19==this.toastType?"视频奖励":20==this.toastType?"保存图片成功":21==this.toastType?"保存图片失败":22==this.toastType?"点击需要消除的爱心即可消除该爱心！":23==this.toastType?"点击需要换位的爱心将会选中该爱心，继续点击该爱心周边的爱心即可实现爱心的换位！":24==this.toastType?"点击需要缩小数字的爱心即可将该爱心的数字缩小2倍":25==this.toastType?"点击需要消除的爱心即可消除与该爱心同横排的爱心！":26==this.toastType?"点击需要消除的爱心即可消除与该爱心同竖排的爱心！":27==this.toastType?"视频播放失败，谢谢！！":28==this.toastType?"滑动屏幕来移动小方块，两个数字一样的小方块相撞时就会相加合成一个方块，每次操作之后会在空白的方格处随机生成一个2或4的方块，最终得到一个2048的方块就算胜利了，如果16个格子全部填满无法移动的话则游戏结束。":29==this.toastType?"点击空白爱心，爱心会向点击的位置靠拢，当两个数字相同的爱心相遇时就会合并为两数字之和，全部填满无法移动的话则游戏结束。":30==this.toastType?"选中连接在一起的相同数字，点击的数字会聚合为更大的数字，其它数字则消除，完成通关所需得分即可进入下一关，否则游戏结束。":31==this.toastType?"选中连接在一起的相同数字，选中的数字将会被消除，完成通关所需得分即可进入下一关，否则游戏结束。":this.toastType,this.messageLabel.string=e},backButtonFunc:function(e){a.playSimpleAudioEngine(0),this.node.destroy()}}),cc._RF.pop()},{GameConfig:"GameConfig",GameTools:"GameTools",GameUiTools:"GameUiTools"}]},{},["AboutGame","AnimLayerTool","CardSprite","GameConfig","GameData","GameHelpLayer","GameLogic","GamePop","GamePopStar","GameScene","GameSet","GameTools","GameUiTools","LoadingScene","MenuUI","AnimInAndOut","ChallengeView","GameOver","GameSetCardItem","LotteryLayer","RankingListView","ShowMessage"]);