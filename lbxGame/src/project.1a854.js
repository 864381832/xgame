require=function o(r,a,s){function p(e,c){if(!a[e]){if(!r[e]){var t="function"==typeof require&&require;if(!c&&t)return t(e,!0);if(u)return u(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};r[e][0].call(i.exports,function(c){return p(r[e][1][c]||c)},i,i.exports,o,r,a,s)}return a[e].exports}for(var u="function"==typeof require&&require,c=0;c<s.length;c++)p(s[c]);return p}({App:[function(c,e,t){"use strict";cc._RF.push(e,"bc9772ZVeVM2omwSvP+kAar","App");var n=["Util"];for(var i in n){c(n[i])}e.exports={startGame:function(){}},cc._RF.pop()},{}],BackBtnCp:[function(c,e,t){"use strict";cc._RF.push(e,"3c5e9FYHD9LxZWZ39udQFni","BackBtnCp"),cc.Class({extends:cc.Component,properties:{},onClick:function(){cc.director.loadScene("gameScene")},onLoad:function(){}}),cc._RF.pop()},{}],BgRandomMove:[function(c,e,t){"use strict";var n;function i(c,e,t){return e in c?Object.defineProperty(c,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[e]=t,c}cc._RF.push(e,"2efffJ1hlRMy6NEHp7IMcJi","BgRandomMove"),cc.Class({extends:cc.Component,properties:(n={},i(n,"X轴移动距离",1),i(n,"y轴移动距离",1),i(n,"移动速度(单位：像素/秒)",20),i(n,"随机量",10),n),randomMove:function(){var c=cc.pLength(cc.p(this["X轴移动距离"],this["y轴移动距离"]))/this["移动速度(单位：像素/秒)"],e=cc.pMult(cc.pNormalize(cc.p(cc.randomMinus1To1(),cc.randomMinus1To1())),this["随机量"]),t=cc.pAdd(cc.p(this["X轴移动距离"],this["y轴移动距离"]),e),n=cc.repeatForever(cc.sequence(cc.moveBy(c,t),cc.moveBy(c,cc.pMult(t,-1))));this.node.runAction(n)},onLoad:function(){this.randomMove()}}),cc._RF.pop()},{}],ButtonControl:[function(c,e,t){"use strict";var n,i,o;cc._RF.push(e,"c2d5bVI67ZPAq8U5jXlmGwC","ButtonControl"),cc.Class({extends:cc.Component,properties:(n={},i="音效",o={default:null,url:cc.AudioClip},i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n),onClick:function(){cc.audioEngine.playEffect(this["音效"])},onLoad:function(){}}),cc._RF.pop()},{}],GameData:[function(c,e,t){"use strict";var n,i,o;cc._RF.push(e,"f90693GTmlGS7T5fknnDNTy","GameData"),cc.Class({extends:cc.Component,properties:(n={},i="分数",o=0,i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n),onLoad:function(){}}),cc._RF.pop()},{}],InitLBXFrame:[function(c,e,t){"use strict";var n;function i(c,e,t){return e in c?Object.defineProperty(c,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[e]=t,c}cc._RF.push(e,"73810un/L9B+7ptubQfLvHy","InitLBXFrame");var d=[[0,1,2,3,4],[5,6,7,8,9,10],[11,12,13,14,15,16,17],[18,19,20,21,22,23,24,25],[26,27,28,29,30,31,32,33,34],[35,36,37,38,39,40,41,42],[43,44,45,46,47,48,49],[50,51,52,53,54,55],[56,57,58,59,60],[26,35,43,50,56],[18,27,36,44,51,57],[11,19,28,37,45,52,58],[5,12,20,29,38,46,53,59],[0,6,13,21,30,39,47,54,60],[1,7,14,22,31,40,48,55],[2,8,15,23,32,41,49],[3,9,16,24,33,42],[4,10,17,25,34],[0,5,11,18,26],[1,6,12,19,27,35],[2,7,13,20,28,36,43],[3,8,14,21,29,37,44,50],[4,9,15,22,30,38,45,51,56],[10,16,23,31,39,46,52,57],[17,24,32,40,47,53,58],[25,33,41,48,54,59],[34,42,49,55,60]],f=c("Util"),o=0;cc.Class({extends:cc.Component,properties:(n={},i(n,"bianchanggezishu",5),i(n,"liubianxingH",0),i(n,"liubianxingA",0),i(n,"framePic",{default:null,type:cc.SpriteFrame}),i(n,"bian",{default:null,type:cc.SpriteFrame}),i(n,"xiaochuSound",{default:null,url:cc.AudioClip}),i(n,"shuPrefab",{default:null,type:cc.Prefab}),i(n,"boomEffPrefab",{default:null,type:cc.Prefab}),i(n,"tipPrefab",{default:null,type:cc.Prefab}),n),checkXC:function(c){f.testCode1("消除逻辑"),this.addScore(this.curFKLen,!0);var e=cc.instantiate(this.tipPrefab);e.color=cc.color(211,70,50,255),e.getComponent(cc.Label).string="+"+this.getAddScoreCal(this.curFKLen,!0),this.node.addChild(e);for(var t=[],n=0;n<this.frameList.length;n++)this.frameList[n].isHaveFK&&t.push(this.frameList[n].FKIndex);t.sort(function(c,e){return c-e});var i=[];for(n=0;n<d.length;n++){var o=d[n],r=this.get2AryIntersect(t,o);if(0<r.length)this.check2AryIsEqual(o,r)&&(cc.log("消！！"),i.push(o),cc.audioEngine.playEffect(this.xiaochuSound))}var a=[],s=0;for(n=0;n<i.length;n++)for(var p=i[n],u=0;u<p.length;u++){var h=p[u];a.push(cc.callFunc(function(){var c=arguments[1][0],e=arguments[1][1],t=cc.instantiate(this.boomEffPrefab);this.frameList[c].addChild(t);var n=cc.instantiate(this.tipPrefab);n.getComponent(cc.Label).string="+"+this.getAddScoreCal(e),this.frameList[c].addChild(n)},this,[h,s])),a.push(cc.callFunc(function(){var c=arguments[1];this.frameList[c].isHaveFK=null;var e=this.frameList[c].getChildByName("colorSpr");e&&(e.cascadeOpacity=!0,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,2),cc.fadeOut(.5)),cc.removeSelf(!0))))},this,h)),a.push(cc.delayTime(.1)),s++}if(0<a.length){a.push(cc.callFunc(function(){this.isDeleting=!1,this.checkIsLose()},this)),this.isDeleting=!0;var l=cc.sequence(a);this.node.runAction(l),this.addScore(s)}f.testCode2("消除逻辑")},checkIsLose:function(){if(!this.isDeleting){for(var c=0,e=0;e<3;e++){var t=cc.find("Canvas/getNewFK"+(e+1));t.getComponent("NewLBXKuai").checkIsLose()?(c++,t.opacity=125):t.opacity=255}if(3==c){var n=cc.instantiate(this.shuPrefab);this.node.parent.addChild(n),cc.log("保存历史最高分"),cc.sys.localStorage.getItem("score")<o&&cc.sys.localStorage.setItem("score",o)}}},addScore:function(c,e){var t=this.getAddScoreCal(c,e),n=cc.find("Canvas/score/scoreLabel").getComponent(cc.Label);n.string=t+Number(n.string),o=Number(n.string)},getAddScoreCal:function(c,e){var t=c+1;return e?t:2*t*t},get2AryIntersect:function(c,e){for(var t=[],n=0;n<c.length;n++)for(var i=0;i<e.length;i++)e[i]==c[n]&&t.push(e[i]);return t},check2AryIsEqual:function(c,e){for(var t=0;t<c.length;t++)if(e[t]!=c[t])return!1;return!0},onLoad:function(){for(var c=cc.p(this.node.x,this.node.y),e=(this.bianchanggezishu,[{count:5,srcPos:cc.p(0,0)},{count:6,srcPos:cc.p(2*this.liubianxingH,0)},{count:7,srcPos:cc.p(2*this.liubianxingH*2,0)},{count:8,srcPos:cc.p(2*this.liubianxingH*3,0)},{count:9,srcPos:cc.p(2*this.liubianxingH*4,0)},{count:8,srcPos:cc.p(2*this.liubianxingH*4+this.liubianxingH,-3*this.liubianxingA/2)},{count:7,srcPos:cc.p(2*this.liubianxingH*4+2*this.liubianxingH,-3*this.liubianxingA*2/2)},{count:6,srcPos:cc.p(2*this.liubianxingH*4+3*this.liubianxingH,-3*this.liubianxingA*3/2)},{count:5,srcPos:cc.p(2*this.liubianxingH*4+4*this.liubianxingH,-3*this.liubianxingA*4/2)}]),t=cc.pMult(cc.pForAngle(2*Math.PI/360*240),2*this.liubianxingH),n=cc.pMult(cc.pForAngle(2*Math.PI/360*120),2*this.liubianxingH*4),i=[],o=[],r=0;r<e.length;r++)for(var a=e[r].count,s=cc.pAdd(e[r].srcPos,n),p=cc.pAdd(c,s),u=0;u<a;u++){var h=cc.pAdd(p,cc.pMult(t,u));o.push(h)}for(var l=0;l<o.length;l++){(f=new cc.Node("frame")).addComponent(cc.Sprite).spriteFrame=this.framePic,f.x=o[l].x,f.y=o[l].y,f.parent=this.node,f.FKIndex=l;var d=new cc.Node("bianSpr");d.addComponent(cc.Sprite).spriteFrame=this.bian,d.active=!1,d.parent=f,i.push(f)}var f;this.frameList=i,this.posList=e,this.isDeleting=!1,this.node.on("succDropDownOne",this.checkXC,this),(f=cc.find("Canvas/highScore/scoreLabel")).getComponent(cc.Label).string=cc.sys.localStorage.getItem("score")||0}}),cc._RF.pop()},{Util:"Util"}],LoadCp:[function(c,e,t){"use strict";cc._RF.push(e,"1e722mUEcZHqq0Plb9cwFF7","LoadCp"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.log("开始加载资源"),cc.view.enableRetina(!1),cc.myAssets={};for(var n=["pics","prefabs","fonts","anims"],i=0,c=0;c<n.length;c++)cc.loader.loadRes(n[c],function(c,e,t){cc.myAssets[n[c]]=t,cc.log("资源加载完成"+i),n.length<=++i&&cc.director.loadScene("startScene")}.bind(this,c))}}),cc._RF.pop()},{}],NewLBXKuai:[function(c,e,t){"use strict";var n;function i(c,e,t){return e in c?Object.defineProperty(c,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[e]=t,c}cc._RF.push(e,"7f7eecsfeNLxL7pMDgXTdAA","NewLBXKuai");var o=c("InitLBXFrame"),h=c("Util");cc.Class({extends:cc.Component,properties:(n={checkerboard:{default:null,type:o}},i(n,"Kcount",3),i(n,"liubianxingH",0),i(n,"liubianxingA",0),i(n,"kuaiTex",{default:null,type:cc.SpriteFrame}),i(n,"color1",{default:null,type:cc.SpriteFrame}),i(n,"color2",{default:null,type:cc.SpriteFrame}),i(n,"color3",{default:null,type:cc.SpriteFrame}),i(n,"color4",{default:null,type:cc.SpriteFrame}),i(n,"anSound",{default:null,url:cc.AudioClip}),i(n,"fangxiaSound1",{default:null,url:cc.AudioClip}),i(n,"fangxiaSound2",{default:null,url:cc.AudioClip}),i(n,"fangxiaSound3",{default:null,url:cc.AudioClip}),i(n,"canNotSound1",{default:null,url:cc.AudioClip}),i(n,"canNotSound2",{default:null,url:cc.AudioClip}),n),getTheConfig:function(){var c=this.liubianxingA,e=this.liubianxingH;return[[cc.p(0,0)],[cc.p(0,0),cc.p(2*e,0)],[cc.p(0,0),cc.p(e,1.5*c)],[cc.p(0,0),cc.p(e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(e,1.5*-c)],[cc.p(0,0),cc.p(e,1.5*c),cc.p(3*e,1.5*c)],[cc.p(0,0),cc.p(e,1.5*c),cc.p(2*e,3*c)],[cc.p(0,0),cc.p(e,1.5*c),cc.p(0,3*c)],[cc.p(0,0),cc.p(e,1.5*-c),cc.p(3*e,1.5*-c)],[cc.p(0,0),cc.p(e,1.5*-c),cc.p(2*e,3*-c)],[cc.p(0,0),cc.p(e,1.5*-c),cc.p(0,3*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0),cc.p(6*e,0)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0),cc.p(5*e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0),cc.p(5*e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0),cc.p(3*e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0),cc.p(3*e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*c),cc.p(e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*c),cc.p(2*e,3*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*c),cc.p(4*e,3*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*c),cc.p(5*e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*-c),cc.p(e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*-c),cc.p(2*e,3*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*-c),cc.p(4*e,3*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*-c),cc.p(5*e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(e,1.5*-c),cc.p(-e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(e,1.5*-c),cc.p(0,3*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(e,1.5*-c),cc.p(2*e,3*-c)],[cc.p(0,0),cc.p(e,1.5*-c),cc.p(2*e,3*-c),cc.p(3*e,4.5*-c)],[cc.p(0,0),cc.p(-e,1.5*-c),cc.p(2*-e,3*-c),cc.p(3*-e,4.5*-c)]]},newOneK:function(c){var e=new cc.Node("colorSpr");e.addComponent(cc.Sprite).spriteFrame=this["color"+c];var t=new cc.Node("wenliSpr");return t.addComponent(cc.Sprite).spriteFrame=this.kuaiTex,t.parent=e},newOneNode:function(){for(var c=new cc.Node("kuai"),e=this.getTheConfig(),t=e[n=h.random(0,e.length-1)],n=h.random(1,4),i=0,o=0,r=0,a=0,s=0;s<t.length;s++){var p=t[s],u=this.newOneK(n);u.x=p.x,i+=u.x,o++,u.y=p.y,r+=u.y,a++,c.addChild(u)}return c.x=-i/o,c.y=-r/a,c.setScale(.7),c},addTouchEvent:function(){var t=this;this.node.ox=this.node.x,this.node.oy=this.node.y,this.node.on(cc.Node.EventType.TOUCH_START,function(){this.y+=100,this.getChildByName("kuai").setScale(1),cc.audioEngine.playEffect(t.anSound)},this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(c){var e=c.touch.getDelta();this.x+=e.x,this.y+=e.y,t.collisionFunc(),t.checkIsCanDrop()?t.changeColorDeal():t.changeColorDeal(!0)},this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(c){this.dropDownFunc()},this),this.node.on(cc.Node.EventType.TOUCH_END,function(c){this.dropDownFunc()},this)},changeColorDeal:function(c){for(var e=0;e<this.checkerboard.frameList.length;e++){this.checkerboard.frameList[e].getChildByName("bianSpr").active=!1}if(!c)for(e=0;e<this.checkFrameList.length;e++){this.checkFrameList[e].getChildByName("bianSpr").active=!0}},collisionFunc:function(){this.checkFrameList=[],this.checkFKlist=[];for(var c=this.node.children[0].children,e=0;e<c.length;e++){var t=cc.pAdd(cc.p(this.node.children[0].x,this.node.children[0].y),cc.p(c[e].x,c[e].y)),n=cc.pAdd(this.node.position,t),i=this.checkPosFunc(n);i&&(this.checkFKlist.push(c[e]),this.checkFrameList.push(i))}},checkPosFunc:function(c){for(var e=0;e<this.checkerboard.frameList.length;e++){var t=this.checkerboard.frameList[e];if(cc.pDistance(cc.p(t.x,t.y),c)<=27)return t}},checkIsLose:function(){for(var c=0,e=this.node.children[0].children,t=0;t<this.checkerboard.frameList.length;t++){var n=this.checkerboard.frameList[t],i=cc.p(n.x,n.y),o=1;if(!n.isHaveFK){for(var r=1;r<e.length;r++)for(var a=cc.pAdd(i,cc.p(e[r].x,e[r].y)),s=0;s<this.checkerboard.frameList.length;s++){var p=this.checkerboard.frameList[s];cc.pDistance(cc.p(p.x,p.y),a)<=27&&!p.isHaveFK&&o++}o==e.length&&c++}}return 0==c},checkIsCanDrop:function(){if(0==this.checkFrameList.length||this.checkFrameList.length!=this.node.children[0].children.length)return!1;for(var c=0;c<this.checkFrameList.length;c++)if(this.checkFrameList[c].isHaveFK)return!1;return!0},dropDownFunc:function(){if(!this.checkIsCanDrop())return this.takeBack(),void cc.audioEngine.playEffect(this.canNotSound1);for(var c=0;c<this.checkFKlist.length;c++)this.checkFKlist[c].x=0,this.checkFKlist[c].y=0,this.checkFKlist[c].parent=this.checkFrameList[c],this.checkFrameList[c].isHaveFK=!0;this.node.removeAllChildren();var e=this.newOneNode();this.node.addChild(e),this.checkerboard.curFKLen=this.checkFKlist.length,this.checkerboard.node.emit("succDropDownOne");var t=h.random(1,3);cc.audioEngine.playEffect(this["fangxiaSound"+t]),this.takeBack(),this.checkerboard.checkIsLose()},takeBack:function(){this.checkFrameList=[],this.changeColorDeal(),this.node.getChildByName("kuai").setScale(.7),this.node.x=this.node.ox,this.node.y=this.node.oy},onLoad:function(){this.checkFrameList=[],this.checkFKlist=[],this.node.cascadeOpacity=!0;var c=this.newOneNode();this.node.addChild(c),this.addTouchEvent()}}),cc._RF.pop()},{InitLBXFrame:"InitLBXFrame",Util:"Util"}],ScoreBtnCp:[function(c,e,t){"use strict";cc._RF.push(e,"fa093eyq9ROGJnwYLEn4xRL","ScoreBtnCp"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],StartBtnCp:[function(c,e,t){"use strict";var n,i,o;cc._RF.push(e,"7d9dd4jmi9I7Z1fgVPHfEXS","StartBtnCp"),cc.Class({extends:cc.Component,properties:(n={},i="游戏界面",o={default:null,type:cc.Prefab},i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n),onClick:function(){this.node.parent;var c=cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){cc.log("开始游戏"),cc.director.loadScene("gameScene"),this.node.destroy()},this));this.getComponent(cc.Animation).stop(),this.node.runAction(c)},onLoad:function(){}}),cc._RF.pop()},{}],TipCp:[function(c,e,t){"use strict";cc._RF.push(e,"2da59+FgkRFGqzGIbcv57tI","TipCp"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.x=0,this.node.y=0,this.node.runAction(cc.sequence(cc.spawn(cc.fadeOut(1),cc.moveBy(1,cc.p(0,100))),cc.removeSelf(!0)))}}),cc._RF.pop()},{}],Util:[function(c,e,t){"use strict";cc._RF.push(e,"1f57fJXW/5MwpzGE2th5qGE","Util");var n={printObj:function(c){var e="";for(var t in c)c[t],e+=t+" \n ";cc.log(e)},random:function(c,e){return Math.floor(Math.random()*(e-c+1)+c)},testCodeStr:"",testCode1:function(c){this.start=(new Date).getTime(),this.testCodeStr=c},testCode2:function(c){this.end=(new Date).getTime();var e=this.end-this.start+"ms";cc.log("此处花时间："+e+this.testCodeStr)}};e.exports=n,cc._RF.pop()},{}],ZIndexSet:[function(c,e,t){"use strict";cc._RF.push(e,"0f727RVfzZIHZgekF5A2mIS","ZIndexSet"),cc.Class({extends:cc.Component,properties:{zIndex:0},onLoad:function(){this.node.zIndex=this.zIndex}}),cc._RF.pop()},{}]},{},["BackBtnCp","BgRandomMove","GameData","LoadCp","ScoreBtnCp","StartBtnCp","TipCp","ZIndexSet","App","InitLBXFrame","NewLBXKuai","ButtonControl","Util"]);