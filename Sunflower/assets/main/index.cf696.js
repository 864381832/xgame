window.__require=function e(t,o,n){function i(c,s){if(!o[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var u=o[c]={exports:{}};t[c][0].call(u.exports,function(e){return i(t[c][1][e]||e)},u,u.exports,e,t,o,n)}return o[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AnimsEvent:[function(e,t){"use strict";cc._RF.push(t,"b27c5BHeDpFRZf4unoUkX9J","AnimsEvent"),cc.Class({extends:cc.Component,animDone:function(){this.node.emit("logoAnimDone",{msg:"logo\u52a8\u753b\u64ad\u653e\u5b8c\u6210"})}}),cc._RF.pop()},{}],AudioClip:[function(e,t){"use strict";cc._RF.push(t,"8250f/w0aRLl4VFOmqj/Olv","AudioClip");var o=e("./Global");cc.Class({extends:cc.Component,properties:{onClickAudio:{default:null,tooltip:"\u6309\u94ae\u70b9\u51fb\u97f3\u6548",type:cc.AudioClip},logoAudio:{default:null,tooltip:"\u524d\u65b9\u9ad8\u80fd\u97f3\u6548",type:cc.AudioClip},bgmAudio:{default:null,tooltip:"\u80cc\u666f\u97f3\u6548",type:cc.AudioClip}},playClickAudio:function(){o.isAudio&&cc.audioEngine.play(this.onClickAudio,!1,1)},playLogoAudio:function(){cc.audioEngine.play(this.logoAudio,!1,1)},playBgmAudio:function(){!o.isAudio||this.bgmAudioId&&this.getState(this.bgmAudioId)==cc.audioEngine.AudioState.PLAYING||(this.bgmAudioId=cc.audioEngine.play(this.bgmAudio,!0,1))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()},stopAll:function(){cc.audioEngine.stopAll()},getState:function(e){return cc.audioEngine.getState(e)}}),cc._RF.pop()},{"./Global":"Global"}],Custom:[function(e,t){"use strict";cc._RF.push(t,"3bdd5TBNFFEF4GdYLoM5dHI","Custom"),cc.Class({extends:cc.Component,start:function(){try{this._audioClip=cc.find("globalAudio").getComponent("AudioClip")}catch(e){}}}),cc._RF.pop()},{}],Dialog:[function(e,t){"use strict";cc._RF.push(t,"feaf47h72RKAqSCD6UEEjtR","Dialog");var o=void 0,n=void 0,i=void 0;function a(e,t){o||(o=new cc.NodePool),o.size()>0?c(o.get(),e,t):cc.loader.loadRes("prefab/settlementDialog",cc.Prefab,function(o,n){o||c(cc.instantiate(n),e,t)})}function c(e,t,o){t.addChild(e),o&&o(e)}function s(e,t){n||(n=new cc.NodePool),n.size()>0?r(n.get(),e,t):cc.loader.loadRes("prefab/loadingDialog",cc.Prefab,function(o,n){o||r(cc.instantiate(n),e,t)})}function r(e,t,o){t.addChild(e),o&&o(e)}function l(e,t){i||(i=new cc.NodePool),i.size()>0?u(i.get(),e,t):cc.loader.loadRes("prefab/rankDialog",cc.Prefab,function(o,n){o||u(cc.instantiate(n),e,t)})}function u(e,t,o){t.addChild(e),o&&o(e)}t.exports={showSettlementDialog:function(e,t,o,n,i){a(e,function(e){if(e){var a=e.getComponent("SettlementDialog");a.setData(t,o,n),i&&i(a)}})},hiddenSettlementDialog:function(e){e&&(e.getComponent("SettlementDialog").setNewScore(!1),o.put(e))},showLoadingDialog:function(e,t){s(e,function(e){e&&t&&t(e)})},hiddenLoadingDialog:function(e){e&&n.put(e)},showRankDialog:function(e){l(e,function(){})},hiddenRankDialog:function(e){e&&i.put(e)}},cc._RF.pop()},{}],First:[function(e,t){"use strict";cc._RF.push(t,"ba9bbilz3xCXLFe6su0vymD","First"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.director.loadScene("Welcome")}}),cc._RF.pop()},{}],Global:[function(e,t){"use strict";cc._RF.push(t,"0bcf33EkVlFv7meSoaeFd+5","Global"),t.exports={isDebug:!1,openId:"15B91788D2D3FDB763DEBA67EB3D646E",nickName:"xwintop",avatarUrl:"http://192.168.1.134:12888/img/head.png",inviter:"inGame",isAudio:!0,apiToken:void 0,share:!1,isAuth:!1,wxDb:void 0,URL:{BASE_URL:"http://192.168.1.158:7870/sunflower/v1",EXCEL:"/getSunFlowerExcelServlet",RANK:"/getWorldRankingList",UPLOAD:"/setUserStorageServlet"},videoAd:void 0,bannerAd:void 0,videoAdLoadCount:0,bannerAdLoadCount:0,windowWidth:414,windowHeight:736},cc._RF.pop()},{}],Home:[function(e,t){"use strict";cc._RF.push(t,"3ba08u06VpMV5c0m//oHv4H","Home");var o=e("../scripts/common/Utils"),n=e("../scripts/common/Custom"),i=e("../scripts/common/NetUtils"),a=e("./common/Global"),c=e("./Dialog"),s=e("../scripts/common/PlatformAdapter"),r=cc.Enum({LEFT:0,RIGHT:1});cc.Class({extends:n,properties:{contentNode:{default:null,type:cc.Node,tooltip:"\u5de6\u53f3\u7684\u6839\u8282\u70b9"},left:{default:null,type:cc.SpriteFrame},leftCurrent:{default:null,type:cc.SpriteFrame},right:{default:null,type:cc.SpriteFrame},rightCurrent:{default:null,type:cc.SpriteFrame},scoreLabel:{default:null,type:cc.Label},rankNode:{default:null,type:cc.Node},_totalTime:40,_tvArray:[],_removeArray:[],_rightOrRights:0,_stepTime:0,_startGame:!1,_defaultTimeScale:1,_currentTimeScale:1,_currentScore:0,_dataArray:[]},btnOnclik:function(e,t){switch(this._audioClip.playClickAudio(),t){case"startGame":o.log("startGame..."),this.startGame(),this.rankNode.active=!1;break;case"left":o.log("left..."),this.clickLeftOrightBtn(r.LEFT);break;case"right":o.log("right..."),this.clickLeftOrightBtn(r.RIGHT);break;case"rank":o.log("rank..."),cc.sys.platform==cc.sys.WECHAT_GAME?(wx.getOpenDataContext().postMessage({message:"getFriendRank",openId:a.openId}),this.rankNode.active=!0):c.showRankDialog(this.node);break;case"closeRank":this.rankNode.active=!1}},onLoad:function(){var e=this;o.log("onLoad..."),cc.director.on("startGame",function(){o.log("startGame...."),e.startGame()},this.node)},start:function(){this._super();var e=this,t=this.node.getChildByName("title");this._startTitle=t.getChildByName("startTitle"),this._defaultTitle=t.getChildByName("defaultTitle");var n=this.node.getChildByName("panel");this._startGameBtn=n.getChildByName("startGame"),this._leftAndRightBtn=n.getChildByName("leftAndRight"),this._rankBtn=n.getChildByName("rank"),this._timeNode=this.node.getChildByName("time"),this._timeSchedule=this._timeNode.getComponent("Schedule"),this._timeNode.on(this._timeNode.name,function(e){cc.log("time \u65f6\u95f4\u5230>"+e.msg),this.gameOver()}.bind(this)),this._initLeftOright(),this._dataArray=[{spend:1,score:1,animLevel:.3},{spend:2,score:20,animLevel:.5},{spend:5,score:30,animLevel:1},{spend:10,score:40,animLevel:1.3},{spend:15,score:60,animLevel:1.5},{spend:20,score:100,animLevel:2}],this.runAsyncGetDragonRes("sunflower",this._defaultTimeScale).then(function(t){e.armatureDisPlay=t,e._audioClip.playBgmAudio()}).catch(function(e){o.log(e)}),this._createButton()},_createButton:function(){if(cc.sys.platform==cc.sys.WECHAT_GAME&&!a.isAuth){var e=this;this.frameSize=cc.view.getFrameSize(),this._startGameBtn.active=!1,this._rankBtn.active=!1,this._userInfoBtn=s.createUserInfoBtnByImg(this.frameSize.width/2-126.7,this.frameSize.height-150,"https://7072-pro-15ec75-1258808161.tcb.qcloud.la/static/button_start.png?sign=cd9bc5970a2adb7fab175e58b54743a9&t=1552444436",253.4,82.6,function(t){console.log("\u83b7\u53d6\u5230\u7684UserInfo:",t),-1==t.errMsg.indexOf("fail")?(a.nickName=t.userInfo.nickName,a.avatarUrl=t.userInfo.avatarUrl,e.startGame()):s.showModal("\u63d0\u793a","\u8bf7\u70b9\u51fb\u5141\u8bb8\u6309\u94ae")})}},startGame:function(){this._startTitle.active=!0,this._defaultTitle.active=!1,this._startGameBtn.active=!1,this._leftAndRightBtn.active=!0,this._rankBtn.active=!1,this._timeSchedule.setTime(this._totalTime),this._audioClip.pauseAll(),this._audioClip.playBgmAudio(),this._startGame=!0,this._currentScore=0,this._currentTimeScale=this._defaultTimeScale,this.setScore(this._currentScore),o.log("this._defaultTimeScale:",this._defaultTimeScale),cc.sys.platform==cc.sys.WECHAT_GAME&&this._userInfoBtn&&this._userInfoBtn.hide()},gameOver:function(){var e=this;this._startGame=!1,this._startTitle.active=!1,this._defaultTitle.active=!0,this._startGameBtn.active=!0,this._leftAndRightBtn.active=!1,this._rankBtn.active=!0,this._timeSchedule.unSchedule(),this._timeNode.getComponent(cc.Label).string=this._totalTime,this.setPlayTimeScale(this._defaultTimeScale),this._removeArray=[],this.showSettlementDialog(a.avatarUrl,a.nickName,this._currentScore,function(t){cc.sys.platform==cc.sys.WECHAT_GAME?s.uploadScore(e._currentScore).then(function(e){console.log("uploadScore ...",e),1==e?t.setNewScore(!0):t.setNewScore(!1)}).catch(function(e){console.log("uploadScore err...",e)}):i.uploadScore(e._currentScore,function(e,o){0==e&&(0==o.code?t.setNewScore(o.data.isNew):t.setNewScore(!1))})})},clickLeftOrightBtn:function(e){var t=this._tvArray.shift();if(t==e){var n=this.contentNode.children;this.leftOrightPool.put(n[0]);var i=n[0];"right"===i.name.split("_")[1]?this.setLeftOrightNode(i,!1,r.RIGHT,!0,i.position):this.setLeftOrightNode(i,!1,r.LEFT,!0,i.position),this.contentNode.runAction(cc.moveBy(.2,cc.v2(-84,0)));var a=o.getRandomInt(0,2);this._tvArray.push(a),this._rightOrRights+=1,this.newLeftOrightNode(a,!1,cc.v2(84*this._rightOrRights-247,0)),this._removeArray.push(t)}else this._tvArray.unshift(t),o.log("Game over..."),this.gameOver()},_initLeftOright:function(){this.leftOrightPool=new cc.NodePool,cc.loader.loadRes("prefab/leftOright",cc.Prefab,function(e,t){if(!e){for(var n=0;n<7;n++){var i=cc.instantiate(t),a=o.getRandomInt(0,2);this._tvArray.push(a),this.setLeftOrightNode(i,!0,a,0==n,cc.v2(84*n-247,0))}this._rightOrRights=6}}.bind(this))},newLeftOrightNode:function(e,t,o,n){var i=null;this.leftOrightPool||(this.leftOrightPool=new cc.NodePool),this.leftOrightPool.size()>0?(i=this.leftOrightPool.get(),this.setLeftOrightNode(i,!0,e,t,o,n)):cc.loader.loadRes("prefab/leftOright",cc.Prefab,function(a,c){a||(i=cc.instantiate(c),this.setLeftOrightNode(i,!0,e,t,o,n))}.bind(this))},setLeftOrightNode:function(e,t,o,n,i,a){var c="lo",s=e.getComponent(cc.Sprite);n?(e.setScale(1,1),r.LEFT==o?(s.spriteFrame=this.leftCurrent,c=c.concat("_left_current")):(s.spriteFrame=this.rightCurrent,c=c.concat("_right_current"))):(e.setScale(.8,.8),r.LEFT==o?(s.spriteFrame=this.left,c=c.concat("_left")):(s.spriteFrame=this.right,c=c.concat("_right"))),e.name=c,e.position=i,t&&this.contentNode.addChild(e),a&&a(e)},runAsyncGetDragonRes:function(e,t){return new Promise(function(o){cc.loader.loadResDir("dragon/"+e,function(n,i){if(!(n||i.length<=0)){var a=new cc.Node;this.node.getChildByName("players").getChildByName(e).addChild(a),a.setPosition(cc.v2(0,0)),a.setScale(1,1);var c=a.addComponent(dragonBones.ArmatureDisplay);for(var s in i)i[s]instanceof dragonBones.DragonBonesAsset&&(c.dragonAsset=i[s]),i[s]instanceof dragonBones.DragonBonesAtlasAsset&&(c.dragonAtlasAsset=i[s]);c.armatureName="Armature",c.playAnimation("sunflower"),c.timeScale=t,o(c)}}.bind(this))}.bind(this))},setPlayTimeScale:function(e){this.armatureDisPlay.timeScale=e},setScore:function(e){this.scoreLabel.string=e},showSettlementDialog:function(e,t,o,n){c.showSettlementDialog(this.node,e,t,o,n)},update:function(e){if(this._startGame&&(this._stepTime+=e,this._stepTime>=1)){this._stepTime=0;var t=this._removeArray.length;if(t<=0)return this._currentTimeScale=this._defaultTimeScale,void this.setPlayTimeScale(this._currentTimeScale);var n=void 0;if(this._dataArray.length>0)for(var i=0;i<this._dataArray.length;i++){var a=this._dataArray[i];if(a.spend==t){n=a;break}}if(n){var c=n.animLevel,s=n.score;this._removeArray=[],this._currentScore+=s,this.setScore(this._currentScore),this._currentTimeScale=c,this.setPlayTimeScale(this._currentTimeScale),o.log("this._currentTimeScale>"+this._currentTimeScale)}}}}),cc._RF.pop()},{"../scripts/common/Custom":"Custom","../scripts/common/NetUtils":"NetUtils","../scripts/common/PlatformAdapter":"PlatformAdapter","../scripts/common/Utils":"Utils","./Dialog":"Dialog","./common/Global":"Global"}],LoadingDialog:[function(e,t){"use strict";cc._RF.push(t,"60a44LuDhNPrI2gs0b8ZQoG","LoadingDialog");var o=e("../common/Slider"),n=e("../Dialog");cc.Class({extends:cc.Component,properties:{loadingProgress:{default:null,type:o,tooltip:"\u52a0\u8f7d\u8fdb\u5ea6\u6761"}},start:function(){},loadScene:function(e){var t=this;cc.director.preloadScene(e,function(e,o){t.setLoadingProgress(e/o)},function(o){o||(cc.director.loadScene(e),n.hiddenLoadingDialog(t.node))})},setLoadingProgress:function(e){this.loadingProgress.setProgress(e)}}),cc._RF.pop()},{"../Dialog":"Dialog","../common/Slider":"Slider"}],Loading:[function(e,t){"use strict";cc._RF.push(t,"77672w4vNZFF483ssBwG4gE","Loading");var o=e("../scripts/Dialog"),n=e("../scripts/common/PlatformAdapter"),i=e("./common/Global");cc.Class({extends:cc.Component,properties:{},start:function(){o.showLoadingDialog(this.node,function(e){var t=e.getComponent("LoadingDialog");cc.sys.platform==cc.sys.WECHAT_GAME?(n.initCloud(),n.callFunction("getOpenId").then(function(e){i.openId=e.result.openid,console.log("openId",i.openId)}).catch(function(e){console.log("getOpenId err",e)}),n.getSetting("scope.userInfo").then(function(e){i.isAuth=!0,console.log(e),n.getUserInfo().then(function(e){console.log("\u7528\u6237\u4fe1\u606f:",e),i.nickName=e.userInfo.nickName,i.avatarUrl=e.userInfo.avatarUrl,console.log("Global.nickName",i.nickName,"Global.avatarUrl",i.avatarUrl),t.loadScene("Home")}).catch(function(e){console.log("\u7528\u6237\u4fe1\u606f err:",e)})}).catch(function(e){console.log(e),t.loadScene("Home")})):t.loadScene("Home")})}}),cc._RF.pop()},{"../scripts/Dialog":"Dialog","../scripts/common/PlatformAdapter":"PlatformAdapter","./common/Global":"Global"}],NetUtils:[function(e,t){"use strict";cc._RF.push(t,"1bcb1JmTWVOqK/msfb7nnza","NetUtils");var o=e("./Utils"),n=e("./Global");function i(e,t,n,i){o.log("\u8bf7\u6c42\u5730\u5740:"+e),o.log("\u8bf7\u6c42\u53c2\u6570:"+n);var a=new XMLHttpRequest;a.onreadystatechange=function(){var e=a.status;if(4==a.readyState&&200==e){var t=a.responseText;o.log("\u54cd\u5e94\u7684\u7ed3\u679c\uff1a"+t),i(e,JSON.parse(t))}},a.open("POST",e,!0),"json"==t?a.setRequestHeader("Content-Type","application/json"):"www"==t&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(n)}function a(e,t,n){o.log("\u8bf7\u6c42\u5730\u5740:"+e),o.log("\u8bf7\u6c42\u53c2\u6570:"+t);var i=new XMLHttpRequest;i.onreadystatechange=function(){var e=i.status;if(4==i.readyState&&200==e){var t=i.responseText;o.log("\u54cd\u5e94\u7684\u7ed3\u679c\uff1a"+t),n(e,JSON.parse(t))}},i.open("GET",e+"?params="+encodeURIComponent(t),!0),i.send()}t.exports={post:i,get:a,doLogin:function(e){var t;a(n.URL.BASE_URL+n.URL.LOGIN,((t={accounttype:4}).gameID=n.gameId,t.openid=n.openId,t.platform=n.platform,t.sex=n.sex,t.nickName=n.nickName,t.osVersion=n.osVersion,n.inviter&&(t.inviter=n.inviter),JSON.stringify(t)),function(t,o){var i=-1;200==t&&(i=0,o&&0==o.code&&(n.WEB_SOCKET.URL=o.data.serverAddress,n.WEB_SOCKET.TOKEN=o.data.token)),e(i)})},doExcel:function(e){i(n.URL.BASE_URL+n.URL.EXCEL,"www","gameId=sunflower",function(t,o){e(200==t?0:-1,o)})},uploadScore:function(e,t){i(n.URL.BASE_URL+n.URL.UPLOAD,"www","gameId=sunflower&score="+e+"&token="+n.token,function(e,o){t(200==e?0:-1,o)})},getRankData:function(e){i(n.URL.BASE_URL+n.URL.RANK,"www","gameId=sunflower",function(t,o){e(200==t?0:-1,o)})}},cc._RF.pop()},{"./Global":"Global","./Utils":"Utils"}],PersistRootNode:[function(e,t){"use strict";cc._RF.push(t,"f6184sglblNmYt/am//xh+8","PersistRootNode"),cc.Class({extends:cc.Component,start:function(){cc.game.isPersistRootNode(this.node)||cc.game.addPersistRootNode(this.node)}}),cc._RF.pop()},{}],PlatformAdapter:[function(e,t){"use strict";cc._RF.push(t,"0f94bv7Q+hJeK//SY9UUu+7","PlatformAdapter");var o=new(e("./WxApi"));t.exports={initCloud:function(){o.initCloud("pro-15ec75")},getSetting:function(e){return o.getSetting(e)},login:function(){return o.login()},getUserInfo:function(){return o.getUserInfo()},showShareMenu:function(){o.showShareMenu()},onShareAppMessage:function(){o.onShareAppMessage()},shareAppMessage:function(){o.shareAppMessage()},createUserInfoBtnByImg:function(e,t,n,i,a,c){return o.createUserInfoBtnByImg(e,t,n,i,a,c)},createFeedbackButtonByImg:function(e,t,n,i,a,c){return o.createFeedbackButtonByImg(e,t,n,i,a,c)},loadVideoAd:function(){o.loadVideoAd("adunit-5b6b4a914e14b53e")},loadBannerAd:function(){o.loadBannerAd("adunit-0ebd781de8250e17")},showBannerAd:function(){o.showBannerAd()},hideBannerAd:function(){o.hideBannerAd()},showModal:function(e,t){o.showModal(e,t)},showLoading:function(e){o.showLoading(e)},hideLoading:function(){o.hideLoading()},post:function(e,t){return o.post(e,t)},callFunction:function(e,t){return o.callFunction(e,t)},uploadScore:function(e){return o.uploadScore(e)}},cc._RF.pop()},{"./WxApi":"WxApi"}],RankDialog:[function(e,t){"use strict";cc._RF.push(t,"21aec5mmPlBT6Cm5BvXD2Ga","RankDialog");var o=e("./Dialog"),n=e("../scripts/common/Utils"),i=e("../scripts/common/NetUtils"),a=cc.Enum({TOP3:0,OTHERS:1,SELF:2});cc.Class({extends:cc.Component,properties:{scrollView:{default:null,type:cc.ScrollView},itemBgs:{default:[],type:cc.SpriteFrame},itemNumberTop3:{default:[],type:cc.SpriteFrame}},btnClick:function(e,t){switch(t){case"close":n.log("close..."),o.hiddenRankDialog(this.node);break;case"pk":n.log("pk..."),o.hiddenRankDialog(this.node),cc.director.emit("startGame")}},setData:function(e,t){var o=this;this._content=this.scrollView.content;var n=this._content.children;n&&n.length>0&&n.forEach(function(e){e.destroy()}),cc.loader.loadRes("prefab/rankItem",cc.Prefab,function(n,i){n||(e.forEach(function(e){var t=cc.instantiate(i),n=e.id<4?a.TOP3:a.OTHERS;o._setItemNode(t,n,e,function(e){o._content.addChild(e)})}),t&&o._newItemNode(a.SELF,t,function(e){o.node.getChildByName("bg").getChildByName("selfNode").addChild(e)}))})},_newItemNode:function(e,t,o){var n=null;this.itemPool||(this.itemPool=new cc.NodePool),this.itemPool.size()>0?(n=this.itemPool.get(),this._setItemNode(n,e,t,o)):cc.loader.loadRes("prefab/rankItem",cc.Prefab,function(i,a){i||(n=cc.instantiate(a),this._setItemNode(n,e,t,o))}.bind(this))},_setItemNode:function(e,t,o,i){e.getChildByName("score").getComponent(cc.Label).string=o.score;var c=e.getChildByName("head").getChildByName("head");n.loadImgByUrl(c,o.headUrl),e.getComponent(cc.Sprite).spriteFrame=this.itemBgs[t],e.getChildByName("bannerId").getChildByName("name").getComponent(cc.Label).string=n.stringTodo(o.name,8);var s=e.getChildByName("no"),r=e.getChildByName("number"),l=e.getChildByName("numImg");s.active=!1,r.active=!1,l.active=!1,t==a.TOP3?(l.getComponent(cc.Sprite).spriteFrame=this.itemNumberTop3[o.id-1],l.active=!0):t==a.OTHERS?(r.getComponent(cc.Label).string=o.id,r.active=!0):t==a.SELF&&(o.id<=0?s.active=!0:(r.getComponent(cc.Label).string=o.id,r.active=!0)),i&&i(e)},_itemObj:function(e,t,o,n,i){return{id:e,name:t,score:o,headUrl:i,openId:n}},loadRankData:function(){var e=this;return new Promise(function(t,o){i.getRankData(function(i,a){if(n.log("getRankData",i,a),0!=i)return n.log("getRank \u8bf7\u6c42\u5f02\u5e38",i),void o("getRank \u8bf7\u6c42\u5f02\u5e38:"+i);if(a&&0!=a.code)return n.log("getRank code ",a.code,a.msg),void o("getRank code:"+a.code+" msg:"+a.msg);var c=a.data.ranking,s=[];c&&c.length>0&&c.forEach(function(t){var o=e._itemObj(t.rank,t.name,t.score,t.openId,"http://192.168.1.134:12888/img/head.png");s.push(o)});var r=void 0,l=a.data.oneself;l&&(r=e._itemObj(l.rank,l.name,l.score,l.openId,"http://192.168.1.134:12888/img/head.png")),e.setData(s,r),t("success")})})},onLoad:function(){n.log("onLoad....")},start:function(){n.log("start....")},onEnable:function(){this.loadRankData().then(function(e){n.log("loadRankData",e)}).catch(function(e){n.log("loadRankData",e)}),n.log("onEnable....")}}),cc._RF.pop()},{"../scripts/common/NetUtils":"NetUtils","../scripts/common/Utils":"Utils","./Dialog":"Dialog"}],Schedule:[function(e,t){"use strict";cc._RF.push(t,"f44a6+yDCpKaocXFwgYRHXo","Schedule"),cc.Class({extends:cc.Component,properties:{_scheduleTime:3,scheduleTime:{type:cc.Integer,tooltip:"\u5012\u8ba1\u65f6\u65f6\u95f4(\u5355\u4f4d\u79d2)",get:function(){return this._scheduleTime},set:function(e){this._scheduleTime=e,this.node.getComponent(cc.Label).string=e}},emitNode:{default:null,type:cc.Node,tooltip:"\u53d1\u5c04\u4e8b\u4ef6"}},setTime:function(e){cc.log("\u8bbe\u7f6e\u5012\u8ba1\u65f6:"+e),e<=0||(this.scheduleTime=e,this.callback=function(){var e=this.emitNode.name;if(this.scheduleTime<=0)return this.unSchedule(),void this.node.emit(e,{msg:e+"\u5012\u8ba1\u65f6\u6267\u884c\u5b8c\u6210..."});this.scheduleTime-=1},this.schedule(this.callback,1))},unSchedule:function(){return this.unschedule(this.callback),this.getTime()},getTime:function(){return this._scheduleTime},onDestroy:function(){this.unschedule(this.callback),console.log(this.emitNode.name+" \u9500\u6bc1\u4e86\u5012\u8ba1\u65f6...")}}),cc._RF.pop()},{}],SetZIndex:[function(e,t){"use strict";cc._RF.push(t,"aac84tdUahL65PyFp9al7Cw","SetZIndex"),cc.Class({extends:cc.Component,properties:{zIndex:{type:cc.Integer,default:0,notify:function(e){e!==this.zIndex&&(this.node.zIndex=this.zIndex)}}},onLoad:function(){this.node.zIndex=this.zIndex}}),cc._RF.pop()},{}],SettlementDialog:[function(e,t){"use strict";cc._RF.push(t,"99aa62+czJJvaB3xLOQzjJN","SettlementDialog");var o=e("./Dialog"),n=e("../scripts/common/Utils"),i=e("../scripts/common/PlatformAdapter");cc.Class({extends:cc.Component,properties:{head:{default:null,type:cc.Sprite,tooltip:"\u73a9\u5bb6\u56fe\u50cf"},userName:{default:null,type:cc.Label,tooltip:"\u73a9\u5bb6\u6635\u79f0"},score:{default:null,type:cc.Label,tooltip:"\u73a9\u5bb6\u6210\u7ee9"},isNew:{default:null,type:cc.Node,tooltip:"\u65b0\u7eaa\u5f55"}},setData:function(e,t,o){this.userName.getComponent(cc.Label).string=t,this.score.getComponent(cc.Label).string=o,n.loadImgByUrl(this.head,e)},setNewScore:function(e){this.isNew.active=e},btnClick:function(e,t){switch(t){case"share":n.log("share ..."),i.shareAppMessage(),o.hiddenSettlementDialog(this.node);break;case"submit":n.log("submit..."),o.hiddenSettlementDialog(this.node)}},start:function(){}}),cc._RF.pop()},{"../scripts/common/PlatformAdapter":"PlatformAdapter","../scripts/common/Utils":"Utils","./Dialog":"Dialog"}],Slider:[function(e,t){"use strict";cc._RF.push(t,"544a5yYxPROpJtI5hWy0xlZ","Slider"),cc.Class({extends:cc.Component,properties:{mask:{default:null,type:cc.Mask},_width:0},onLoad:function(){var e=this.getComponent(cc.Slider);e.enabled=!1,this._slider=this,null!=e&&null!=this.mask&&(this._width=this.mask.node.width,this.mask.node.width=this._width*e.progress,this.currentProgress&&this.setProgress(this.currentProgress))},setProgress:function(e){this._slider.progress=e,this.mask.node.width=this._width*this._slider.progress}}),cc._RF.pop()},{}],TtApi:[function(e,t){"use strict";cc._RF.push(t,"7af64xA0YFMuLM2QB8x+Luc","TtApi");var o=function(){};o.prototype.login=function(){return new Promise(function(e){e(123)})},t.exports=o,cc._RF.pop()},{}],Utils:[function(e,t){"use strict";cc._RF.push(t,"0b211egPQFOH4R0SxiJIuR2","Utils");var o=e("./Global");function n(e,t){e.getComponent(cc.Sprite).spriteFrame=t}function i(e,t){return{unit:e,value:t}}function a(e,t){return Math.floor(Math.random()*(t-e))+e}t.exports={log:function(){if(o.isDebug)for(var e in arguments)console.log(arguments[e])},loadImgByUrl:function(e,t,o){o||(o="png"),cc.loader.load({url:t,type:o},function(t,o){t||n(e,new cc.SpriteFrame(o))})},loadLocal:function(e,t){cc.loader.load(t,function(t,o){t||n(e,new cc.SpriteFrame(o))})},setImg:n,isArray:function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[Object Array]"===Object.prototype.toString.call(e)},formatMilliSecond:function(e){if(!(e>3600)){var t=parseInt(e),o=0;return t>60&&(o=parseInt(t/60),t=parseInt(t%60)),t<10&&(t="0"+t),o+":"+t}},formatSeconds:function(e){var t=parseInt(e),o=0,n=0;return t>60&&(o=parseInt(t/60),t=parseInt(t%60),o>60&&(n=parseInt(o/60),o=parseInt(o%60))),t<10&&(t="0"+t),o<10&&(o="0"+o),n<10&&(n="0"+n),n+":"+o+":"+t},bigNumObj:i,bigNum:function(e){var t,o=e.replace(/\s+/g,""),n=0,a=o.match("[a-zA-Z]+$");switch(t=a?parseFloat(o.substring(0,o.indexOf(a))):parseFloat(o),a+""){case"K":n=1;break;case"M":n=2;break;case"B":n=3;break;case"T":n=4;break;case"aa":n=5;break;case"ab":n=6;break;case"ac":n=7;break;case"ad":n=8;break;case"ae":n=9;break;case"af":n=10;break;case"ag":n=11;break;case"ah":n=12;break;case"aj":n=15;break;case"al":n=16;break;case"am":n=17;break;case"an":n=18;break;case"ao":n=19;break;case"ap":n=20;break;case"aq":n=21;break;case"ar":n=22;break;case"as":n=23;break;case"at":n=24;break;case"au":n=25;break;case"av":n=26;break;case"aw":n=27;break;case"ax":n=28;break;case"ay":n=29;break;case"az":n=30}return i(n,t)},bigNumSub:function(e,t){var o=0,n=0;return e.unit==t.unit?0==e.unit?(o=0,n=e.value-t.value):e.value-t.value>1?(o=e.unit,n=e.value-t.value):(o=e.unit-1,n=1e3*(e.value-t.value)):e.unit>t.unit?e.unit-t.unit<=4?(o=e.unit,n=e.value-t.value/Math.pow(1e3,e.unit-t.unit)):e.unit-t.unit>4&&(o=e.value,n=e.value):e.unit<t.unit&&(t.unit-e.unit<=4?(o=t.unit,n=e.value/Math.pow(1e3,t.unit-e.unit)-t.value):t.unit-e.unit>4&&(o=t.unit,n=-t.value)),i(o,n)},bigNumAdd:function(e,t){var o=0,n=0;return e.unit==t.unit?(o=e.unit,n=e.value+t.value):e.unit>t.unit?e.unit-t.unit<=4?(o=e.unit,n=e.value+t.value/Math.pow(1e3,e.unit-t.unit)):e.unit-t.unit>4&&(o=e.unit,n=e.value):e.unit<t.unit&&(t.unit-e.unit<=4?(o=t.unit,n=e.value/Math.pow(1e3,t.unit-e.unit)+t.value):t.unit-e.unit>4&&(o=bigNumBB.unit,n=t.value)),i(o,n)},stringTodo:function(e,t){var o=/[\u4e00-\u9fa5]/g,n=e.substring(0,t),i=~~(n.match(o)&&n.match(o).length),a=2*n.length-i;return e.substr(0,a)+(a<e.length?"...":"")},getBigChar:function(e){var t="";switch(e){case 1:t="K";break;case 2:t="M";break;case 3:t="B";break;case 4:t="T";break;case 5:t="aa";break;case 6:t="ab";break;case 7:t="ac";break;case 8:t="ad";break;case 9:t="ae";break;case 11:t="af";break;case 12:t="ag";break;case 13:t="ah";break;case 14:t="ai";break;case 15:t="aj";break;case 16:t="ak";break;case 17:t="al";break;case 18:t="am";break;case 19:t="an";break;case 20:t="ao";break;case 21:t="ap";break;case 22:t="aq";break;case 23:t="ar";break;case 24:t="as";break;case 25:t="at";break;case 26:t="au";break;case 27:t="av";break;case 26:t="aw";break;case 28:t="ax";break;case 29:t="ay";break;case 30:t="az";break;default:t=""}return t},getRandomInt:a,getRandom:function(e,t){return Math.floor(100*(Math.random()*(t-e)+e))/100},getDistinctRandomInt:function e(t,o,n){var i=a(t,o);return i==n?i=e(t,o,n):i},getDistinctRandomByArray:function(e,t,o){var n=a(e,t);return cc.js.array.contains(o,n)?n=a(e,t):n},compareVersion:function(e,t){e=e.split("."),t=t.split(".");for(var o=Math.max(e.length,t.length);e.length<o;)e.push("0");for(;t.length<o;)t.push("0");for(var n=0;n<o;n++){var i=parseInt(e[n]),a=parseInt(t[n]);if(i>a)return 1;if(i<a)return-1}return 0}},cc._RF.pop()},{"./Global":"Global"}],WxApi:[function(e,t){"use strict";cc._RF.push(t,"55fcfRpI2hI0aeDoSgwp3ug","WxApi");var o=e("../common/Global"),n=function(){};n.prototype.initCloud=function(e){wx.cloud.init({env:e,traceUser:!0}),o.wxDb=wx.cloud.database({env:e}),this.showShareMenu(),this.onShareAppMessage()},n.prototype.callFunction=function(e,t){return new Promise(function(o){wx.cloud.callFunction({name:e,data:t||{},success:function(t){o(t),console.log("[\u4e91\u51fd\u6570 "+e+"] \u8c03\u7528\u6210\u529f: ",t)},fail:function(t){o(null),console.log("[\u4e91\u51fd\u6570 "+e+"] \u8c03\u7528\u5931\u8d25: ",t)}})})},n.prototype.getSetting=function(e){return new Promise(function(t,o){wx.getSetting({success:function(n){n.authSetting[e]?t("\u5df2\u6388\u6743"):o("\u672a\u6388\u6743")}})})},n.prototype.getUserInfo=function(){return new Promise(function(e,t){wx.getUserInfo({withCredentials:!0,success:function(t){e(t)},fail:function(e){t(e)}})})},n.prototype.login=function(){return new Promise(function(e,t){cc.sys.platform==cc.sys.WECHAT_GAME?wx.login({success:function(o){o.code?e(o.code):t(o.errMsg)}}):t("\u975e\u5fae\u4fe1\u73af\u5883")})},n.prototype.createUserInfoBtnByImg=function(e,t,o,n,i,a){if(cc.sys.platform==cc.sys.WECHAT_GAME){var c=wx.createUserInfoButton({type:"image",image:o,style:{left:e,top:t,width:n,height:i}});return c.onTap(function(e){a&&a(e)}),c.show(),c}console.log("createUserInfoBtnByImg \u975e\u5fae\u4fe1\u73af\u5883...")},n.prototype.createFeedbackButtonByImg=function(e,t,o,n,i,a){if(cc.sys.platform==cc.sys.WECHAT_GAME){var c=wx.createFeedbackButton({type:"image",image:o,style:{left:e,top:t,width:n,height:i}});return c.onTap(function(e){a&&a(e)}),c.show(),c}console.log("createFeedbackButtonByImg \u975e\u5fae\u4fe1\u73af\u5883...")},n.prototype.getShareInfo=function(e,t,o){e||(e="\u524d\u65b9\u9ad8\u80fd"),t||(t="https://7072-pro-15ec75-1258808161.tcb.qcloud.la/static/share_01.png?sign=f246f9cc5f05eece2ae92bbd4444cc16&t=1552447069");var n="";return o||(n="openId="+o),{title:e,imageUrl:t,query:n,success:function(e){console.log("\u5206\u4eab\u5b8c\u6210...",e)},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25...",e)}}},n.prototype.showShareMenu=function(){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.showShareMenu({withShareTicket:!0})},n.prototype.onShareAppMessage=function(e){e||(e=this.getShareInfo()),cc.sys.platform==cc.sys.WECHAT_GAME?wx.onShareAppMessage(function(){return e}):console.log("onShareAppMessage \u975e\u5fae\u4fe1\u73af\u5883...")},n.prototype.shareAppMessage=function(e){cc.sys.platform==cc.sys.WECHAT_GAME?(e||(e=this.getShareInfo()),wx.shareAppMessage(e)):console.log("shareAppMessage \u975e\u5fae\u4fe1\u73af\u5883...")},n.prototype.showModal=function(e,t){wx.showModal({title:e,content:t})},n.prototype.showLoading=function(e){return new Promise(function(t,o){cc.sys.platform==cc.sys.WECHAT_GAME?wx.showLoading({title:e,mask:!0,success:function(e){t(e)},fail:function(e){o(e)}}):o("\u975e\u5fae\u4fe1\u5e73\u53f0")})},n.prototype.hideLoading=function(){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.hideLoading()},n.prototype.showToast=function(e){wx.showToast({title:e,duration:2e3})},n.prototype.loadVideoAd=function(e){if(!o.videoAd&&cc.sys.platform==cc.sys.WECHAT_GAME){var t=wx.createRewardedVideoAd({adUnitId:e});t.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),o.videoAd=t,o.videoAdLoadCount=0}),t.onClose(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u5173\u95ed"),o.videoAd=void 0}),t.onError(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),o.viewAdLoadCount+=1,o.viewAdLoadCount<4&&t.load()})}},n.prototype.loadBannerAd=function(e){if(!o.bannerAd&&cc.sys.platform==cc.sys.WECHAT_GAME){var t=wx.createBannerAd({adUnitId:e,style:{left:10,top:o.windowHeight-180,width:o.windowWidth-20}});t.onError(function(e){console.log("Banner \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",e),o.bannerAdLoadCount+=1,o.bannerAdLoadCount<4&&loadBannerAd()}),t.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),o.bannerAd=t,o.viewAdLoadCount=0})}},n.prototype.showBannerAd=function(){o.bannerAd?o.bannerAd.show():loadBannerAd()},n.prototype.hideBannerAd=function(){o.bannerAd?(o.bannerAd.destroy(),o.bannerAd=void 0,loadBannerAd()):console.log("\u4e0d\u5b58\u5728\u8d44\u6e90,\u65e0\u9700\u5173\u95ed")},n.prototype.post=function(e,t){return new Promise(function(o,n){wx.request({url:e,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:t||{},success:function(t){o(t),console.log("[post "+e+"] \u8c03\u7528\u6210\u529f: ",t)},fail:function(t){n(t),console.log("[post "+e+"] \u8c03\u7528\u5931\u8d25: ",t)}})})},n.prototype.setUserCloudStorage=function(e){return new Promise(function(t,o){wx.setUserCloudStorage({KVDataList:[{key:"score",value:e+""}],success:function(e){console.log("\u6570\u636e\u4e0a\u62a5\u6210\u529f:",e),t(e)},fail:function(e){console.log("\u6570\u636e\u4e0a\u62a5\u5931\u8d25:",e),o(e)},complete:function(){console.log("\u6570\u636e\u4e0a\u62a5\u5b8c\u6210")}})})},n.prototype.uploadScore=function(e){var t=this;return new Promise(function(n,i){o.wxDb.collection("scores").where({_openid:o.openId}).get({success:function(a){if(a.data.length>0){var c=a.data[0];c.score<e?o.wxDb.collection("scores").doc(c._id).update({data:{score:e,updateDate:o.wxDb.serverDate()},success:function(){t.setUserCloudStorage(e),n(1)},fail:function(e){i(e)}}):n(-1)}else o.wxDb.collection("scores").add({data:{score:e,createDate:o.wxDb.serverDate(),updateDate:o.wxDb.serverDate()},success:function(){t.setUserCloudStorage(e),n(1)},fail:function(e){i(e)}})},fail:function(e){i(e)}})})},t.exports=n,cc._RF.pop()},{"../common/Global":"Global"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"5d6ceg+7YVO+Yr6miaLbp7/","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],welcome:[function(e,t){"use strict";cc._RF.push(t,"fe127VTBhBLEpgugqrKf+0f","welcome"),cc.Class({extends:cc.Component,properties:{audio:{default:null,type:cc.Node},logoNode:{default:null,type:cc.Node}},start:function(){cc.game.addPersistRootNode(this.audio),this.audioClip=this.audio.getComponent("AudioClip"),this.audioClip.playLogoAudio(),this.logoNode.on("logoAnimDone",function(){this.animDone()}.bind(this))},animDone:function(){cc.director.loadScene("Loading")}}),cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","welcome","Dialog","First","Home","Loading","RankDialog","SettlementDialog","AnimsEvent","AudioClip","Custom","Global","LoadingDialog","NetUtils","PersistRootNode","PlatformAdapter","Schedule","SetZIndex","Slider","TtApi","Utils","WxApi"]);