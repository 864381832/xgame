require=function o(c,r,a){function u(t,e){if(!r[t]){if(!c[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(p)return p(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var s=r[t]={exports:{}};c[t][0].call(s.exports,function(e){return u(c[t][1][e]||e)},s,s.exports,o,c,r,a)}return r[t].exports}for(var p="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({Gameover:[function(e,t,i){"use strict";cc._RF.push(t,"62601VSOURMXo5WGBWLHN7F","Gameover");var n=e("Global");cc.Class({extends:cc.Component,properties:{scoreDisplay:{default:null,type:cc.Label},replayBtn:{default:null,type:cc.Node}},listen:function(){this.replayBtn.on(cc.Node.EventType.TOUCH_START,function(e){cc.director.loadScene("game")},this)},init:function(){this.scoreDisplay.string="总得分："+n.score},start:function(){this.listen(),this.init()}}),cc._RF.pop()},{Global:"Global"}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"fbe8ag+zUpGrL+XZ0lqIv2D","Game");var c=e("Util"),n=e("Global");cc.Class({extends:cc.Component,properties:{score:0,scoreDisplay:{default:null,type:cc.Label},leafPrefab:{default:null,type:cc.Prefab},leavesGroup:[],usedGroup:[],leaves:{type:cc.Node,default:null},player:{default:null,type:cc.Node}},spawnLeaf:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=cc.instantiate(this.leafPrefab);this.leaves.addChild(t),t.setPosition(this.getNewLeafPosition(e)),this.leavesGroup.push(t),t.getComponent("Leaf").init(this)},getNewLeafPosition:function(e){var t=this.node.width/2,i=this.leafPrefab.data.width,n=this.player.getComponent("Player").jumpDistance,s=void 0;s=0===e?this.player.x:c.randomMinus1to1()*(t-i/2);var o=n*e-320;return cc.p(s,o)},getNextLeaves:function(){var e=this.leavesGroup.shift();return this.usedGroup.push(e),e},newStep:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.addScore(e),this.leavesGroup.length||this.moveMap()},moveMap:function(){var n=this.usedGroup.length,s=this;this.usedGroup.forEach(function(e,t){var i=e.getComponent("Leaf");i.isDrop=!0,i.dropCallback=function(){t!==n-1?e.destroy():(i.isDrop=!1,s.usedGroup=[],s.resetMap())}})},resetMap:function(){for(var e=0;e<4;++e)this.spawnLeaf(e);var t=this.getNextLeaves();this.player.getComponent("Player").init(this,t)},addScore:function(e){this.score+=e,this.scoreDisplay.string="得分："+this.score},gameOver:function(){this.isOver=!0,n.score=this.score,cc.director.loadScene("gameover")},setInputControl:function(){var t=this,i=this.player.getComponent("Player");this.node.on(cc.Node.EventType.TOUCH_START,function(e){t.leavesGroup.length&&i.jump()})},start:function(){this.resetMap(),this.setInputControl()}}),cc._RF.pop()},{Global:"Global",Util:"Util"}],Global:[function(e,t,i){"use strict";cc._RF.push(t,"d1a18zjk4RM6LmxkTsZ2hT6","Global"),t.exports={score:0},cc._RF.pop()},{}],Leaf:[function(e,t,i){"use strict";cc._RF.push(t,"c9e4cQdX5tF363ZSlZa9tbZ","Leaf"),cc.Class({extends:cc.Component,properties:{speed:150,speedY:500,score:1,isDrop:!1,game:{default:null,serializable:!1},frog:{default:null,type:cc.Node}},init:function(e){this.game=e},start:function(){},moveX:function(e){this.node.x+=this.speed*e;var t=this.game.node.width/2-this.node.width/2,i=-t;(this.node.x>t||this.node.x<i)&&(this.speed=-this.speed)},moveY:function(e){this.node.y-=this.speedY*e,this.node.y<=-320&&(this.node.destroy(),"function"==typeof this.dropCallback&&this.dropCallback())},update:function(e){this.game.isOver||(this.isDrop?this.moveY.call(this,e):this.moveX.call(this,e))}}),cc._RF.pop()},{}],Player:[function(e,t,i){"use strict";cc._RF.push(t,"48527YBcQpOOIrnMTVEgRLc","Player"),cc.Class({extends:cc.Component,properties:{jumpDistance:200,jumpDuration:.3,pickRadius:50,isJump:!1},init:function(e,t){this.game=e,this.currentLeaf=t},getJumpAction:function(){return cc.moveBy(this.jumpDuration,cc.p(0,this.jumpDistance)).easing(cc.easeCubicActionOut())},jump:function(){this.getComponent("cc.Animation").play("jump"),this.isJump=!0;var e=this.getJumpAction(),t=cc.callFunc(function(){this.onJumped()},this);this.node.runAction(cc.sequence(e,t))},getPlayerDistance:function(){var e=this.game.getNextLeaves(),t=e.getPosition();return this.currentLeaf=e,cc.pDistance(this.node.position,t)},onJumped:function(){this.isJump=!1,this.getPlayerDistance()<this.pickRadius?this.game.newStep():this.game.gameOver()},start:function(){},update:function(e){this.currentLeaf&&!this.isJump&&(this.node.x=this.currentLeaf.x,this.node.y=this.currentLeaf.y)}}),cc._RF.pop()},{}],Util:[function(e,t,i){"use strict";cc._RF.push(t,"2bc11qm9V9EibXmeFhmlH5R","Util"),t.exports={randomMinus1to1:function(){return 2*-cc.random0To1()+1}},cc._RF.pop()},{}],Welcome:[function(e,t,i){"use strict";cc._RF.push(t,"33e2drs4FBHKJp53F0cs/Y+","Welcome"),cc.Class({extends:cc.Component,properties:{startBtn:{default:null,type:cc.Node}},listen:function(){this.startBtn.on(cc.Node.EventType.TOUCH_START,function(e){cc.director.loadScene("game")},this)},start:function(){this.listen()}}),cc._RF.pop()},{}]},{},["Game","Gameover","Global","Leaf","Player","Util","Welcome"]);